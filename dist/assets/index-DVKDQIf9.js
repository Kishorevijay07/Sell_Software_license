var BC=Object.defineProperty;var VC=(n,e,t)=>e in n?BC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ls=(n,e,t)=>VC(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Er(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kh={exports:{}},go={},Oh={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function zC(){if(Jw)return Ie;Jw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function y(k){return k===null||typeof k!="object"?null:(k=m&&k[m]||k["@@iterator"],typeof k=="function"?k:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function S(k,$,re){this.props=k,this.context=$,this.refs=b,this.updater=re||v}S.prototype.isReactComponent={},S.prototype.setState=function(k,$){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,$,"setState")},S.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function E(){}E.prototype=S.prototype;function A(k,$,re){this.props=k,this.context=$,this.refs=b,this.updater=re||v}var T=A.prototype=new E;T.constructor=A,w(T,S.prototype),T.isPureReactComponent=!0;var R=Array.isArray,I=Object.prototype.hasOwnProperty,M={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function U(k,$,re){var he,pe={},Ce=null,je=null;if($!=null)for(he in $.ref!==void 0&&(je=$.ref),$.key!==void 0&&(Ce=""+$.key),$)I.call($,he)&&!B.hasOwnProperty(he)&&(pe[he]=$[he]);var $e=arguments.length-2;if($e===1)pe.children=re;else if(1<$e){for(var He=Array($e),At=0;At<$e;At++)He[At]=arguments[At+2];pe.children=He}if(k&&k.defaultProps)for(he in $e=k.defaultProps,$e)pe[he]===void 0&&(pe[he]=$e[he]);return{$$typeof:n,type:k,key:Ce,ref:je,props:pe,_owner:M.current}}function ie(k,$){return{$$typeof:n,type:k.type,key:$,ref:k.ref,props:k.props,_owner:k._owner}}function de(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function ve(k){var $={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(re){return $[re]})}var We=/\/+/g;function Ze(k,$){return typeof k=="object"&&k!==null&&k.key!=null?ve(""+k.key):$.toString(36)}function Y(k,$,re,he,pe){var Ce=typeof k;(Ce==="undefined"||Ce==="boolean")&&(k=null);var je=!1;if(k===null)je=!0;else switch(Ce){case"string":case"number":je=!0;break;case"object":switch(k.$$typeof){case n:case e:je=!0}}if(je)return je=k,pe=pe(je),k=he===""?"."+Ze(je,0):he,R(pe)?(re="",k!=null&&(re=k.replace(We,"$&/")+"/"),Y(pe,$,re,"",function(At){return At})):pe!=null&&(de(pe)&&(pe=ie(pe,re+(!pe.key||je&&je.key===pe.key?"":(""+pe.key).replace(We,"$&/")+"/")+k)),$.push(pe)),1;if(je=0,he=he===""?".":he+":",R(k))for(var $e=0;$e<k.length;$e++){Ce=k[$e];var He=he+Ze(Ce,$e);je+=Y(Ce,$,re,He,pe)}else if(He=y(k),typeof He=="function")for(k=He.call(k),$e=0;!(Ce=k.next()).done;)Ce=Ce.value,He=he+Ze(Ce,$e++),je+=Y(Ce,$,re,He,pe);else if(Ce==="object")throw $=String(k),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return je}function J(k,$,re){if(k==null)return k;var he=[],pe=0;return Y(k,he,"","",function(Ce){return $.call(re,Ce,pe++)}),he}function te(k){if(k._status===-1){var $=k._result;$=$(),$.then(function(re){(k._status===0||k._status===-1)&&(k._status=1,k._result=re)},function(re){(k._status===0||k._status===-1)&&(k._status=2,k._result=re)}),k._status===-1&&(k._status=0,k._result=$)}if(k._status===1)return k._result.default;throw k._result}var Z={current:null},D={transition:null},z={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:D,ReactCurrentOwner:M};function V(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:J,forEach:function(k,$,re){J(k,function(){$.apply(this,arguments)},re)},count:function(k){var $=0;return J(k,function(){$++}),$},toArray:function(k){return J(k,function($){return $})||[]},only:function(k){if(!de(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ie.Component=S,Ie.Fragment=t,Ie.Profiler=s,Ie.PureComponent=A,Ie.StrictMode=r,Ie.Suspense=d,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,Ie.act=V,Ie.cloneElement=function(k,$,re){if(k==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+k+".");var he=w({},k.props),pe=k.key,Ce=k.ref,je=k._owner;if($!=null){if($.ref!==void 0&&(Ce=$.ref,je=M.current),$.key!==void 0&&(pe=""+$.key),k.type&&k.type.defaultProps)var $e=k.type.defaultProps;for(He in $)I.call($,He)&&!B.hasOwnProperty(He)&&(he[He]=$[He]===void 0&&$e!==void 0?$e[He]:$[He])}var He=arguments.length-2;if(He===1)he.children=re;else if(1<He){$e=Array(He);for(var At=0;At<He;At++)$e[At]=arguments[At+2];he.children=$e}return{$$typeof:n,type:k.type,key:pe,ref:Ce,props:he,_owner:je}},Ie.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},k.Provider={$$typeof:a,_context:k},k.Consumer=k},Ie.createElement=U,Ie.createFactory=function(k){var $=U.bind(null,k);return $.type=k,$},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:l,render:k}},Ie.isValidElement=de,Ie.lazy=function(k){return{$$typeof:h,_payload:{_status:-1,_result:k},_init:te}},Ie.memo=function(k,$){return{$$typeof:f,type:k,compare:$===void 0?null:$}},Ie.startTransition=function(k){var $=D.transition;D.transition={};try{k()}finally{D.transition=$}},Ie.unstable_act=V,Ie.useCallback=function(k,$){return Z.current.useCallback(k,$)},Ie.useContext=function(k){return Z.current.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k){return Z.current.useDeferredValue(k)},Ie.useEffect=function(k,$){return Z.current.useEffect(k,$)},Ie.useId=function(){return Z.current.useId()},Ie.useImperativeHandle=function(k,$,re){return Z.current.useImperativeHandle(k,$,re)},Ie.useInsertionEffect=function(k,$){return Z.current.useInsertionEffect(k,$)},Ie.useLayoutEffect=function(k,$){return Z.current.useLayoutEffect(k,$)},Ie.useMemo=function(k,$){return Z.current.useMemo(k,$)},Ie.useReducer=function(k,$,re){return Z.current.useReducer(k,$,re)},Ie.useRef=function(k){return Z.current.useRef(k)},Ie.useState=function(k){return Z.current.useState(k)},Ie.useSyncExternalStore=function(k,$,re){return Z.current.useSyncExternalStore(k,$,re)},Ie.useTransition=function(){return Z.current.useTransition()},Ie.version="18.3.1",Ie}var Xw;function id(){return Xw||(Xw=1,Oh.exports=zC()),Oh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function HC(){if(Yw)return go;Yw=1;var n=id(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function u(l,d,f){var h,m={},y=null,v=null;f!==void 0&&(y=""+f),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(v=d.ref);for(h in d)r.call(d,h)&&!a.hasOwnProperty(h)&&(m[h]=d[h]);if(l&&l.defaultProps)for(h in d=l.defaultProps,d)m[h]===void 0&&(m[h]=d[h]);return{$$typeof:e,type:l,key:y,ref:v,props:m,_owner:s.current}}return go.Fragment=t,go.jsx=u,go.jsxs=u,go}var Qw;function qC(){return Qw||(Qw=1,kh.exports=HC()),kh.exports}var H=qC(),oe=id();const In=Er(oe);var Wl={},Rh={exports:{}},sn={},Ih={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function WC(){return eb||(eb=1,function(n){function e(D,z){var V=D.length;D.push(z);e:for(;0<V;){var k=V-1>>>1,$=D[k];if(0<s($,z))D[k]=z,D[V]=$,V=k;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var z=D[0],V=D.pop();if(V!==z){D[0]=V;e:for(var k=0,$=D.length,re=$>>>1;k<re;){var he=2*(k+1)-1,pe=D[he],Ce=he+1,je=D[Ce];if(0>s(pe,V))Ce<$&&0>s(je,pe)?(D[k]=je,D[Ce]=V,k=Ce):(D[k]=pe,D[he]=V,k=he);else if(Ce<$&&0>s(je,V))D[k]=je,D[Ce]=V,k=Ce;else break e}}return z}function s(D,z){var V=D.sortIndex-z.sortIndex;return V!==0?V:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,l=u.now();n.unstable_now=function(){return u.now()-l}}var d=[],f=[],h=1,m=null,y=3,v=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(D){for(var z=t(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=D)r(f),z.sortIndex=z.expirationTime,e(d,z);else break;z=t(f)}}function R(D){if(b=!1,T(D),!w)if(t(d)!==null)w=!0,te(I);else{var z=t(f);z!==null&&Z(R,z.startTime-D)}}function I(D,z){w=!1,b&&(b=!1,E(U),U=-1),v=!0;var V=y;try{for(T(z),m=t(d);m!==null&&(!(m.expirationTime>z)||D&&!ve());){var k=m.callback;if(typeof k=="function"){m.callback=null,y=m.priorityLevel;var $=k(m.expirationTime<=z);z=n.unstable_now(),typeof $=="function"?m.callback=$:m===t(d)&&r(d),T(z)}else r(d);m=t(d)}if(m!==null)var re=!0;else{var he=t(f);he!==null&&Z(R,he.startTime-z),re=!1}return re}finally{m=null,y=V,v=!1}}var M=!1,B=null,U=-1,ie=5,de=-1;function ve(){return!(n.unstable_now()-de<ie)}function We(){if(B!==null){var D=n.unstable_now();de=D;var z=!0;try{z=B(!0,D)}finally{z?Ze():(M=!1,B=null)}}else M=!1}var Ze;if(typeof A=="function")Ze=function(){A(We)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,J=Y.port2;Y.port1.onmessage=We,Ze=function(){J.postMessage(null)}}else Ze=function(){S(We,0)};function te(D){B=D,M||(M=!0,Ze())}function Z(D,z){U=S(function(){D(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){w||v||(w=!0,te(I))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(D){switch(y){case 1:case 2:case 3:var z=3;break;default:z=y}var V=y;y=z;try{return D()}finally{y=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=y;y=D;try{return z()}finally{y=V}},n.unstable_scheduleCallback=function(D,z,V){var k=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?k+V:k):V=k,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=V+$,D={id:h++,callback:z,priorityLevel:D,startTime:V,expirationTime:$,sortIndex:-1},V>k?(D.sortIndex=V,e(f,D),t(d)===null&&D===t(f)&&(b?(E(U),U=-1):b=!0,Z(R,V-k))):(D.sortIndex=$,e(d,D),w||v||(w=!0,te(I))),D},n.unstable_shouldYield=ve,n.unstable_wrapCallback=function(D){var z=y;return function(){var V=y;y=z;try{return D.apply(this,arguments)}finally{y=V}}}}(Nh)),Nh}var tb;function ZC(){return tb||(tb=1,Ih.exports=WC()),Ih.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function GC(){if(nb)return sn;nb=1;var n=id(),e=ZC();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function y(i){return d.call(m,i)?!0:d.call(h,i)?!1:f.test(i)?m[i]=!0:(h[i]=!0,!1)}function v(i,o,c,p){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function w(i,o,c,p){if(o===null||typeof o>"u"||v(i,o,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function b(i,o,c,p,g,_,x){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=x}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){S[i]=new b(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];S[o]=new b(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){S[i]=new b(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){S[i]=new b(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){S[i]=new b(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){S[i]=new b(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){S[i]=new b(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){S[i]=new b(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){S[i]=new b(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function A(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(E,A);S[o]=new b(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(E,A);S[o]=new b(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(E,A);S[o]=new b(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){S[i]=new b(i,1,!1,i.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){S[i]=new b(i,1,!1,i.toLowerCase(),null,!0,!0)});function T(i,o,c,p){var g=S.hasOwnProperty(o)?S[o]:null;(g!==null?g.type!==0:p||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(w(o,c,g,p)&&(c=null),p||g===null?y(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(o=g.attributeName,p=g.attributeNamespace,c===null?i.removeAttribute(o):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,p?i.setAttributeNS(p,o,c):i.setAttribute(o,c))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),de=Symbol.for("react.provider"),ve=Symbol.for("react.context"),We=Symbol.for("react.forward_ref"),Ze=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),D=Symbol.iterator;function z(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var V=Object.assign,k;function $(i){if(k===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);k=o&&o[1]||""}return`
`+k+i}var re=!1;function he(i,o){if(!i||re)return"";re=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(L){var p=L}Reflect.construct(i,[],o)}else{try{o.call()}catch(L){p=L}i.call(o.prototype)}else{try{throw Error()}catch(L){p=L}i()}}catch(L){if(L&&p&&typeof L.stack=="string"){for(var g=L.stack.split(`
`),_=p.stack.split(`
`),x=g.length-1,P=_.length-1;1<=x&&0<=P&&g[x]!==_[P];)P--;for(;1<=x&&0<=P;x--,P--)if(g[x]!==_[P]){if(x!==1||P!==1)do if(x--,P--,0>P||g[x]!==_[P]){var C=`
`+g[x].replace(" at new "," at ");return i.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",i.displayName)),C}while(1<=x&&0<=P);break}}}finally{re=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?$(i):""}function pe(i){switch(i.tag){case 5:return $(i.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return i=he(i.type,!1),i;case 11:return i=he(i.type.render,!1),i;case 1:return i=he(i.type,!0),i;default:return""}}function Ce(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case M:return"Portal";case ie:return"Profiler";case U:return"StrictMode";case Ze:return"Suspense";case Y:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ve:return(i.displayName||"Context")+".Consumer";case de:return(i._context.displayName||"Context")+".Provider";case We:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case J:return o=i.displayName||null,o!==null?o:Ce(i.type)||"Memo";case te:o=i._payload,i=i._init;try{return Ce(i(o))}catch{}}return null}function je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(o);case 8:return o===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function $e(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function He(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function At(i){var o=He(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),p=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,_=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(x){p=""+x,_.call(this,x)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function hi(i){i._valueTracker||(i._valueTracker=At(i))}function nv(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),p="";return i&&(p=He(i)?i.checked?"true":"false":i.value),i=p,i!==c?(o.setValue(i),!0):!1}function Mu(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ld(i,o){var c=o.checked;return V({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function rv(i,o){var c=o.defaultValue==null?"":o.defaultValue,p=o.checked!=null?o.checked:o.defaultChecked;c=$e(o.value!=null?o.value:c),i._wrapperState={initialChecked:p,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function sv(i,o){o=o.checked,o!=null&&T(i,"checked",o,!1)}function $d(i,o){sv(i,o);var c=$e(o.value),p=o.type;if(c!=null)p==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Md(i,o.type,c):o.hasOwnProperty("defaultValue")&&Md(i,o.type,$e(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function iv(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var p=o.type;if(!(p!=="submit"&&p!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Md(i,o,c){(o!=="number"||Mu(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var Oa=Array.isArray;function pi(i,o,c,p){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&p&&(i[c].defaultSelected=!0)}else{for(c=""+$e(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,p&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Dd(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return V({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function av(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(Oa(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:$e(c)}}function ov(i,o){var c=$e(o.value),p=$e(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),p!=null&&(i.defaultValue=""+p)}function uv(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function lv(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fd(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?lv(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Du,cv=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,p,g){MSApp.execUnsafeLocalFunction(function(){return i(o,c,p,g)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Du=Du||document.createElement("div"),Du.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Du.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ra(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},q1=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(i){q1.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Ia[o]=Ia[i]})});function dv(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||Ia.hasOwnProperty(i)&&Ia[i]?(""+o).trim():o+"px"}function fv(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var p=c.indexOf("--")===0,g=dv(c,o[c],p);c==="float"&&(c="cssFloat"),p?i.setProperty(c,g):i[c]=g}}var W1=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(i,o){if(o){if(W1[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Bd(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function zd(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hd=null,mi=null,gi=null;function hv(i){if(i=eo(i)){if(typeof Hd!="function")throw Error(t(280));var o=i.stateNode;o&&(o=ol(o),Hd(i.stateNode,i.type,o))}}function pv(i){mi?gi?gi.push(i):gi=[i]:mi=i}function mv(){if(mi){var i=mi,o=gi;if(gi=mi=null,hv(i),o)for(i=0;i<o.length;i++)hv(o[i])}}function gv(i,o){return i(o)}function yv(){}var qd=!1;function vv(i,o,c){if(qd)return i(o,c);qd=!0;try{return gv(i,o,c)}finally{qd=!1,(mi!==null||gi!==null)&&(yv(),mv())}}function Na(i,o){var c=i.stateNode;if(c===null)return null;var p=ol(c);if(p===null)return null;c=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var Wd=!1;if(l)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Wd=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Wd=!1}function Z1(i,o,c,p,g,_,x,P,C){var L=Array.prototype.slice.call(arguments,3);try{o.apply(c,L)}catch(W){this.onError(W)}}var La=!1,Fu=null,Uu=!1,Zd=null,G1={onError:function(i){La=!0,Fu=i}};function K1(i,o,c,p,g,_,x,P,C){La=!1,Fu=null,Z1.apply(G1,arguments)}function J1(i,o,c,p,g,_,x,P,C){if(K1.apply(this,arguments),La){if(La){var L=Fu;La=!1,Fu=null}else throw Error(t(198));Uu||(Uu=!0,Zd=L)}}function js(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function _v(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function wv(i){if(js(i)!==i)throw Error(t(188))}function X1(i){var o=i.alternate;if(!o){if(o=js(i),o===null)throw Error(t(188));return o!==i?null:i}for(var c=i,p=o;;){var g=c.return;if(g===null)break;var _=g.alternate;if(_===null){if(p=g.return,p!==null){c=p;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===c)return wv(g),i;if(_===p)return wv(g),o;_=_.sibling}throw Error(t(188))}if(c.return!==p.return)c=g,p=_;else{for(var x=!1,P=g.child;P;){if(P===c){x=!0,c=g,p=_;break}if(P===p){x=!0,p=g,c=_;break}P=P.sibling}if(!x){for(P=_.child;P;){if(P===c){x=!0,c=_,p=g;break}if(P===p){x=!0,p=_,c=g;break}P=P.sibling}if(!x)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:o}function bv(i){return i=X1(i),i!==null?xv(i):null}function xv(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=xv(i);if(o!==null)return o;i=i.sibling}return null}var Sv=e.unstable_scheduleCallback,Ev=e.unstable_cancelCallback,Y1=e.unstable_shouldYield,Q1=e.unstable_requestPaint,lt=e.unstable_now,eP=e.unstable_getCurrentPriorityLevel,Gd=e.unstable_ImmediatePriority,Tv=e.unstable_UserBlockingPriority,Bu=e.unstable_NormalPriority,tP=e.unstable_LowPriority,Av=e.unstable_IdlePriority,Vu=null,or=null;function nP(i){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Vu,i,void 0,(i.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:iP,rP=Math.log,sP=Math.LN2;function iP(i){return i>>>=0,i===0?32:31-(rP(i)/sP|0)|0}var zu=64,Hu=4194304;function $a(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function qu(i,o){var c=i.pendingLanes;if(c===0)return 0;var p=0,g=i.suspendedLanes,_=i.pingedLanes,x=c&268435455;if(x!==0){var P=x&~g;P!==0?p=$a(P):(_&=x,_!==0&&(p=$a(_)))}else x=c&~g,x!==0?p=$a(x):_!==0&&(p=$a(_));if(p===0)return 0;if(o!==0&&o!==p&&(o&g)===0&&(g=p&-p,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if((p&4)!==0&&(p|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=p;0<o;)c=31-jn(o),g=1<<c,p|=i[c],o&=~g;return p}function aP(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oP(i,o){for(var c=i.suspendedLanes,p=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var x=31-jn(_),P=1<<x,C=g[x];C===-1?((P&c)===0||(P&p)!==0)&&(g[x]=aP(P,o)):C<=o&&(i.expiredLanes|=P),_&=~P}}function Kd(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Pv(){var i=zu;return zu<<=1,(zu&4194240)===0&&(zu=64),i}function Jd(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Ma(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-jn(o),i[o]=c}function uP(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-jn(c),_=1<<g;o[g]=0,p[g]=-1,i[g]=-1,c&=~_}}function Xd(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var p=31-jn(c),g=1<<p;g&o|i[p]&o&&(i[p]|=o),c&=~g}}var Be=0;function Cv(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var kv,Yd,Ov,Rv,Iv,Qd=!1,Wu=[],Hr=null,qr=null,Wr=null,Da=new Map,Fa=new Map,Zr=[],lP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nv(i,o){switch(i){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":Da.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(o.pointerId)}}function Ua(i,o,c,p,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:c,eventSystemFlags:p,nativeEvent:_,targetContainers:[g]},o!==null&&(o=eo(o),o!==null&&Yd(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function cP(i,o,c,p,g){switch(o){case"focusin":return Hr=Ua(Hr,i,o,c,p,g),!0;case"dragenter":return qr=Ua(qr,i,o,c,p,g),!0;case"mouseover":return Wr=Ua(Wr,i,o,c,p,g),!0;case"pointerover":var _=g.pointerId;return Da.set(_,Ua(Da.get(_)||null,i,o,c,p,g)),!0;case"gotpointercapture":return _=g.pointerId,Fa.set(_,Ua(Fa.get(_)||null,i,o,c,p,g)),!0}return!1}function jv(i){var o=Ls(i.target);if(o!==null){var c=js(o);if(c!==null){if(o=c.tag,o===13){if(o=_v(c),o!==null){i.blockedOn=o,Iv(i.priority,function(){Ov(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zu(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=tf(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);Vd=p,c.target.dispatchEvent(p),Vd=null}else return o=eo(c),o!==null&&Yd(o),i.blockedOn=c,!1;o.shift()}return!0}function Lv(i,o,c){Zu(i)&&c.delete(o)}function dP(){Qd=!1,Hr!==null&&Zu(Hr)&&(Hr=null),qr!==null&&Zu(qr)&&(qr=null),Wr!==null&&Zu(Wr)&&(Wr=null),Da.forEach(Lv),Fa.forEach(Lv)}function Ba(i,o){i.blockedOn===o&&(i.blockedOn=null,Qd||(Qd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dP)))}function Va(i){function o(g){return Ba(g,i)}if(0<Wu.length){Ba(Wu[0],i);for(var c=1;c<Wu.length;c++){var p=Wu[c];p.blockedOn===i&&(p.blockedOn=null)}}for(Hr!==null&&Ba(Hr,i),qr!==null&&Ba(qr,i),Wr!==null&&Ba(Wr,i),Da.forEach(o),Fa.forEach(o),c=0;c<Zr.length;c++)p=Zr[c],p.blockedOn===i&&(p.blockedOn=null);for(;0<Zr.length&&(c=Zr[0],c.blockedOn===null);)jv(c),c.blockedOn===null&&Zr.shift()}var yi=R.ReactCurrentBatchConfig,Gu=!0;function fP(i,o,c,p){var g=Be,_=yi.transition;yi.transition=null;try{Be=1,ef(i,o,c,p)}finally{Be=g,yi.transition=_}}function hP(i,o,c,p){var g=Be,_=yi.transition;yi.transition=null;try{Be=4,ef(i,o,c,p)}finally{Be=g,yi.transition=_}}function ef(i,o,c,p){if(Gu){var g=tf(i,o,c,p);if(g===null)_f(i,o,p,Ku,c),Nv(i,p);else if(cP(g,i,o,c,p))p.stopPropagation();else if(Nv(i,p),o&4&&-1<lP.indexOf(i)){for(;g!==null;){var _=eo(g);if(_!==null&&kv(_),_=tf(i,o,c,p),_===null&&_f(i,o,p,Ku,c),_===g)break;g=_}g!==null&&p.stopPropagation()}else _f(i,o,p,null,c)}}var Ku=null;function tf(i,o,c,p){if(Ku=null,i=zd(p),i=Ls(i),i!==null)if(o=js(i),o===null)i=null;else if(c=o.tag,c===13){if(i=_v(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Ku=i,null}function $v(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eP()){case Gd:return 1;case Tv:return 4;case Bu:case tP:return 16;case Av:return 536870912;default:return 16}default:return 16}}var Gr=null,nf=null,Ju=null;function Mv(){if(Ju)return Ju;var i,o=nf,c=o.length,p,g="value"in Gr?Gr.value:Gr.textContent,_=g.length;for(i=0;i<c&&o[i]===g[i];i++);var x=c-i;for(p=1;p<=x&&o[c-p]===g[_-p];p++);return Ju=g.slice(i,1<p?1-p:void 0)}function Xu(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Yu(){return!0}function Dv(){return!1}function dn(i){function o(c,p,g,_,x){this._reactName=c,this._targetInst=g,this.type=p,this.nativeEvent=_,this.target=x,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(_):_[P]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Yu:Dv,this.isPropagationStopped=Dv,this}return V(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Yu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Yu)},persist:function(){},isPersistent:Yu}),o}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rf=dn(vi),za=V({},vi,{view:0,detail:0}),pP=dn(za),sf,af,Ha,Qu=V({},za,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ha&&(Ha&&i.type==="mousemove"?(sf=i.screenX-Ha.screenX,af=i.screenY-Ha.screenY):af=sf=0,Ha=i),sf)},movementY:function(i){return"movementY"in i?i.movementY:af}}),Fv=dn(Qu),mP=V({},Qu,{dataTransfer:0}),gP=dn(mP),yP=V({},za,{relatedTarget:0}),of=dn(yP),vP=V({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),_P=dn(vP),wP=V({},vi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),bP=dn(wP),xP=V({},vi,{data:0}),Uv=dn(xP),SP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AP(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=TP[i])?!!o[i]:!1}function uf(){return AP}var PP=V({},za,{key:function(i){if(i.key){var o=SP[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Xu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?EP[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(i){return i.type==="keypress"?Xu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),CP=dn(PP),kP=V({},Qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=dn(kP),OP=V({},za,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),RP=dn(OP),IP=V({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),NP=dn(IP),jP=V({},Qu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),LP=dn(jP),$P=[9,13,27,32],lf=l&&"CompositionEvent"in window,qa=null;l&&"documentMode"in document&&(qa=document.documentMode);var MP=l&&"TextEvent"in window&&!qa,Vv=l&&(!lf||qa&&8<qa&&11>=qa),zv=" ",Hv=!1;function qv(i,o){switch(i){case"keyup":return $P.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _i=!1;function DP(i,o){switch(i){case"compositionend":return Wv(o);case"keypress":return o.which!==32?null:(Hv=!0,zv);case"textInput":return i=o.data,i===zv&&Hv?null:i;default:return null}}function FP(i,o){if(_i)return i==="compositionend"||!lf&&qv(i,o)?(i=Mv(),Ju=nf=Gr=null,_i=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Vv&&o.locale!=="ko"?null:o.data;default:return null}}var UP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zv(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!UP[i.type]:o==="textarea"}function Gv(i,o,c,p){pv(p),o=sl(o,"onChange"),0<o.length&&(c=new rf("onChange","change",null,c,p),i.push({event:c,listeners:o}))}var Wa=null,Za=null;function BP(i){f_(i,0)}function el(i){var o=Ei(i);if(nv(o))return i}function VP(i,o){if(i==="change")return o}var Kv=!1;if(l){var cf;if(l){var df="oninput"in document;if(!df){var Jv=document.createElement("div");Jv.setAttribute("oninput","return;"),df=typeof Jv.oninput=="function"}cf=df}else cf=!1;Kv=cf&&(!document.documentMode||9<document.documentMode)}function Xv(){Wa&&(Wa.detachEvent("onpropertychange",Yv),Za=Wa=null)}function Yv(i){if(i.propertyName==="value"&&el(Za)){var o=[];Gv(o,Za,i,zd(i)),vv(BP,o)}}function zP(i,o,c){i==="focusin"?(Xv(),Wa=o,Za=c,Wa.attachEvent("onpropertychange",Yv)):i==="focusout"&&Xv()}function HP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return el(Za)}function qP(i,o){if(i==="click")return el(o)}function WP(i,o){if(i==="input"||i==="change")return el(o)}function ZP(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Ln=typeof Object.is=="function"?Object.is:ZP;function Ga(i,o){if(Ln(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),p=Object.keys(o);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var g=c[p];if(!d.call(o,g)||!Ln(i[g],o[g]))return!1}return!0}function Qv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function e_(i,o){var c=Qv(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=o&&p>=o)return{node:c,offset:o-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Qv(c)}}function t_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?t_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function n_(){for(var i=window,o=Mu();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Mu(i.document)}return o}function ff(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function GP(i){var o=n_(),c=i.focusedElem,p=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&t_(c.ownerDocument.documentElement,c)){if(p!==null&&ff(c)){if(o=p.start,i=p.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,_=Math.min(p.start,g);p=p.end===void 0?_:Math.min(p.end,g),!i.extend&&_>p&&(g=p,p=_,_=g),g=e_(c,_);var x=e_(c,p);g&&x&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),_>p?(i.addRange(o),i.extend(x.node,x.offset)):(o.setEnd(x.node,x.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var KP=l&&"documentMode"in document&&11>=document.documentMode,wi=null,hf=null,Ka=null,pf=!1;function r_(i,o,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;pf||wi==null||wi!==Mu(p)||(p=wi,"selectionStart"in p&&ff(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Ka&&Ga(Ka,p)||(Ka=p,p=sl(hf,"onSelect"),0<p.length&&(o=new rf("onSelect","select",null,o,c),i.push({event:o,listeners:p}),o.target=wi)))}function tl(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var bi={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionend:tl("Transition","TransitionEnd")},mf={},s_={};l&&(s_=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function nl(i){if(mf[i])return mf[i];if(!bi[i])return i;var o=bi[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in s_)return mf[i]=o[c];return i}var i_=nl("animationend"),a_=nl("animationiteration"),o_=nl("animationstart"),u_=nl("transitionend"),l_=new Map,c_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(i,o){l_.set(i,o),a(o,[i])}for(var gf=0;gf<c_.length;gf++){var yf=c_[gf],JP=yf.toLowerCase(),XP=yf[0].toUpperCase()+yf.slice(1);Kr(JP,"on"+XP)}Kr(i_,"onAnimationEnd"),Kr(a_,"onAnimationIteration"),Kr(o_,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(u_,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function d_(i,o,c){var p=i.type||"unknown-event";i.currentTarget=c,J1(p,o,void 0,i),i.currentTarget=null}function f_(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],g=p.event;p=p.listeners;e:{var _=void 0;if(o)for(var x=p.length-1;0<=x;x--){var P=p[x],C=P.instance,L=P.currentTarget;if(P=P.listener,C!==_&&g.isPropagationStopped())break e;d_(g,P,L),_=C}else for(x=0;x<p.length;x++){if(P=p[x],C=P.instance,L=P.currentTarget,P=P.listener,C!==_&&g.isPropagationStopped())break e;d_(g,P,L),_=C}}}if(Uu)throw i=Zd,Uu=!1,Zd=null,i}function Ke(i,o){var c=o[Tf];c===void 0&&(c=o[Tf]=new Set);var p=i+"__bubble";c.has(p)||(h_(o,i,2,!1),c.add(p))}function vf(i,o,c){var p=0;o&&(p|=4),h_(c,i,p,o)}var rl="_reactListening"+Math.random().toString(36).slice(2);function Xa(i){if(!i[rl]){i[rl]=!0,r.forEach(function(c){c!=="selectionchange"&&(YP.has(c)||vf(c,!1,i),vf(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rl]||(o[rl]=!0,vf("selectionchange",!1,o))}}function h_(i,o,c,p){switch($v(o)){case 1:var g=fP;break;case 4:g=hP;break;default:g=ef}c=g.bind(null,o,c,i),g=void 0,!Wd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),p?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function _f(i,o,c,p,g){var _=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var P=p.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(x===4)for(x=p.return;x!==null;){var C=x.tag;if((C===3||C===4)&&(C=x.stateNode.containerInfo,C===g||C.nodeType===8&&C.parentNode===g))return;x=x.return}for(;P!==null;){if(x=Ls(P),x===null)return;if(C=x.tag,C===5||C===6){p=_=x;continue e}P=P.parentNode}}p=p.return}vv(function(){var L=_,W=zd(c),G=[];e:{var q=l_.get(i);if(q!==void 0){var ee=rf,ae=i;switch(i){case"keypress":if(Xu(c)===0)break e;case"keydown":case"keyup":ee=CP;break;case"focusin":ae="focus",ee=of;break;case"focusout":ae="blur",ee=of;break;case"beforeblur":case"afterblur":ee=of;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=gP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=RP;break;case i_:case a_:case o_:ee=_P;break;case u_:ee=NP;break;case"scroll":ee=pP;break;case"wheel":ee=LP;break;case"copy":case"cut":case"paste":ee=bP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Bv}var ue=(o&4)!==0,ct=!ue&&i==="scroll",N=ue?q!==null?q+"Capture":null:q;ue=[];for(var O=L,j;O!==null;){j=O;var X=j.stateNode;if(j.tag===5&&X!==null&&(j=X,N!==null&&(X=Na(O,N),X!=null&&ue.push(Ya(O,X,j)))),ct)break;O=O.return}0<ue.length&&(q=new ee(q,ae,null,c,W),G.push({event:q,listeners:ue}))}}if((o&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",ee=i==="mouseout"||i==="pointerout",q&&c!==Vd&&(ae=c.relatedTarget||c.fromElement)&&(Ls(ae)||ae[Tr]))break e;if((ee||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,ee?(ae=c.relatedTarget||c.toElement,ee=L,ae=ae?Ls(ae):null,ae!==null&&(ct=js(ae),ae!==ct||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(ee=null,ae=L),ee!==ae)){if(ue=Fv,X="onMouseLeave",N="onMouseEnter",O="mouse",(i==="pointerout"||i==="pointerover")&&(ue=Bv,X="onPointerLeave",N="onPointerEnter",O="pointer"),ct=ee==null?q:Ei(ee),j=ae==null?q:Ei(ae),q=new ue(X,O+"leave",ee,c,W),q.target=ct,q.relatedTarget=j,X=null,Ls(W)===L&&(ue=new ue(N,O+"enter",ae,c,W),ue.target=j,ue.relatedTarget=ct,X=ue),ct=X,ee&&ae)t:{for(ue=ee,N=ae,O=0,j=ue;j;j=xi(j))O++;for(j=0,X=N;X;X=xi(X))j++;for(;0<O-j;)ue=xi(ue),O--;for(;0<j-O;)N=xi(N),j--;for(;O--;){if(ue===N||N!==null&&ue===N.alternate)break t;ue=xi(ue),N=xi(N)}ue=null}else ue=null;ee!==null&&p_(G,q,ee,ue,!1),ae!==null&&ct!==null&&p_(G,ct,ae,ue,!0)}}e:{if(q=L?Ei(L):window,ee=q.nodeName&&q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&q.type==="file")var le=VP;else if(Zv(q))if(Kv)le=WP;else{le=HP;var ge=zP}else(ee=q.nodeName)&&ee.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(le=qP);if(le&&(le=le(i,L))){Gv(G,le,c,W);break e}ge&&ge(i,q,L),i==="focusout"&&(ge=q._wrapperState)&&ge.controlled&&q.type==="number"&&Md(q,"number",q.value)}switch(ge=L?Ei(L):window,i){case"focusin":(Zv(ge)||ge.contentEditable==="true")&&(wi=ge,hf=L,Ka=null);break;case"focusout":Ka=hf=wi=null;break;case"mousedown":pf=!0;break;case"contextmenu":case"mouseup":case"dragend":pf=!1,r_(G,c,W);break;case"selectionchange":if(KP)break;case"keydown":case"keyup":r_(G,c,W)}var ye;if(lf)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else _i?qv(i,c)&&(xe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(xe="onCompositionStart");xe&&(Vv&&c.locale!=="ko"&&(_i||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&_i&&(ye=Mv()):(Gr=W,nf="value"in Gr?Gr.value:Gr.textContent,_i=!0)),ge=sl(L,xe),0<ge.length&&(xe=new Uv(xe,i,null,c,W),G.push({event:xe,listeners:ge}),ye?xe.data=ye:(ye=Wv(c),ye!==null&&(xe.data=ye)))),(ye=MP?DP(i,c):FP(i,c))&&(L=sl(L,"onBeforeInput"),0<L.length&&(W=new Uv("onBeforeInput","beforeinput",null,c,W),G.push({event:W,listeners:L}),W.data=ye))}f_(G,o)})}function Ya(i,o,c){return{instance:i,listener:o,currentTarget:c}}function sl(i,o){for(var c=o+"Capture",p=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Na(i,c),_!=null&&p.unshift(Ya(i,_,g)),_=Na(i,o),_!=null&&p.push(Ya(i,_,g))),i=i.return}return p}function xi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function p_(i,o,c,p,g){for(var _=o._reactName,x=[];c!==null&&c!==p;){var P=c,C=P.alternate,L=P.stateNode;if(C!==null&&C===p)break;P.tag===5&&L!==null&&(P=L,g?(C=Na(c,_),C!=null&&x.unshift(Ya(c,C,P))):g||(C=Na(c,_),C!=null&&x.push(Ya(c,C,P)))),c=c.return}x.length!==0&&i.push({event:o,listeners:x})}var QP=/\r\n?/g,eC=/\u0000|\uFFFD/g;function m_(i){return(typeof i=="string"?i:""+i).replace(QP,`
`).replace(eC,"")}function il(i,o,c){if(o=m_(o),m_(i)!==o&&c)throw Error(t(425))}function al(){}var wf=null,bf=null;function xf(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,tC=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,nC=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(i){return g_.resolve(null).then(i).catch(rC)}:Sf;function rC(i){setTimeout(function(){throw i})}function Ef(i,o){var c=o,p=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(p===0){i.removeChild(g),Va(o);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=g}while(c);Va(o)}function Jr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function y_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var Si=Math.random().toString(36).slice(2),ur="__reactFiber$"+Si,Qa="__reactProps$"+Si,Tr="__reactContainer$"+Si,Tf="__reactEvents$"+Si,sC="__reactListeners$"+Si,iC="__reactHandles$"+Si;function Ls(i){var o=i[ur];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Tr]||c[ur]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=y_(i);i!==null;){if(c=i[ur])return c;i=y_(i)}return o}i=c,c=i.parentNode}return null}function eo(i){return i=i[ur]||i[Tr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ei(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function ol(i){return i[Qa]||null}var Af=[],Ti=-1;function Xr(i){return{current:i}}function Je(i){0>Ti||(i.current=Af[Ti],Af[Ti]=null,Ti--)}function Ge(i,o){Ti++,Af[Ti]=i.current,i.current=o}var Yr={},jt=Xr(Yr),Qt=Xr(!1),$s=Yr;function Ai(i,o){var c=i.type.contextTypes;if(!c)return Yr;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===o)return p.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in c)g[_]=o[_];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function en(i){return i=i.childContextTypes,i!=null}function ul(){Je(Qt),Je(jt)}function v_(i,o,c){if(jt.current!==Yr)throw Error(t(168));Ge(jt,o),Ge(Qt,c)}function __(i,o,c){var p=i.stateNode;if(o=o.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var g in p)if(!(g in o))throw Error(t(108,je(i)||"Unknown",g));return V({},c,p)}function ll(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Yr,$s=jt.current,Ge(jt,i),Ge(Qt,Qt.current),!0}function w_(i,o,c){var p=i.stateNode;if(!p)throw Error(t(169));c?(i=__(i,o,$s),p.__reactInternalMemoizedMergedChildContext=i,Je(Qt),Je(jt),Ge(jt,i)):Je(Qt),Ge(Qt,c)}var Ar=null,cl=!1,Pf=!1;function b_(i){Ar===null?Ar=[i]:Ar.push(i)}function aC(i){cl=!0,b_(i)}function Qr(){if(!Pf&&Ar!==null){Pf=!0;var i=0,o=Be;try{var c=Ar;for(Be=1;i<c.length;i++){var p=c[i];do p=p(!0);while(p!==null)}Ar=null,cl=!1}catch(g){throw Ar!==null&&(Ar=Ar.slice(i+1)),Sv(Gd,Qr),g}finally{Be=o,Pf=!1}}return null}var Pi=[],Ci=0,dl=null,fl=0,Sn=[],En=0,Ms=null,Pr=1,Cr="";function Ds(i,o){Pi[Ci++]=fl,Pi[Ci++]=dl,dl=i,fl=o}function x_(i,o,c){Sn[En++]=Pr,Sn[En++]=Cr,Sn[En++]=Ms,Ms=i;var p=Pr;i=Cr;var g=32-jn(p)-1;p&=~(1<<g),c+=1;var _=32-jn(o)+g;if(30<_){var x=g-g%5;_=(p&(1<<x)-1).toString(32),p>>=x,g-=x,Pr=1<<32-jn(o)+g|c<<g|p,Cr=_+i}else Pr=1<<_|c<<g|p,Cr=i}function Cf(i){i.return!==null&&(Ds(i,1),x_(i,1,0))}function kf(i){for(;i===dl;)dl=Pi[--Ci],Pi[Ci]=null,fl=Pi[--Ci],Pi[Ci]=null;for(;i===Ms;)Ms=Sn[--En],Sn[En]=null,Cr=Sn[--En],Sn[En]=null,Pr=Sn[--En],Sn[En]=null}var fn=null,hn=null,Xe=!1,$n=null;function S_(i,o){var c=Cn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function E_(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,fn=i,hn=Jr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,fn=i,hn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Ms!==null?{id:Pr,overflow:Cr}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=Cn(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,fn=i,hn=null,!0):!1;default:return!1}}function Of(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Rf(i){if(Xe){var o=hn;if(o){var c=o;if(!E_(i,o)){if(Of(i))throw Error(t(418));o=Jr(c.nextSibling);var p=fn;o&&E_(i,o)?S_(p,c):(i.flags=i.flags&-4097|2,Xe=!1,fn=i)}}else{if(Of(i))throw Error(t(418));i.flags=i.flags&-4097|2,Xe=!1,fn=i}}}function T_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;fn=i}function hl(i){if(i!==fn)return!1;if(!Xe)return T_(i),Xe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!xf(i.type,i.memoizedProps)),o&&(o=hn)){if(Of(i))throw A_(),Error(t(418));for(;o;)S_(i,o),o=Jr(o.nextSibling)}if(T_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){hn=Jr(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}hn=null}}else hn=fn?Jr(i.stateNode.nextSibling):null;return!0}function A_(){for(var i=hn;i;)i=Jr(i.nextSibling)}function ki(){hn=fn=null,Xe=!1}function If(i){$n===null?$n=[i]:$n.push(i)}var oC=R.ReactCurrentBatchConfig;function to(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,i));var g=p,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(x){var P=g.refs;x===null?delete P[_]:P[_]=x},o._stringRef=_,o)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function pl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function P_(i){var o=i._init;return o(i._payload)}function C_(i){function o(N,O){if(i){var j=N.deletions;j===null?(N.deletions=[O],N.flags|=16):j.push(O)}}function c(N,O){if(!i)return null;for(;O!==null;)o(N,O),O=O.sibling;return null}function p(N,O){for(N=new Map;O!==null;)O.key!==null?N.set(O.key,O):N.set(O.index,O),O=O.sibling;return N}function g(N,O){return N=os(N,O),N.index=0,N.sibling=null,N}function _(N,O,j){return N.index=j,i?(j=N.alternate,j!==null?(j=j.index,j<O?(N.flags|=2,O):j):(N.flags|=2,O)):(N.flags|=1048576,O)}function x(N){return i&&N.alternate===null&&(N.flags|=2),N}function P(N,O,j,X){return O===null||O.tag!==6?(O=Sh(j,N.mode,X),O.return=N,O):(O=g(O,j),O.return=N,O)}function C(N,O,j,X){var le=j.type;return le===B?W(N,O,j.props.children,X,j.key):O!==null&&(O.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===te&&P_(le)===O.type)?(X=g(O,j.props),X.ref=to(N,O,j),X.return=N,X):(X=Dl(j.type,j.key,j.props,null,N.mode,X),X.ref=to(N,O,j),X.return=N,X)}function L(N,O,j,X){return O===null||O.tag!==4||O.stateNode.containerInfo!==j.containerInfo||O.stateNode.implementation!==j.implementation?(O=Eh(j,N.mode,X),O.return=N,O):(O=g(O,j.children||[]),O.return=N,O)}function W(N,O,j,X,le){return O===null||O.tag!==7?(O=Ws(j,N.mode,X,le),O.return=N,O):(O=g(O,j),O.return=N,O)}function G(N,O,j){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Sh(""+O,N.mode,j),O.return=N,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case I:return j=Dl(O.type,O.key,O.props,null,N.mode,j),j.ref=to(N,null,O),j.return=N,j;case M:return O=Eh(O,N.mode,j),O.return=N,O;case te:var X=O._init;return G(N,X(O._payload),j)}if(Oa(O)||z(O))return O=Ws(O,N.mode,j,null),O.return=N,O;pl(N,O)}return null}function q(N,O,j,X){var le=O!==null?O.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return le!==null?null:P(N,O,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return j.key===le?C(N,O,j,X):null;case M:return j.key===le?L(N,O,j,X):null;case te:return le=j._init,q(N,O,le(j._payload),X)}if(Oa(j)||z(j))return le!==null?null:W(N,O,j,X,null);pl(N,j)}return null}function ee(N,O,j,X,le){if(typeof X=="string"&&X!==""||typeof X=="number")return N=N.get(j)||null,P(O,N,""+X,le);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case I:return N=N.get(X.key===null?j:X.key)||null,C(O,N,X,le);case M:return N=N.get(X.key===null?j:X.key)||null,L(O,N,X,le);case te:var ge=X._init;return ee(N,O,j,ge(X._payload),le)}if(Oa(X)||z(X))return N=N.get(j)||null,W(O,N,X,le,null);pl(O,X)}return null}function ae(N,O,j,X){for(var le=null,ge=null,ye=O,xe=O=0,bt=null;ye!==null&&xe<j.length;xe++){ye.index>xe?(bt=ye,ye=null):bt=ye.sibling;var Me=q(N,ye,j[xe],X);if(Me===null){ye===null&&(ye=bt);break}i&&ye&&Me.alternate===null&&o(N,ye),O=_(Me,O,xe),ge===null?le=Me:ge.sibling=Me,ge=Me,ye=bt}if(xe===j.length)return c(N,ye),Xe&&Ds(N,xe),le;if(ye===null){for(;xe<j.length;xe++)ye=G(N,j[xe],X),ye!==null&&(O=_(ye,O,xe),ge===null?le=ye:ge.sibling=ye,ge=ye);return Xe&&Ds(N,xe),le}for(ye=p(N,ye);xe<j.length;xe++)bt=ee(ye,N,xe,j[xe],X),bt!==null&&(i&&bt.alternate!==null&&ye.delete(bt.key===null?xe:bt.key),O=_(bt,O,xe),ge===null?le=bt:ge.sibling=bt,ge=bt);return i&&ye.forEach(function(us){return o(N,us)}),Xe&&Ds(N,xe),le}function ue(N,O,j,X){var le=z(j);if(typeof le!="function")throw Error(t(150));if(j=le.call(j),j==null)throw Error(t(151));for(var ge=le=null,ye=O,xe=O=0,bt=null,Me=j.next();ye!==null&&!Me.done;xe++,Me=j.next()){ye.index>xe?(bt=ye,ye=null):bt=ye.sibling;var us=q(N,ye,Me.value,X);if(us===null){ye===null&&(ye=bt);break}i&&ye&&us.alternate===null&&o(N,ye),O=_(us,O,xe),ge===null?le=us:ge.sibling=us,ge=us,ye=bt}if(Me.done)return c(N,ye),Xe&&Ds(N,xe),le;if(ye===null){for(;!Me.done;xe++,Me=j.next())Me=G(N,Me.value,X),Me!==null&&(O=_(Me,O,xe),ge===null?le=Me:ge.sibling=Me,ge=Me);return Xe&&Ds(N,xe),le}for(ye=p(N,ye);!Me.done;xe++,Me=j.next())Me=ee(ye,N,xe,Me.value,X),Me!==null&&(i&&Me.alternate!==null&&ye.delete(Me.key===null?xe:Me.key),O=_(Me,O,xe),ge===null?le=Me:ge.sibling=Me,ge=Me);return i&&ye.forEach(function(UC){return o(N,UC)}),Xe&&Ds(N,xe),le}function ct(N,O,j,X){if(typeof j=="object"&&j!==null&&j.type===B&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case I:e:{for(var le=j.key,ge=O;ge!==null;){if(ge.key===le){if(le=j.type,le===B){if(ge.tag===7){c(N,ge.sibling),O=g(ge,j.props.children),O.return=N,N=O;break e}}else if(ge.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===te&&P_(le)===ge.type){c(N,ge.sibling),O=g(ge,j.props),O.ref=to(N,ge,j),O.return=N,N=O;break e}c(N,ge);break}else o(N,ge);ge=ge.sibling}j.type===B?(O=Ws(j.props.children,N.mode,X,j.key),O.return=N,N=O):(X=Dl(j.type,j.key,j.props,null,N.mode,X),X.ref=to(N,O,j),X.return=N,N=X)}return x(N);case M:e:{for(ge=j.key;O!==null;){if(O.key===ge)if(O.tag===4&&O.stateNode.containerInfo===j.containerInfo&&O.stateNode.implementation===j.implementation){c(N,O.sibling),O=g(O,j.children||[]),O.return=N,N=O;break e}else{c(N,O);break}else o(N,O);O=O.sibling}O=Eh(j,N.mode,X),O.return=N,N=O}return x(N);case te:return ge=j._init,ct(N,O,ge(j._payload),X)}if(Oa(j))return ae(N,O,j,X);if(z(j))return ue(N,O,j,X);pl(N,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,O!==null&&O.tag===6?(c(N,O.sibling),O=g(O,j),O.return=N,N=O):(c(N,O),O=Sh(j,N.mode,X),O.return=N,N=O),x(N)):c(N,O)}return ct}var Oi=C_(!0),k_=C_(!1),ml=Xr(null),gl=null,Ri=null,Nf=null;function jf(){Nf=Ri=gl=null}function Lf(i){var o=ml.current;Je(ml),i._currentValue=o}function $f(i,o,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===c)break;i=i.return}}function Ii(i,o){gl=i,Nf=Ri=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(tn=!0),i.firstContext=null)}function Tn(i){var o=i._currentValue;if(Nf!==i)if(i={context:i,memoizedValue:o,next:null},Ri===null){if(gl===null)throw Error(t(308));Ri=i,gl.dependencies={lanes:0,firstContext:i}}else Ri=Ri.next=i;return o}var Fs=null;function Mf(i){Fs===null?Fs=[i]:Fs.push(i)}function O_(i,o,c,p){var g=o.interleaved;return g===null?(c.next=c,Mf(o)):(c.next=g.next,g.next=c),o.interleaved=c,kr(i,p)}function kr(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var es=!1;function Df(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Or(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function ts(i,o,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Le&2)!==0){var g=p.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),p.pending=o,kr(i,c)}return g=p.interleaved,g===null?(o.next=o,Mf(p)):(o.next=g.next,g.next=o),p.interleaved=o,kr(i,c)}function yl(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var p=o.lanes;p&=i.pendingLanes,c|=p,o.lanes=c,Xd(i,c)}}function I_(i,o){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var g=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var x={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};_===null?g=_=x:_=_.next=x,c=c.next}while(c!==null);_===null?g=_=o:_=_.next=o}else g=_=o;c={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:p.shared,effects:p.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function vl(i,o,c,p){var g=i.updateQueue;es=!1;var _=g.firstBaseUpdate,x=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var C=P,L=C.next;C.next=null,x===null?_=L:x.next=L,x=C;var W=i.alternate;W!==null&&(W=W.updateQueue,P=W.lastBaseUpdate,P!==x&&(P===null?W.firstBaseUpdate=L:P.next=L,W.lastBaseUpdate=C))}if(_!==null){var G=g.baseState;x=0,W=L=C=null,P=_;do{var q=P.lane,ee=P.eventTime;if((p&q)===q){W!==null&&(W=W.next={eventTime:ee,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ae=i,ue=P;switch(q=o,ee=c,ue.tag){case 1:if(ae=ue.payload,typeof ae=="function"){G=ae.call(ee,G,q);break e}G=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ue.payload,q=typeof ae=="function"?ae.call(ee,G,q):ae,q==null)break e;G=V({},G,q);break e;case 2:es=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,q=g.effects,q===null?g.effects=[P]:q.push(P))}else ee={eventTime:ee,lane:q,tag:P.tag,payload:P.payload,callback:P.callback,next:null},W===null?(L=W=ee,C=G):W=W.next=ee,x|=q;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;q=P,P=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);if(W===null&&(C=G),g.baseState=C,g.firstBaseUpdate=L,g.lastBaseUpdate=W,o=g.shared.interleaved,o!==null){g=o;do x|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);Vs|=x,i.lanes=x,i.memoizedState=G}}function N_(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var p=i[o],g=p.callback;if(g!==null){if(p.callback=null,p=c,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var no={},lr=Xr(no),ro=Xr(no),so=Xr(no);function Us(i){if(i===no)throw Error(t(174));return i}function Ff(i,o){switch(Ge(so,o),Ge(ro,i),Ge(lr,no),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Fd(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Fd(o,i)}Je(lr),Ge(lr,o)}function Ni(){Je(lr),Je(ro),Je(so)}function j_(i){Us(so.current);var o=Us(lr.current),c=Fd(o,i.type);o!==c&&(Ge(ro,i),Ge(lr,c))}function Uf(i){ro.current===i&&(Je(lr),Je(ro))}var et=Xr(0);function _l(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Bf=[];function Vf(){for(var i=0;i<Bf.length;i++)Bf[i]._workInProgressVersionPrimary=null;Bf.length=0}var wl=R.ReactCurrentDispatcher,zf=R.ReactCurrentBatchConfig,Bs=0,tt=null,pt=null,_t=null,bl=!1,io=!1,ao=0,uC=0;function Lt(){throw Error(t(321))}function Hf(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Ln(i[c],o[c]))return!1;return!0}function qf(i,o,c,p,g,_){if(Bs=_,tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,wl.current=i===null||i.memoizedState===null?fC:hC,i=c(p,g),io){_=0;do{if(io=!1,ao=0,25<=_)throw Error(t(301));_+=1,_t=pt=null,o.updateQueue=null,wl.current=pC,i=c(p,g)}while(io)}if(wl.current=El,o=pt!==null&&pt.next!==null,Bs=0,_t=pt=tt=null,bl=!1,o)throw Error(t(300));return i}function Wf(){var i=ao!==0;return ao=0,i}function cr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?tt.memoizedState=_t=i:_t=_t.next=i,_t}function An(){if(pt===null){var i=tt.alternate;i=i!==null?i.memoizedState:null}else i=pt.next;var o=_t===null?tt.memoizedState:_t.next;if(o!==null)_t=o,pt=i;else{if(i===null)throw Error(t(310));pt=i,i={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?tt.memoizedState=_t=i:_t=_t.next=i}return _t}function oo(i,o){return typeof o=="function"?o(i):o}function Zf(i){var o=An(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=pt,g=p.baseQueue,_=c.pending;if(_!==null){if(g!==null){var x=g.next;g.next=_.next,_.next=x}p.baseQueue=g=_,c.pending=null}if(g!==null){_=g.next,p=p.baseState;var P=x=null,C=null,L=_;do{var W=L.lane;if((Bs&W)===W)C!==null&&(C=C.next={lane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),p=L.hasEagerState?L.eagerState:i(p,L.action);else{var G={lane:W,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null};C===null?(P=C=G,x=p):C=C.next=G,tt.lanes|=W,Vs|=W}L=L.next}while(L!==null&&L!==_);C===null?x=p:C.next=P,Ln(p,o.memoizedState)||(tn=!0),o.memoizedState=p,o.baseState=x,o.baseQueue=C,c.lastRenderedState=p}if(i=c.interleaved,i!==null){g=i;do _=g.lane,tt.lanes|=_,Vs|=_,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Gf(i){var o=An(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=c.dispatch,g=c.pending,_=o.memoizedState;if(g!==null){c.pending=null;var x=g=g.next;do _=i(_,x.action),x=x.next;while(x!==g);Ln(_,o.memoizedState)||(tn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,p]}function L_(){}function $_(i,o){var c=tt,p=An(),g=o(),_=!Ln(p.memoizedState,g);if(_&&(p.memoizedState=g,tn=!0),p=p.queue,Kf(F_.bind(null,c,p,i),[i]),p.getSnapshot!==o||_||_t!==null&&_t.memoizedState.tag&1){if(c.flags|=2048,uo(9,D_.bind(null,c,p,g,o),void 0,null),wt===null)throw Error(t(349));(Bs&30)!==0||M_(c,o,g)}return g}function M_(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function D_(i,o,c,p){o.value=c,o.getSnapshot=p,U_(o)&&B_(i)}function F_(i,o,c){return c(function(){U_(o)&&B_(i)})}function U_(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Ln(i,c)}catch{return!0}}function B_(i){var o=kr(i,1);o!==null&&Un(o,i,1,-1)}function V_(i){var o=cr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:i},o.queue=i,i=i.dispatch=dC.bind(null,tt,i),[o.memoizedState,i]}function uo(i,o,c,p){return i={tag:i,create:o,destroy:c,deps:p,next:null},o=tt.updateQueue,o===null?(o={lastEffect:null,stores:null},tt.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,o.lastEffect=i)),i}function z_(){return An().memoizedState}function xl(i,o,c,p){var g=cr();tt.flags|=i,g.memoizedState=uo(1|o,c,void 0,p===void 0?null:p)}function Sl(i,o,c,p){var g=An();p=p===void 0?null:p;var _=void 0;if(pt!==null){var x=pt.memoizedState;if(_=x.destroy,p!==null&&Hf(p,x.deps)){g.memoizedState=uo(o,c,_,p);return}}tt.flags|=i,g.memoizedState=uo(1|o,c,_,p)}function H_(i,o){return xl(8390656,8,i,o)}function Kf(i,o){return Sl(2048,8,i,o)}function q_(i,o){return Sl(4,2,i,o)}function W_(i,o){return Sl(4,4,i,o)}function Z_(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function G_(i,o,c){return c=c!=null?c.concat([i]):null,Sl(4,4,Z_.bind(null,o,i),c)}function Jf(){}function K_(i,o){var c=An();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&Hf(o,p[1])?p[0]:(c.memoizedState=[i,o],i)}function J_(i,o){var c=An();o=o===void 0?null:o;var p=c.memoizedState;return p!==null&&o!==null&&Hf(o,p[1])?p[0]:(i=i(),c.memoizedState=[i,o],i)}function X_(i,o,c){return(Bs&21)===0?(i.baseState&&(i.baseState=!1,tn=!0),i.memoizedState=c):(Ln(c,o)||(c=Pv(),tt.lanes|=c,Vs|=c,i.baseState=!0),o)}function lC(i,o){var c=Be;Be=c!==0&&4>c?c:4,i(!0);var p=zf.transition;zf.transition={};try{i(!1),o()}finally{Be=c,zf.transition=p}}function Y_(){return An().memoizedState}function cC(i,o,c){var p=is(i);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},Q_(i))ew(o,c);else if(c=O_(i,o,c,p),c!==null){var g=qt();Un(c,i,p,g),tw(c,o,p)}}function dC(i,o,c){var p=is(i),g={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(Q_(i))ew(o,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var x=o.lastRenderedState,P=_(x,c);if(g.hasEagerState=!0,g.eagerState=P,Ln(P,x)){var C=o.interleaved;C===null?(g.next=g,Mf(o)):(g.next=C.next,C.next=g),o.interleaved=g;return}}catch{}finally{}c=O_(i,o,g,p),c!==null&&(g=qt(),Un(c,i,p,g),tw(c,o,p))}}function Q_(i){var o=i.alternate;return i===tt||o!==null&&o===tt}function ew(i,o){io=bl=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function tw(i,o,c){if((c&4194240)!==0){var p=o.lanes;p&=i.pendingLanes,c|=p,o.lanes=c,Xd(i,c)}}var El={readContext:Tn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},fC={readContext:Tn,useCallback:function(i,o){return cr().memoizedState=[i,o===void 0?null:o],i},useContext:Tn,useEffect:H_,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,xl(4194308,4,Z_.bind(null,o,i),c)},useLayoutEffect:function(i,o){return xl(4194308,4,i,o)},useInsertionEffect:function(i,o){return xl(4,2,i,o)},useMemo:function(i,o){var c=cr();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var p=cr();return o=c!==void 0?c(o):o,p.memoizedState=p.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},p.queue=i,i=i.dispatch=cC.bind(null,tt,i),[p.memoizedState,i]},useRef:function(i){var o=cr();return i={current:i},o.memoizedState=i},useState:V_,useDebugValue:Jf,useDeferredValue:function(i){return cr().memoizedState=i},useTransition:function(){var i=V_(!1),o=i[0];return i=lC.bind(null,i[1]),cr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var p=tt,g=cr();if(Xe){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),wt===null)throw Error(t(349));(Bs&30)!==0||M_(p,o,c)}g.memoizedState=c;var _={value:c,getSnapshot:o};return g.queue=_,H_(F_.bind(null,p,_,i),[i]),p.flags|=2048,uo(9,D_.bind(null,p,_,c,o),void 0,null),c},useId:function(){var i=cr(),o=wt.identifierPrefix;if(Xe){var c=Cr,p=Pr;c=(p&~(1<<32-jn(p)-1)).toString(32)+c,o=":"+o+"R"+c,c=ao++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=uC++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},hC={readContext:Tn,useCallback:K_,useContext:Tn,useEffect:Kf,useImperativeHandle:G_,useInsertionEffect:q_,useLayoutEffect:W_,useMemo:J_,useReducer:Zf,useRef:z_,useState:function(){return Zf(oo)},useDebugValue:Jf,useDeferredValue:function(i){var o=An();return X_(o,pt.memoizedState,i)},useTransition:function(){var i=Zf(oo)[0],o=An().memoizedState;return[i,o]},useMutableSource:L_,useSyncExternalStore:$_,useId:Y_,unstable_isNewReconciler:!1},pC={readContext:Tn,useCallback:K_,useContext:Tn,useEffect:Kf,useImperativeHandle:G_,useInsertionEffect:q_,useLayoutEffect:W_,useMemo:J_,useReducer:Gf,useRef:z_,useState:function(){return Gf(oo)},useDebugValue:Jf,useDeferredValue:function(i){var o=An();return pt===null?o.memoizedState=i:X_(o,pt.memoizedState,i)},useTransition:function(){var i=Gf(oo)[0],o=An().memoizedState;return[i,o]},useMutableSource:L_,useSyncExternalStore:$_,useId:Y_,unstable_isNewReconciler:!1};function Mn(i,o){if(i&&i.defaultProps){o=V({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function Xf(i,o,c,p){o=i.memoizedState,c=c(p,o),c=c==null?o:V({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Tl={isMounted:function(i){return(i=i._reactInternals)?js(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var p=qt(),g=is(i),_=Or(p,g);_.payload=o,c!=null&&(_.callback=c),o=ts(i,_,g),o!==null&&(Un(o,i,g,p),yl(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var p=qt(),g=is(i),_=Or(p,g);_.tag=1,_.payload=o,c!=null&&(_.callback=c),o=ts(i,_,g),o!==null&&(Un(o,i,g,p),yl(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=qt(),p=is(i),g=Or(c,p);g.tag=2,o!=null&&(g.callback=o),o=ts(i,g,p),o!==null&&(Un(o,i,p,c),yl(o,i,p))}};function nw(i,o,c,p,g,_,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,_,x):o.prototype&&o.prototype.isPureReactComponent?!Ga(c,p)||!Ga(g,_):!0}function rw(i,o,c){var p=!1,g=Yr,_=o.contextType;return typeof _=="object"&&_!==null?_=Tn(_):(g=en(o)?$s:jt.current,p=o.contextTypes,_=(p=p!=null)?Ai(i,g):Yr),o=new o(c,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Tl,i.stateNode=o,o._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),o}function sw(i,o,c,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,p),o.state!==i&&Tl.enqueueReplaceState(o,o.state,null)}function Yf(i,o,c,p){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},Df(i);var _=o.contextType;typeof _=="object"&&_!==null?g.context=Tn(_):(_=en(o)?$s:jt.current,g.context=Ai(i,_)),g.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Xf(i,o,_,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Tl.enqueueReplaceState(g,g.state,null),vl(i,c,g,p),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ji(i,o){try{var c="",p=o;do c+=pe(p),p=p.return;while(p);var g=c}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:g,digest:null}}function Qf(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function eh(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var mC=typeof WeakMap=="function"?WeakMap:Map;function iw(i,o,c){c=Or(-1,c),c.tag=3,c.payload={element:null};var p=o.value;return c.callback=function(){Il||(Il=!0,mh=p),eh(i,o)},c}function aw(i,o,c){c=Or(-1,c),c.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=o.value;c.payload=function(){return p(g)},c.callback=function(){eh(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(c.callback=function(){eh(i,o),typeof p!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var x=o.stack;this.componentDidCatch(o.value,{componentStack:x!==null?x:""})}),c}function ow(i,o,c){var p=i.pingCache;if(p===null){p=i.pingCache=new mC;var g=new Set;p.set(o,g)}else g=p.get(o),g===void 0&&(g=new Set,p.set(o,g));g.has(c)||(g.add(c),i=kC.bind(null,i,o,c),o.then(i,i))}function uw(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function lw(i,o,c,p,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Or(-1,1),o.tag=2,ts(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var gC=R.ReactCurrentOwner,tn=!1;function Ht(i,o,c,p){o.child=i===null?k_(o,null,c,p):Oi(o,i.child,c,p)}function cw(i,o,c,p,g){c=c.render;var _=o.ref;return Ii(o,g),p=qf(i,o,c,p,_,g),c=Wf(),i!==null&&!tn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Rr(i,o,g)):(Xe&&c&&Cf(o),o.flags|=1,Ht(i,o,p,g),o.child)}function dw(i,o,c,p,g){if(i===null){var _=c.type;return typeof _=="function"&&!xh(_)&&_.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=_,fw(i,o,_,p,g)):(i=Dl(c.type,null,p,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,(i.lanes&g)===0){var x=_.memoizedProps;if(c=c.compare,c=c!==null?c:Ga,c(x,p)&&i.ref===o.ref)return Rr(i,o,g)}return o.flags|=1,i=os(_,p),i.ref=o.ref,i.return=o,o.child=i}function fw(i,o,c,p,g){if(i!==null){var _=i.memoizedProps;if(Ga(_,p)&&i.ref===o.ref)if(tn=!1,o.pendingProps=p=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(tn=!0);else return o.lanes=i.lanes,Rr(i,o,g)}return th(i,o,c,p,g)}function hw(i,o,c){var p=o.pendingProps,g=p.children,_=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge($i,pn),pn|=c;else{if((c&1073741824)===0)return i=_!==null?_.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ge($i,pn),pn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=_!==null?_.baseLanes:c,Ge($i,pn),pn|=p}else _!==null?(p=_.baseLanes|c,o.memoizedState=null):p=c,Ge($i,pn),pn|=p;return Ht(i,o,g,c),o.child}function pw(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function th(i,o,c,p,g){var _=en(c)?$s:jt.current;return _=Ai(o,_),Ii(o,g),c=qf(i,o,c,p,_,g),p=Wf(),i!==null&&!tn?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Rr(i,o,g)):(Xe&&p&&Cf(o),o.flags|=1,Ht(i,o,c,g),o.child)}function mw(i,o,c,p,g){if(en(c)){var _=!0;ll(o)}else _=!1;if(Ii(o,g),o.stateNode===null)Pl(i,o),rw(o,c,p),Yf(o,c,p,g),p=!0;else if(i===null){var x=o.stateNode,P=o.memoizedProps;x.props=P;var C=x.context,L=c.contextType;typeof L=="object"&&L!==null?L=Tn(L):(L=en(c)?$s:jt.current,L=Ai(o,L));var W=c.getDerivedStateFromProps,G=typeof W=="function"||typeof x.getSnapshotBeforeUpdate=="function";G||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==p||C!==L)&&sw(o,x,p,L),es=!1;var q=o.memoizedState;x.state=q,vl(o,p,x,g),C=o.memoizedState,P!==p||q!==C||Qt.current||es?(typeof W=="function"&&(Xf(o,c,W,p),C=o.memoizedState),(P=es||nw(o,c,P,p,q,C,L))?(G||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=C),x.props=p,x.state=C,x.context=L,p=P):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{x=o.stateNode,R_(i,o),P=o.memoizedProps,L=o.type===o.elementType?P:Mn(o.type,P),x.props=L,G=o.pendingProps,q=x.context,C=c.contextType,typeof C=="object"&&C!==null?C=Tn(C):(C=en(c)?$s:jt.current,C=Ai(o,C));var ee=c.getDerivedStateFromProps;(W=typeof ee=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P!==G||q!==C)&&sw(o,x,p,C),es=!1,q=o.memoizedState,x.state=q,vl(o,p,x,g);var ae=o.memoizedState;P!==G||q!==ae||Qt.current||es?(typeof ee=="function"&&(Xf(o,c,ee,p),ae=o.memoizedState),(L=es||nw(o,c,L,p,q,ae,C)||!1)?(W||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ae,C),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ae,C)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||P===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ae),x.props=p,x.state=ae,x.context=C,p=L):(typeof x.componentDidUpdate!="function"||P===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),p=!1)}return nh(i,o,c,p,_,g)}function nh(i,o,c,p,g,_){pw(i,o);var x=(o.flags&128)!==0;if(!p&&!x)return g&&w_(o,c,!1),Rr(i,o,_);p=o.stateNode,gC.current=o;var P=x&&typeof c.getDerivedStateFromError!="function"?null:p.render();return o.flags|=1,i!==null&&x?(o.child=Oi(o,i.child,null,_),o.child=Oi(o,null,P,_)):Ht(i,o,P,_),o.memoizedState=p.state,g&&w_(o,c,!0),o.child}function gw(i){var o=i.stateNode;o.pendingContext?v_(i,o.pendingContext,o.pendingContext!==o.context):o.context&&v_(i,o.context,!1),Ff(i,o.containerInfo)}function yw(i,o,c,p,g){return ki(),If(g),o.flags|=256,Ht(i,o,c,p),o.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function sh(i){return{baseLanes:i,cachePool:null,transitions:null}}function vw(i,o,c){var p=o.pendingProps,g=et.current,_=!1,x=(o.flags&128)!==0,P;if((P=x)||(P=i!==null&&i.memoizedState===null?!1:(g&2)!==0),P?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Ge(et,g&1),i===null)return Rf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(x=p.children,i=p.fallback,_?(p=o.mode,_=o.child,x={mode:"hidden",children:x},(p&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=x):_=Fl(x,p,0,null),i=Ws(i,p,c,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=sh(c),o.memoizedState=rh,i):ih(o,x));if(g=i.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return yC(i,o,x,p,P,g,c);if(_){_=p.fallback,x=o.mode,g=i.child,P=g.sibling;var C={mode:"hidden",children:p.children};return(x&1)===0&&o.child!==g?(p=o.child,p.childLanes=0,p.pendingProps=C,o.deletions=null):(p=os(g,C),p.subtreeFlags=g.subtreeFlags&14680064),P!==null?_=os(P,_):(_=Ws(_,x,c,null),_.flags|=2),_.return=o,p.return=o,p.sibling=_,o.child=p,p=_,_=o.child,x=i.child.memoizedState,x=x===null?sh(c):{baseLanes:x.baseLanes|c,cachePool:null,transitions:x.transitions},_.memoizedState=x,_.childLanes=i.childLanes&~c,o.memoizedState=rh,p}return _=i.child,i=_.sibling,p=os(_,{mode:"visible",children:p.children}),(o.mode&1)===0&&(p.lanes=c),p.return=o,p.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=p,o.memoizedState=null,p}function ih(i,o){return o=Fl({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Al(i,o,c,p){return p!==null&&If(p),Oi(o,i.child,null,c),i=ih(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function yC(i,o,c,p,g,_,x){if(c)return o.flags&256?(o.flags&=-257,p=Qf(Error(t(422))),Al(i,o,x,p)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=p.fallback,g=o.mode,p=Fl({mode:"visible",children:p.children},g,0,null),_=Ws(_,g,x,null),_.flags|=2,p.return=o,_.return=o,p.sibling=_,o.child=p,(o.mode&1)!==0&&Oi(o,i.child,null,x),o.child.memoizedState=sh(x),o.memoizedState=rh,_);if((o.mode&1)===0)return Al(i,o,x,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var P=p.dgst;return p=P,_=Error(t(419)),p=Qf(_,p,void 0),Al(i,o,x,p)}if(P=(x&i.childLanes)!==0,tn||P){if(p=wt,p!==null){switch(x&-x){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|x))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,kr(i,g),Un(p,i,g,-1))}return bh(),p=Qf(Error(t(421))),Al(i,o,x,p)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=OC.bind(null,i),g._reactRetry=o,null):(i=_.treeContext,hn=Jr(g.nextSibling),fn=o,Xe=!0,$n=null,i!==null&&(Sn[En++]=Pr,Sn[En++]=Cr,Sn[En++]=Ms,Pr=i.id,Cr=i.overflow,Ms=o),o=ih(o,p.children),o.flags|=4096,o)}function _w(i,o,c){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),$f(i.return,o,c)}function ah(i,o,c,p,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=p,_.tail=c,_.tailMode=g)}function ww(i,o,c){var p=o.pendingProps,g=p.revealOrder,_=p.tail;if(Ht(i,o,p.children,c),p=et.current,(p&2)!==0)p=p&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_w(i,c,o);else if(i.tag===19)_w(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ge(et,p),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&_l(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),ah(o,!1,g,c,_);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&_l(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}ah(o,!0,c,null,_);break;case"together":ah(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Pl(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Rr(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Vs|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,c=os(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=os(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function vC(i,o,c){switch(o.tag){case 3:gw(o),ki();break;case 5:j_(o);break;case 1:en(o.type)&&ll(o);break;case 4:Ff(o,o.stateNode.containerInfo);break;case 10:var p=o.type._context,g=o.memoizedProps.value;Ge(ml,p._currentValue),p._currentValue=g;break;case 13:if(p=o.memoizedState,p!==null)return p.dehydrated!==null?(Ge(et,et.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?vw(i,o,c):(Ge(et,et.current&1),i=Rr(i,o,c),i!==null?i.sibling:null);Ge(et,et.current&1);break;case 19:if(p=(c&o.childLanes)!==0,(i.flags&128)!==0){if(p)return ww(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ge(et,et.current),p)break;return null;case 22:case 23:return o.lanes=0,hw(i,o,c)}return Rr(i,o,c)}var bw,oh,xw,Sw;bw=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},oh=function(){},xw=function(i,o,c,p){var g=i.memoizedProps;if(g!==p){i=o.stateNode,Us(lr.current);var _=null;switch(c){case"input":g=Ld(i,g),p=Ld(i,p),_=[];break;case"select":g=V({},g,{value:void 0}),p=V({},p,{value:void 0}),_=[];break;case"textarea":g=Dd(i,g),p=Dd(i,p),_=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=al)}Ud(c,p);var x;c=null;for(L in g)if(!p.hasOwnProperty(L)&&g.hasOwnProperty(L)&&g[L]!=null)if(L==="style"){var P=g[L];for(x in P)P.hasOwnProperty(x)&&(c||(c={}),c[x]="")}else L!=="dangerouslySetInnerHTML"&&L!=="children"&&L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(s.hasOwnProperty(L)?_||(_=[]):(_=_||[]).push(L,null));for(L in p){var C=p[L];if(P=g!=null?g[L]:void 0,p.hasOwnProperty(L)&&C!==P&&(C!=null||P!=null))if(L==="style")if(P){for(x in P)!P.hasOwnProperty(x)||C&&C.hasOwnProperty(x)||(c||(c={}),c[x]="");for(x in C)C.hasOwnProperty(x)&&P[x]!==C[x]&&(c||(c={}),c[x]=C[x])}else c||(_||(_=[]),_.push(L,c)),c=C;else L==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,P=P?P.__html:void 0,C!=null&&P!==C&&(_=_||[]).push(L,C)):L==="children"?typeof C!="string"&&typeof C!="number"||(_=_||[]).push(L,""+C):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&(s.hasOwnProperty(L)?(C!=null&&L==="onScroll"&&Ke("scroll",i),_||P===C||(_=[])):(_=_||[]).push(L,C))}c&&(_=_||[]).push("style",c);var L=_;(o.updateQueue=L)&&(o.flags|=4)}},Sw=function(i,o,c,p){c!==p&&(o.flags|=4)};function lo(i,o){if(!Xe)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function $t(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=p,i.childLanes=c,o}function _C(i,o,c){var p=o.pendingProps;switch(kf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(o),null;case 1:return en(o.type)&&ul(),$t(o),null;case 3:return p=o.stateNode,Ni(),Je(Qt),Je(jt),Vf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(hl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$n!==null&&(vh($n),$n=null))),oh(i,o),$t(o),null;case 5:Uf(o);var g=Us(so.current);if(c=o.type,i!==null&&o.stateNode!=null)xw(i,o,c,p,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!p){if(o.stateNode===null)throw Error(t(166));return $t(o),null}if(i=Us(lr.current),hl(o)){p=o.stateNode,c=o.type;var _=o.memoizedProps;switch(p[ur]=o,p[Qa]=_,i=(o.mode&1)!==0,c){case"dialog":Ke("cancel",p),Ke("close",p);break;case"iframe":case"object":case"embed":Ke("load",p);break;case"video":case"audio":for(g=0;g<Ja.length;g++)Ke(Ja[g],p);break;case"source":Ke("error",p);break;case"img":case"image":case"link":Ke("error",p),Ke("load",p);break;case"details":Ke("toggle",p);break;case"input":rv(p,_),Ke("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!_.multiple},Ke("invalid",p);break;case"textarea":av(p,_),Ke("invalid",p)}Ud(c,_),g=null;for(var x in _)if(_.hasOwnProperty(x)){var P=_[x];x==="children"?typeof P=="string"?p.textContent!==P&&(_.suppressHydrationWarning!==!0&&il(p.textContent,P,i),g=["children",P]):typeof P=="number"&&p.textContent!==""+P&&(_.suppressHydrationWarning!==!0&&il(p.textContent,P,i),g=["children",""+P]):s.hasOwnProperty(x)&&P!=null&&x==="onScroll"&&Ke("scroll",p)}switch(c){case"input":hi(p),iv(p,_,!0);break;case"textarea":hi(p),uv(p);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(p.onclick=al)}p=g,o.updateQueue=p,p!==null&&(o.flags|=4)}else{x=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=lv(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=x.createElement(c,{is:p.is}):(i=x.createElement(c),c==="select"&&(x=i,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):i=x.createElementNS(i,c),i[ur]=o,i[Qa]=p,bw(i,o,!1,!1),o.stateNode=i;e:{switch(x=Bd(c,p),c){case"dialog":Ke("cancel",i),Ke("close",i),g=p;break;case"iframe":case"object":case"embed":Ke("load",i),g=p;break;case"video":case"audio":for(g=0;g<Ja.length;g++)Ke(Ja[g],i);g=p;break;case"source":Ke("error",i),g=p;break;case"img":case"image":case"link":Ke("error",i),Ke("load",i),g=p;break;case"details":Ke("toggle",i),g=p;break;case"input":rv(i,p),g=Ld(i,p),Ke("invalid",i);break;case"option":g=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},g=V({},p,{value:void 0}),Ke("invalid",i);break;case"textarea":av(i,p),g=Dd(i,p),Ke("invalid",i);break;default:g=p}Ud(c,g),P=g;for(_ in P)if(P.hasOwnProperty(_)){var C=P[_];_==="style"?fv(i,C):_==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&cv(i,C)):_==="children"?typeof C=="string"?(c!=="textarea"||C!=="")&&Ra(i,C):typeof C=="number"&&Ra(i,""+C):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?C!=null&&_==="onScroll"&&Ke("scroll",i):C!=null&&T(i,_,C,x))}switch(c){case"input":hi(i),iv(i,p,!1);break;case"textarea":hi(i),uv(i);break;case"option":p.value!=null&&i.setAttribute("value",""+$e(p.value));break;case"select":i.multiple=!!p.multiple,_=p.value,_!=null?pi(i,!!p.multiple,_,!1):p.defaultValue!=null&&pi(i,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=al)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $t(o),null;case 6:if(i&&o.stateNode!=null)Sw(i,o,i.memoizedProps,p);else{if(typeof p!="string"&&o.stateNode===null)throw Error(t(166));if(c=Us(so.current),Us(lr.current),hl(o)){if(p=o.stateNode,c=o.memoizedProps,p[ur]=o,(_=p.nodeValue!==c)&&(i=fn,i!==null))switch(i.tag){case 3:il(p.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&il(p.nodeValue,c,(i.mode&1)!==0)}_&&(o.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[ur]=o,o.stateNode=p}return $t(o),null;case 13:if(Je(et),p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xe&&hn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)A_(),ki(),o.flags|=98560,_=!1;else if(_=hl(o),p!==null&&p.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[ur]=o}else ki(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$t(o),_=!1}else $n!==null&&(vh($n),$n=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(et.current&1)!==0?mt===0&&(mt=3):bh())),o.updateQueue!==null&&(o.flags|=4),$t(o),null);case 4:return Ni(),oh(i,o),i===null&&Xa(o.stateNode.containerInfo),$t(o),null;case 10:return Lf(o.type._context),$t(o),null;case 17:return en(o.type)&&ul(),$t(o),null;case 19:if(Je(et),_=o.memoizedState,_===null)return $t(o),null;if(p=(o.flags&128)!==0,x=_.rendering,x===null)if(p)lo(_,!1);else{if(mt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(x=_l(i),x!==null){for(o.flags|=128,lo(_,!1),p=x.updateQueue,p!==null&&(o.updateQueue=p,o.flags|=4),o.subtreeFlags=0,p=c,c=o.child;c!==null;)_=c,i=p,_.flags&=14680066,x=_.alternate,x===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=x.childLanes,_.lanes=x.lanes,_.child=x.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=x.memoizedProps,_.memoizedState=x.memoizedState,_.updateQueue=x.updateQueue,_.type=x.type,i=x.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Ge(et,et.current&1|2),o.child}i=i.sibling}_.tail!==null&&lt()>Mi&&(o.flags|=128,p=!0,lo(_,!1),o.lanes=4194304)}else{if(!p)if(i=_l(x),i!==null){if(o.flags|=128,p=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),lo(_,!0),_.tail===null&&_.tailMode==="hidden"&&!x.alternate&&!Xe)return $t(o),null}else 2*lt()-_.renderingStartTime>Mi&&c!==1073741824&&(o.flags|=128,p=!0,lo(_,!1),o.lanes=4194304);_.isBackwards?(x.sibling=o.child,o.child=x):(c=_.last,c!==null?c.sibling=x:o.child=x,_.last=x)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=lt(),o.sibling=null,c=et.current,Ge(et,p?c&1|2:c&1),o):($t(o),null);case 22:case 23:return wh(),p=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(o.flags|=8192),p&&(o.mode&1)!==0?(pn&1073741824)!==0&&($t(o),o.subtreeFlags&6&&(o.flags|=8192)):$t(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function wC(i,o){switch(kf(o),o.tag){case 1:return en(o.type)&&ul(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ni(),Je(Qt),Je(jt),Vf(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Uf(o),null;case 13:if(Je(et),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ki()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Je(et),null;case 4:return Ni(),null;case 10:return Lf(o.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var Cl=!1,Mt=!1,bC=typeof WeakSet=="function"?WeakSet:Set,se=null;function Li(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){at(i,o,p)}else c.current=null}function uh(i,o,c){try{c()}catch(p){at(i,o,p)}}var Ew=!1;function xC(i,o){if(wf=Gu,i=n_(),ff(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var g=p.anchorOffset,_=p.focusNode;p=p.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var x=0,P=-1,C=-1,L=0,W=0,G=i,q=null;t:for(;;){for(var ee;G!==c||g!==0&&G.nodeType!==3||(P=x+g),G!==_||p!==0&&G.nodeType!==3||(C=x+p),G.nodeType===3&&(x+=G.nodeValue.length),(ee=G.firstChild)!==null;)q=G,G=ee;for(;;){if(G===i)break t;if(q===c&&++L===g&&(P=x),q===_&&++W===p&&(C=x),(ee=G.nextSibling)!==null)break;G=q,q=G.parentNode}G=ee}c=P===-1||C===-1?null:{start:P,end:C}}else c=null}c=c||{start:0,end:0}}else c=null;for(bf={focusedElem:i,selectionRange:c},Gu=!1,se=o;se!==null;)if(o=se,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,se=i;else for(;se!==null;){o=se;try{var ae=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ue=ae.memoizedProps,ct=ae.memoizedState,N=o.stateNode,O=N.getSnapshotBeforeUpdate(o.elementType===o.type?ue:Mn(o.type,ue),ct);N.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var j=o.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){at(o,o.return,X)}if(i=o.sibling,i!==null){i.return=o.return,se=i;break}se=o.return}return ae=Ew,Ew=!1,ae}function co(i,o,c){var p=o.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&uh(o,c,_)}g=g.next}while(g!==p)}}function kl(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var p=c.create;c.destroy=p()}c=c.next}while(c!==o)}}function lh(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function Tw(i){var o=i.alternate;o!==null&&(i.alternate=null,Tw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[ur],delete o[Qa],delete o[Tf],delete o[sC],delete o[iC])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Aw(i){return i.tag===5||i.tag===3||i.tag===4}function Pw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Aw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ch(i,o,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=al));else if(p!==4&&(i=i.child,i!==null))for(ch(i,o,c),i=i.sibling;i!==null;)ch(i,o,c),i=i.sibling}function dh(i,o,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(dh(i,o,c),i=i.sibling;i!==null;)dh(i,o,c),i=i.sibling}var Pt=null,Dn=!1;function ns(i,o,c){for(c=c.child;c!==null;)Cw(i,o,c),c=c.sibling}function Cw(i,o,c){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Vu,c)}catch{}switch(c.tag){case 5:Mt||Li(c,o);case 6:var p=Pt,g=Dn;Pt=null,ns(i,o,c),Pt=p,Dn=g,Pt!==null&&(Dn?(i=Pt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Pt.removeChild(c.stateNode));break;case 18:Pt!==null&&(Dn?(i=Pt,c=c.stateNode,i.nodeType===8?Ef(i.parentNode,c):i.nodeType===1&&Ef(i,c),Va(i)):Ef(Pt,c.stateNode));break;case 4:p=Pt,g=Dn,Pt=c.stateNode.containerInfo,Dn=!0,ns(i,o,c),Pt=p,Dn=g;break;case 0:case 11:case 14:case 15:if(!Mt&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var _=g,x=_.destroy;_=_.tag,x!==void 0&&((_&2)!==0||(_&4)!==0)&&uh(c,o,x),g=g.next}while(g!==p)}ns(i,o,c);break;case 1:if(!Mt&&(Li(c,o),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(P){at(c,o,P)}ns(i,o,c);break;case 21:ns(i,o,c);break;case 22:c.mode&1?(Mt=(p=Mt)||c.memoizedState!==null,ns(i,o,c),Mt=p):ns(i,o,c);break;default:ns(i,o,c)}}function kw(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new bC),o.forEach(function(p){var g=RC.bind(null,i,p);c.has(p)||(c.add(p),p.then(g,g))})}}function Fn(i,o){var c=o.deletions;if(c!==null)for(var p=0;p<c.length;p++){var g=c[p];try{var _=i,x=o,P=x;e:for(;P!==null;){switch(P.tag){case 5:Pt=P.stateNode,Dn=!1;break e;case 3:Pt=P.stateNode.containerInfo,Dn=!0;break e;case 4:Pt=P.stateNode.containerInfo,Dn=!0;break e}P=P.return}if(Pt===null)throw Error(t(160));Cw(_,x,g),Pt=null,Dn=!1;var C=g.alternate;C!==null&&(C.return=null),g.return=null}catch(L){at(g,o,L)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Ow(o,i),o=o.sibling}function Ow(i,o){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Fn(o,i),dr(i),p&4){try{co(3,i,i.return),kl(3,i)}catch(ue){at(i,i.return,ue)}try{co(5,i,i.return)}catch(ue){at(i,i.return,ue)}}break;case 1:Fn(o,i),dr(i),p&512&&c!==null&&Li(c,c.return);break;case 5:if(Fn(o,i),dr(i),p&512&&c!==null&&Li(c,c.return),i.flags&32){var g=i.stateNode;try{Ra(g,"")}catch(ue){at(i,i.return,ue)}}if(p&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,x=c!==null?c.memoizedProps:_,P=i.type,C=i.updateQueue;if(i.updateQueue=null,C!==null)try{P==="input"&&_.type==="radio"&&_.name!=null&&sv(g,_),Bd(P,x);var L=Bd(P,_);for(x=0;x<C.length;x+=2){var W=C[x],G=C[x+1];W==="style"?fv(g,G):W==="dangerouslySetInnerHTML"?cv(g,G):W==="children"?Ra(g,G):T(g,W,G,L)}switch(P){case"input":$d(g,_);break;case"textarea":ov(g,_);break;case"select":var q=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var ee=_.value;ee!=null?pi(g,!!_.multiple,ee,!1):q!==!!_.multiple&&(_.defaultValue!=null?pi(g,!!_.multiple,_.defaultValue,!0):pi(g,!!_.multiple,_.multiple?[]:"",!1))}g[Qa]=_}catch(ue){at(i,i.return,ue)}}break;case 6:if(Fn(o,i),dr(i),p&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(ue){at(i,i.return,ue)}}break;case 3:if(Fn(o,i),dr(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{Va(o.containerInfo)}catch(ue){at(i,i.return,ue)}break;case 4:Fn(o,i),dr(i);break;case 13:Fn(o,i),dr(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(ph=lt())),p&4&&kw(i);break;case 22:if(W=c!==null&&c.memoizedState!==null,i.mode&1?(Mt=(L=Mt)||W,Fn(o,i),Mt=L):Fn(o,i),dr(i),p&8192){if(L=i.memoizedState!==null,(i.stateNode.isHidden=L)&&!W&&(i.mode&1)!==0)for(se=i,W=i.child;W!==null;){for(G=se=W;se!==null;){switch(q=se,ee=q.child,q.tag){case 0:case 11:case 14:case 15:co(4,q,q.return);break;case 1:Li(q,q.return);var ae=q.stateNode;if(typeof ae.componentWillUnmount=="function"){p=q,c=q.return;try{o=p,ae.props=o.memoizedProps,ae.state=o.memoizedState,ae.componentWillUnmount()}catch(ue){at(p,c,ue)}}break;case 5:Li(q,q.return);break;case 22:if(q.memoizedState!==null){Nw(G);continue}}ee!==null?(ee.return=q,se=ee):Nw(G)}W=W.sibling}e:for(W=null,G=i;;){if(G.tag===5){if(W===null){W=G;try{g=G.stateNode,L?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(P=G.stateNode,C=G.memoizedProps.style,x=C!=null&&C.hasOwnProperty("display")?C.display:null,P.style.display=dv("display",x))}catch(ue){at(i,i.return,ue)}}}else if(G.tag===6){if(W===null)try{G.stateNode.nodeValue=L?"":G.memoizedProps}catch(ue){at(i,i.return,ue)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===i)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===i)break e;for(;G.sibling===null;){if(G.return===null||G.return===i)break e;W===G&&(W=null),G=G.return}W===G&&(W=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:Fn(o,i),dr(i),p&4&&kw(i);break;case 21:break;default:Fn(o,i),dr(i)}}function dr(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(Aw(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Ra(g,""),p.flags&=-33);var _=Pw(i);dh(i,_,g);break;case 3:case 4:var x=p.stateNode.containerInfo,P=Pw(i);ch(i,P,x);break;default:throw Error(t(161))}}catch(C){at(i,i.return,C)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function SC(i,o,c){se=i,Rw(i)}function Rw(i,o,c){for(var p=(i.mode&1)!==0;se!==null;){var g=se,_=g.child;if(g.tag===22&&p){var x=g.memoizedState!==null||Cl;if(!x){var P=g.alternate,C=P!==null&&P.memoizedState!==null||Mt;P=Cl;var L=Mt;if(Cl=x,(Mt=C)&&!L)for(se=g;se!==null;)x=se,C=x.child,x.tag===22&&x.memoizedState!==null?jw(g):C!==null?(C.return=x,se=C):jw(g);for(;_!==null;)se=_,Rw(_),_=_.sibling;se=g,Cl=P,Mt=L}Iw(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,se=_):Iw(i)}}function Iw(i){for(;se!==null;){var o=se;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Mt||kl(5,o);break;case 1:var p=o.stateNode;if(o.flags&4&&!Mt)if(c===null)p.componentDidMount();else{var g=o.elementType===o.type?c.memoizedProps:Mn(o.type,c.memoizedProps);p.componentDidUpdate(g,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&N_(o,_,p);break;case 3:var x=o.updateQueue;if(x!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}N_(o,x,c)}break;case 5:var P=o.stateNode;if(c===null&&o.flags&4){c=P;var C=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&c.focus();break;case"img":C.src&&(c.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var L=o.alternate;if(L!==null){var W=L.memoizedState;if(W!==null){var G=W.dehydrated;G!==null&&Va(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||o.flags&512&&lh(o)}catch(q){at(o,o.return,q)}}if(o===i){se=null;break}if(c=o.sibling,c!==null){c.return=o.return,se=c;break}se=o.return}}function Nw(i){for(;se!==null;){var o=se;if(o===i){se=null;break}var c=o.sibling;if(c!==null){c.return=o.return,se=c;break}se=o.return}}function jw(i){for(;se!==null;){var o=se;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{kl(4,o)}catch(C){at(o,c,C)}break;case 1:var p=o.stateNode;if(typeof p.componentDidMount=="function"){var g=o.return;try{p.componentDidMount()}catch(C){at(o,g,C)}}var _=o.return;try{lh(o)}catch(C){at(o,_,C)}break;case 5:var x=o.return;try{lh(o)}catch(C){at(o,x,C)}}}catch(C){at(o,o.return,C)}if(o===i){se=null;break}var P=o.sibling;if(P!==null){P.return=o.return,se=P;break}se=o.return}}var EC=Math.ceil,Ol=R.ReactCurrentDispatcher,fh=R.ReactCurrentOwner,Pn=R.ReactCurrentBatchConfig,Le=0,wt=null,ft=null,Ct=0,pn=0,$i=Xr(0),mt=0,fo=null,Vs=0,Rl=0,hh=0,ho=null,nn=null,ph=0,Mi=1/0,Ir=null,Il=!1,mh=null,rs=null,Nl=!1,ss=null,jl=0,po=0,gh=null,Ll=-1,$l=0;function qt(){return(Le&6)!==0?lt():Ll!==-1?Ll:Ll=lt()}function is(i){return(i.mode&1)===0?1:(Le&2)!==0&&Ct!==0?Ct&-Ct:oC.transition!==null?($l===0&&($l=Pv()),$l):(i=Be,i!==0||(i=window.event,i=i===void 0?16:$v(i.type)),i)}function Un(i,o,c,p){if(50<po)throw po=0,gh=null,Error(t(185));Ma(i,c,p),((Le&2)===0||i!==wt)&&(i===wt&&((Le&2)===0&&(Rl|=c),mt===4&&as(i,Ct)),rn(i,p),c===1&&Le===0&&(o.mode&1)===0&&(Mi=lt()+500,cl&&Qr()))}function rn(i,o){var c=i.callbackNode;oP(i,o);var p=qu(i,i===wt?Ct:0);if(p===0)c!==null&&Ev(c),i.callbackNode=null,i.callbackPriority=0;else if(o=p&-p,i.callbackPriority!==o){if(c!=null&&Ev(c),o===1)i.tag===0?aC($w.bind(null,i)):b_($w.bind(null,i)),nC(function(){(Le&6)===0&&Qr()}),c=null;else{switch(Cv(p)){case 1:c=Gd;break;case 4:c=Tv;break;case 16:c=Bu;break;case 536870912:c=Av;break;default:c=Bu}c=Hw(c,Lw.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function Lw(i,o){if(Ll=-1,$l=0,(Le&6)!==0)throw Error(t(327));var c=i.callbackNode;if(Di()&&i.callbackNode!==c)return null;var p=qu(i,i===wt?Ct:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||o)o=Ml(i,p);else{o=p;var g=Le;Le|=2;var _=Dw();(wt!==i||Ct!==o)&&(Ir=null,Mi=lt()+500,Hs(i,o));do try{PC();break}catch(P){Mw(i,P)}while(!0);jf(),Ol.current=_,Le=g,ft!==null?o=0:(wt=null,Ct=0,o=mt)}if(o!==0){if(o===2&&(g=Kd(i),g!==0&&(p=g,o=yh(i,g))),o===1)throw c=fo,Hs(i,0),as(i,p),rn(i,lt()),c;if(o===6)as(i,p);else{if(g=i.current.alternate,(p&30)===0&&!TC(g)&&(o=Ml(i,p),o===2&&(_=Kd(i),_!==0&&(p=_,o=yh(i,_))),o===1))throw c=fo,Hs(i,0),as(i,p),rn(i,lt()),c;switch(i.finishedWork=g,i.finishedLanes=p,o){case 0:case 1:throw Error(t(345));case 2:qs(i,nn,Ir);break;case 3:if(as(i,p),(p&130023424)===p&&(o=ph+500-lt(),10<o)){if(qu(i,0)!==0)break;if(g=i.suspendedLanes,(g&p)!==p){qt(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Sf(qs.bind(null,i,nn,Ir),o);break}qs(i,nn,Ir);break;case 4:if(as(i,p),(p&4194240)===p)break;for(o=i.eventTimes,g=-1;0<p;){var x=31-jn(p);_=1<<x,x=o[x],x>g&&(g=x),p&=~_}if(p=g,p=lt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*EC(p/1960))-p,10<p){i.timeoutHandle=Sf(qs.bind(null,i,nn,Ir),p);break}qs(i,nn,Ir);break;case 5:qs(i,nn,Ir);break;default:throw Error(t(329))}}}return rn(i,lt()),i.callbackNode===c?Lw.bind(null,i):null}function yh(i,o){var c=ho;return i.current.memoizedState.isDehydrated&&(Hs(i,o).flags|=256),i=Ml(i,o),i!==2&&(o=nn,nn=c,o!==null&&vh(o)),i}function vh(i){nn===null?nn=i:nn.push.apply(nn,i)}function TC(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var g=c[p],_=g.getSnapshot;g=g.value;try{if(!Ln(_(),g))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function as(i,o){for(o&=~hh,o&=~Rl,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-jn(o),p=1<<c;i[c]=-1,o&=~p}}function $w(i){if((Le&6)!==0)throw Error(t(327));Di();var o=qu(i,0);if((o&1)===0)return rn(i,lt()),null;var c=Ml(i,o);if(i.tag!==0&&c===2){var p=Kd(i);p!==0&&(o=p,c=yh(i,p))}if(c===1)throw c=fo,Hs(i,0),as(i,o),rn(i,lt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,qs(i,nn,Ir),rn(i,lt()),null}function _h(i,o){var c=Le;Le|=1;try{return i(o)}finally{Le=c,Le===0&&(Mi=lt()+500,cl&&Qr())}}function zs(i){ss!==null&&ss.tag===0&&(Le&6)===0&&Di();var o=Le;Le|=1;var c=Pn.transition,p=Be;try{if(Pn.transition=null,Be=1,i)return i()}finally{Be=p,Pn.transition=c,Le=o,(Le&6)===0&&Qr()}}function wh(){pn=$i.current,Je($i)}function Hs(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,tC(c)),ft!==null)for(c=ft.return;c!==null;){var p=c;switch(kf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&ul();break;case 3:Ni(),Je(Qt),Je(jt),Vf();break;case 5:Uf(p);break;case 4:Ni();break;case 13:Je(et);break;case 19:Je(et);break;case 10:Lf(p.type._context);break;case 22:case 23:wh()}c=c.return}if(wt=i,ft=i=os(i.current,null),Ct=pn=o,mt=0,fo=null,hh=Rl=Vs=0,nn=ho=null,Fs!==null){for(o=0;o<Fs.length;o++)if(c=Fs[o],p=c.interleaved,p!==null){c.interleaved=null;var g=p.next,_=c.pending;if(_!==null){var x=_.next;_.next=g,p.next=x}c.pending=p}Fs=null}return i}function Mw(i,o){do{var c=ft;try{if(jf(),wl.current=El,bl){for(var p=tt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}bl=!1}if(Bs=0,_t=pt=tt=null,io=!1,ao=0,fh.current=null,c===null||c.return===null){mt=1,fo=o,ft=null;break}e:{var _=i,x=c.return,P=c,C=o;if(o=Ct,P.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var L=C,W=P,G=W.tag;if((W.mode&1)===0&&(G===0||G===11||G===15)){var q=W.alternate;q?(W.updateQueue=q.updateQueue,W.memoizedState=q.memoizedState,W.lanes=q.lanes):(W.updateQueue=null,W.memoizedState=null)}var ee=uw(x);if(ee!==null){ee.flags&=-257,lw(ee,x,P,_,o),ee.mode&1&&ow(_,L,o),o=ee,C=L;var ae=o.updateQueue;if(ae===null){var ue=new Set;ue.add(C),o.updateQueue=ue}else ae.add(C);break e}else{if((o&1)===0){ow(_,L,o),bh();break e}C=Error(t(426))}}else if(Xe&&P.mode&1){var ct=uw(x);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),lw(ct,x,P,_,o),If(ji(C,P));break e}}_=C=ji(C,P),mt!==4&&(mt=2),ho===null?ho=[_]:ho.push(_),_=x;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var N=iw(_,C,o);I_(_,N);break e;case 1:P=C;var O=_.type,j=_.stateNode;if((_.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(rs===null||!rs.has(j)))){_.flags|=65536,o&=-o,_.lanes|=o;var X=aw(_,P,o);I_(_,X);break e}}_=_.return}while(_!==null)}Uw(c)}catch(le){o=le,ft===c&&c!==null&&(ft=c=c.return);continue}break}while(!0)}function Dw(){var i=Ol.current;return Ol.current=El,i===null?El:i}function bh(){(mt===0||mt===3||mt===2)&&(mt=4),wt===null||(Vs&268435455)===0&&(Rl&268435455)===0||as(wt,Ct)}function Ml(i,o){var c=Le;Le|=2;var p=Dw();(wt!==i||Ct!==o)&&(Ir=null,Hs(i,o));do try{AC();break}catch(g){Mw(i,g)}while(!0);if(jf(),Le=c,Ol.current=p,ft!==null)throw Error(t(261));return wt=null,Ct=0,mt}function AC(){for(;ft!==null;)Fw(ft)}function PC(){for(;ft!==null&&!Y1();)Fw(ft)}function Fw(i){var o=zw(i.alternate,i,pn);i.memoizedProps=i.pendingProps,o===null?Uw(i):ft=o,fh.current=null}function Uw(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=_C(c,o,pn),c!==null){ft=c;return}}else{if(c=wC(c,o),c!==null){c.flags&=32767,ft=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{mt=6,ft=null;return}}if(o=o.sibling,o!==null){ft=o;return}ft=o=i}while(o!==null);mt===0&&(mt=5)}function qs(i,o,c){var p=Be,g=Pn.transition;try{Pn.transition=null,Be=1,CC(i,o,c,p)}finally{Pn.transition=g,Be=p}return null}function CC(i,o,c,p){do Di();while(ss!==null);if((Le&6)!==0)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=c.lanes|c.childLanes;if(uP(i,_),i===wt&&(ft=wt=null,Ct=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Nl||(Nl=!0,Hw(Bu,function(){return Di(),null})),_=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||_){_=Pn.transition,Pn.transition=null;var x=Be;Be=1;var P=Le;Le|=4,fh.current=null,xC(i,c),Ow(c,i),GP(bf),Gu=!!wf,bf=wf=null,i.current=c,SC(c),Q1(),Le=P,Be=x,Pn.transition=_}else i.current=c;if(Nl&&(Nl=!1,ss=i,jl=g),_=i.pendingLanes,_===0&&(rs=null),nP(c.stateNode),rn(i,lt()),o!==null)for(p=i.onRecoverableError,c=0;c<o.length;c++)g=o[c],p(g.value,{componentStack:g.stack,digest:g.digest});if(Il)throw Il=!1,i=mh,mh=null,i;return(jl&1)!==0&&i.tag!==0&&Di(),_=i.pendingLanes,(_&1)!==0?i===gh?po++:(po=0,gh=i):po=0,Qr(),null}function Di(){if(ss!==null){var i=Cv(jl),o=Pn.transition,c=Be;try{if(Pn.transition=null,Be=16>i?16:i,ss===null)var p=!1;else{if(i=ss,ss=null,jl=0,(Le&6)!==0)throw Error(t(331));var g=Le;for(Le|=4,se=i.current;se!==null;){var _=se,x=_.child;if((se.flags&16)!==0){var P=_.deletions;if(P!==null){for(var C=0;C<P.length;C++){var L=P[C];for(se=L;se!==null;){var W=se;switch(W.tag){case 0:case 11:case 15:co(8,W,_)}var G=W.child;if(G!==null)G.return=W,se=G;else for(;se!==null;){W=se;var q=W.sibling,ee=W.return;if(Tw(W),W===L){se=null;break}if(q!==null){q.return=ee,se=q;break}se=ee}}}var ae=_.alternate;if(ae!==null){var ue=ae.child;if(ue!==null){ae.child=null;do{var ct=ue.sibling;ue.sibling=null,ue=ct}while(ue!==null)}}se=_}}if((_.subtreeFlags&2064)!==0&&x!==null)x.return=_,se=x;else e:for(;se!==null;){if(_=se,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:co(9,_,_.return)}var N=_.sibling;if(N!==null){N.return=_.return,se=N;break e}se=_.return}}var O=i.current;for(se=O;se!==null;){x=se;var j=x.child;if((x.subtreeFlags&2064)!==0&&j!==null)j.return=x,se=j;else e:for(x=O;se!==null;){if(P=se,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:kl(9,P)}}catch(le){at(P,P.return,le)}if(P===x){se=null;break e}var X=P.sibling;if(X!==null){X.return=P.return,se=X;break e}se=P.return}}if(Le=g,Qr(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Vu,i)}catch{}p=!0}return p}finally{Be=c,Pn.transition=o}}return!1}function Bw(i,o,c){o=ji(c,o),o=iw(i,o,1),i=ts(i,o,1),o=qt(),i!==null&&(Ma(i,1,o),rn(i,o))}function at(i,o,c){if(i.tag===3)Bw(i,i,c);else for(;o!==null;){if(o.tag===3){Bw(o,i,c);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(rs===null||!rs.has(p))){i=ji(c,i),i=aw(o,i,1),o=ts(o,i,1),i=qt(),o!==null&&(Ma(o,1,i),rn(o,i));break}}o=o.return}}function kC(i,o,c){var p=i.pingCache;p!==null&&p.delete(o),o=qt(),i.pingedLanes|=i.suspendedLanes&c,wt===i&&(Ct&c)===c&&(mt===4||mt===3&&(Ct&130023424)===Ct&&500>lt()-ph?Hs(i,0):hh|=c),rn(i,o)}function Vw(i,o){o===0&&((i.mode&1)===0?o=1:(o=Hu,Hu<<=1,(Hu&130023424)===0&&(Hu=4194304)));var c=qt();i=kr(i,o),i!==null&&(Ma(i,o,c),rn(i,c))}function OC(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Vw(i,c)}function RC(i,o){var c=0;switch(i.tag){case 13:var p=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(o),Vw(i,c)}var zw;zw=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||Qt.current)tn=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return tn=!1,vC(i,o,c);tn=(i.flags&131072)!==0}else tn=!1,Xe&&(o.flags&1048576)!==0&&x_(o,fl,o.index);switch(o.lanes=0,o.tag){case 2:var p=o.type;Pl(i,o),i=o.pendingProps;var g=Ai(o,jt.current);Ii(o,c),g=qf(null,o,p,i,g,c);var _=Wf();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,en(p)?(_=!0,ll(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Df(o),g.updater=Tl,o.stateNode=g,g._reactInternals=o,Yf(o,p,i,c),o=nh(null,o,p,!0,_,c)):(o.tag=0,Xe&&_&&Cf(o),Ht(null,o,g,c),o=o.child),o;case 16:p=o.elementType;e:{switch(Pl(i,o),i=o.pendingProps,g=p._init,p=g(p._payload),o.type=p,g=o.tag=NC(p),i=Mn(p,i),g){case 0:o=th(null,o,p,i,c);break e;case 1:o=mw(null,o,p,i,c);break e;case 11:o=cw(null,o,p,i,c);break e;case 14:o=dw(null,o,p,Mn(p.type,i),c);break e}throw Error(t(306,p,""))}return o;case 0:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:Mn(p,g),th(i,o,p,g,c);case 1:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:Mn(p,g),mw(i,o,p,g,c);case 3:e:{if(gw(o),i===null)throw Error(t(387));p=o.pendingProps,_=o.memoizedState,g=_.element,R_(i,o),vl(o,p,null,c);var x=o.memoizedState;if(p=x.element,_.isDehydrated)if(_={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=ji(Error(t(423)),o),o=yw(i,o,p,c,g);break e}else if(p!==g){g=ji(Error(t(424)),o),o=yw(i,o,p,c,g);break e}else for(hn=Jr(o.stateNode.containerInfo.firstChild),fn=o,Xe=!0,$n=null,c=k_(o,null,p,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ki(),p===g){o=Rr(i,o,c);break e}Ht(i,o,p,c)}o=o.child}return o;case 5:return j_(o),i===null&&Rf(o),p=o.type,g=o.pendingProps,_=i!==null?i.memoizedProps:null,x=g.children,xf(p,g)?x=null:_!==null&&xf(p,_)&&(o.flags|=32),pw(i,o),Ht(i,o,x,c),o.child;case 6:return i===null&&Rf(o),null;case 13:return vw(i,o,c);case 4:return Ff(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=Oi(o,null,p,c):Ht(i,o,p,c),o.child;case 11:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:Mn(p,g),cw(i,o,p,g,c);case 7:return Ht(i,o,o.pendingProps,c),o.child;case 8:return Ht(i,o,o.pendingProps.children,c),o.child;case 12:return Ht(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(p=o.type._context,g=o.pendingProps,_=o.memoizedProps,x=g.value,Ge(ml,p._currentValue),p._currentValue=x,_!==null)if(Ln(_.value,x)){if(_.children===g.children&&!Qt.current){o=Rr(i,o,c);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var P=_.dependencies;if(P!==null){x=_.child;for(var C=P.firstContext;C!==null;){if(C.context===p){if(_.tag===1){C=Or(-1,c&-c),C.tag=2;var L=_.updateQueue;if(L!==null){L=L.shared;var W=L.pending;W===null?C.next=C:(C.next=W.next,W.next=C),L.pending=C}}_.lanes|=c,C=_.alternate,C!==null&&(C.lanes|=c),$f(_.return,c,o),P.lanes|=c;break}C=C.next}}else if(_.tag===10)x=_.type===o.type?null:_.child;else if(_.tag===18){if(x=_.return,x===null)throw Error(t(341));x.lanes|=c,P=x.alternate,P!==null&&(P.lanes|=c),$f(x,c,o),x=_.sibling}else x=_.child;if(x!==null)x.return=_;else for(x=_;x!==null;){if(x===o){x=null;break}if(_=x.sibling,_!==null){_.return=x.return,x=_;break}x=x.return}_=x}Ht(i,o,g.children,c),o=o.child}return o;case 9:return g=o.type,p=o.pendingProps.children,Ii(o,c),g=Tn(g),p=p(g),o.flags|=1,Ht(i,o,p,c),o.child;case 14:return p=o.type,g=Mn(p,o.pendingProps),g=Mn(p.type,g),dw(i,o,p,g,c);case 15:return fw(i,o,o.type,o.pendingProps,c);case 17:return p=o.type,g=o.pendingProps,g=o.elementType===p?g:Mn(p,g),Pl(i,o),o.tag=1,en(p)?(i=!0,ll(o)):i=!1,Ii(o,c),rw(o,p,g),Yf(o,p,g,c),nh(null,o,p,!0,i,c);case 19:return ww(i,o,c);case 22:return hw(i,o,c)}throw Error(t(156,o.tag))};function Hw(i,o){return Sv(i,o)}function IC(i,o,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(i,o,c,p){return new IC(i,o,c,p)}function xh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function NC(i){if(typeof i=="function")return xh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===We)return 11;if(i===J)return 14}return 2}function os(i,o){var c=i.alternate;return c===null?(c=Cn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Dl(i,o,c,p,g,_){var x=2;if(p=i,typeof i=="function")xh(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case B:return Ws(c.children,g,_,o);case U:x=8,g|=8;break;case ie:return i=Cn(12,c,o,g|2),i.elementType=ie,i.lanes=_,i;case Ze:return i=Cn(13,c,o,g),i.elementType=Ze,i.lanes=_,i;case Y:return i=Cn(19,c,o,g),i.elementType=Y,i.lanes=_,i;case Z:return Fl(c,g,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case de:x=10;break e;case ve:x=9;break e;case We:x=11;break e;case J:x=14;break e;case te:x=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Cn(x,c,o,g),o.elementType=i,o.type=p,o.lanes=_,o}function Ws(i,o,c,p){return i=Cn(7,i,p,o),i.lanes=c,i}function Fl(i,o,c,p){return i=Cn(22,i,p,o),i.elementType=Z,i.lanes=c,i.stateNode={isHidden:!1},i}function Sh(i,o,c){return i=Cn(6,i,null,o),i.lanes=c,i}function Eh(i,o,c){return o=Cn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function jC(i,o,c,p,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Th(i,o,c,p,g,_,x,P,C){return i=new jC(i,o,c,P,C),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Cn(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Df(_),i}function LC(i,o,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:p==null?null:""+p,children:i,containerInfo:o,implementation:c}}function qw(i){if(!i)return Yr;i=i._reactInternals;e:{if(js(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(en(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(en(c))return __(i,c,o)}return o}function Ww(i,o,c,p,g,_,x,P,C){return i=Th(c,p,!0,i,g,_,x,P,C),i.context=qw(null),c=i.current,p=qt(),g=is(c),_=Or(p,g),_.callback=o??null,ts(c,_,g),i.current.lanes=g,Ma(i,g,p),rn(i,p),i}function Ul(i,o,c,p){var g=o.current,_=qt(),x=is(g);return c=qw(c),o.context===null?o.context=c:o.pendingContext=c,o=Or(_,x),o.payload={element:i},p=p===void 0?null:p,p!==null&&(o.callback=p),i=ts(g,o,x),i!==null&&(Un(i,g,x,_),yl(i,g,x)),x}function Bl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Zw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Ah(i,o){Zw(i,o),(i=i.alternate)&&Zw(i,o)}function $C(){return null}var Gw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Ph(i){this._internalRoot=i}Vl.prototype.render=Ph.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ul(i,o,null,null)},Vl.prototype.unmount=Ph.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;zs(function(){Ul(null,i,null,null)}),o[Tr]=null}};function Vl(i){this._internalRoot=i}Vl.prototype.unstable_scheduleHydration=function(i){if(i){var o=Rv();i={blockedOn:null,target:i,priority:o};for(var c=0;c<Zr.length&&o!==0&&o<Zr[c].priority;c++);Zr.splice(c,0,i),c===0&&jv(i)}};function Ch(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function zl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Kw(){}function MC(i,o,c,p,g){if(g){if(typeof p=="function"){var _=p;p=function(){var L=Bl(x);_.call(L)}}var x=Ww(o,p,i,0,null,!1,!1,"",Kw);return i._reactRootContainer=x,i[Tr]=x.current,Xa(i.nodeType===8?i.parentNode:i),zs(),x}for(;g=i.lastChild;)i.removeChild(g);if(typeof p=="function"){var P=p;p=function(){var L=Bl(C);P.call(L)}}var C=Th(i,0,!1,null,null,!1,!1,"",Kw);return i._reactRootContainer=C,i[Tr]=C.current,Xa(i.nodeType===8?i.parentNode:i),zs(function(){Ul(o,C,c,p)}),C}function Hl(i,o,c,p,g){var _=c._reactRootContainer;if(_){var x=_;if(typeof g=="function"){var P=g;g=function(){var C=Bl(x);P.call(C)}}Ul(o,x,i,g)}else x=MC(c,o,i,g,p);return Bl(x)}kv=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=$a(o.pendingLanes);c!==0&&(Xd(o,c|1),rn(o,lt()),(Le&6)===0&&(Mi=lt()+500,Qr()))}break;case 13:zs(function(){var p=kr(i,1);if(p!==null){var g=qt();Un(p,i,1,g)}}),Ah(i,1)}},Yd=function(i){if(i.tag===13){var o=kr(i,134217728);if(o!==null){var c=qt();Un(o,i,134217728,c)}Ah(i,134217728)}},Ov=function(i){if(i.tag===13){var o=is(i),c=kr(i,o);if(c!==null){var p=qt();Un(c,i,o,p)}Ah(i,o)}},Rv=function(){return Be},Iv=function(i,o){var c=Be;try{return Be=i,o()}finally{Be=c}},Hd=function(i,o,c){switch(o){case"input":if($d(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var p=c[o];if(p!==i&&p.form===i.form){var g=ol(p);if(!g)throw Error(t(90));nv(p),$d(p,g)}}}break;case"textarea":ov(i,c);break;case"select":o=c.value,o!=null&&pi(i,!!c.multiple,o,!1)}},gv=_h,yv=zs;var DC={usingClientEntryPoint:!1,Events:[eo,Ei,ol,pv,mv,_h]},mo={findFiberByHostInstance:Ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FC={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=bv(i),i===null?null:i.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Vu=ql.inject(FC),or=ql}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DC,sn.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ch(o))throw Error(t(200));return LC(i,o,null,c)},sn.createRoot=function(i,o){if(!Ch(i))throw Error(t(299));var c=!1,p="",g=Gw;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Th(i,1,!1,null,null,c,!1,p,g),i[Tr]=o.current,Xa(i.nodeType===8?i.parentNode:i),new Ph(o)},sn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=bv(o),i=i===null?null:i.stateNode,i},sn.flushSync=function(i){return zs(i)},sn.hydrate=function(i,o,c){if(!zl(o))throw Error(t(200));return Hl(null,i,o,!0,c)},sn.hydrateRoot=function(i,o,c){if(!Ch(i))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,g=!1,_="",x=Gw;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(x=c.onRecoverableError)),o=Ww(o,null,i,1,c??null,g,!1,_,x),i[Tr]=o.current,Xa(i),p)for(i=0;i<p.length;i++)c=p[i],g=c._getVersion,g=g(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,g]:o.mutableSourceEagerHydrationData.push(c,g);return new Vl(o)},sn.render=function(i,o,c){if(!zl(o))throw Error(t(200));return Hl(null,i,o,!1,c)},sn.unmountComponentAtNode=function(i){if(!zl(i))throw Error(t(40));return i._reactRootContainer?(zs(function(){Hl(null,null,i,!1,function(){i._reactRootContainer=null,i[Tr]=null})}),!0):!1},sn.unstable_batchedUpdates=_h,sn.unstable_renderSubtreeIntoContainer=function(i,o,c,p){if(!zl(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Hl(i,o,c,!1,p)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var rb;function KC(){if(rb)return Rh.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=GC(),Rh.exports}var sb;function JC(){if(sb)return Wl;sb=1;var n=KC();return Wl.createRoot=n.createRoot,Wl.hydrateRoot=n.hydrateRoot,Wl}var XC=JC();const JS=oe.createContext({});function YC(n){const e=oe.useRef(null);return e.current===null&&(e.current=n()),e.current}const Tg=typeof window<"u",QC=Tg?oe.useLayoutEffect:oe.useEffect,Ag=oe.createContext(null),XS=oe.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function ek(n=!0){const e=oe.useContext(Ag);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=oe.useId();oe.useEffect(()=>{if(n)return s(a)},[n]);const u=oe.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,u]:[!0]}function Pg(n,e){n.indexOf(e)===-1&&n.push(e)}function Cg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Br=(n,e,t)=>t>e?e:t<n?n:t;let kg=()=>{};const Vr={},YS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),QS=n=>/^0[^.\s]+$/u.test(n);function Og(n){let e;return()=>(e===void 0&&(e=n()),e)}const Nn=n=>n,tk=(n,e)=>t=>e(n(t)),wu=(...n)=>n.reduce(tk),Wo=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class Rg{constructor(){this.subscriptions=[]}add(e){return Pg(this.subscriptions,e),()=>Cg(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let a=0;a<s;a++){const u=this.subscriptions[a];u&&u(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr=n=>n*1e3,_r=n=>n/1e3;function eE(n,e){return e?n*(1e3/e):0}const tE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,nk=1e-7,rk=12;function sk(n,e,t,r,s){let a,u,l=0;do u=e+(t-e)/2,a=tE(u,r,s)-n,a>0?t=u:e=u;while(Math.abs(a)>nk&&++l<rk);return u}function bu(n,e,t,r){if(n===e&&t===r)return Nn;const s=a=>sk(a,0,1,n,t);return a=>a===0||a===1?a:tE(s(a),e,r)}const nE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,rE=n=>e=>1-n(1-e),sE=bu(.33,1.53,.69,.99),Ig=rE(sE),iE=nE(Ig),aE=n=>(n*=2)<1?.5*Ig(n):.5*(2-Math.pow(2,-10*(n-1))),Ng=n=>1-Math.sin(Math.acos(n)),oE=rE(Ng),uE=nE(Ng),ik=bu(.42,0,1,1),ak=bu(0,0,.58,1),lE=bu(.42,0,.58,1),ok=n=>Array.isArray(n)&&typeof n[0]!="number",cE=n=>Array.isArray(n)&&typeof n[0]=="number",uk={linear:Nn,easeIn:ik,easeInOut:lE,easeOut:ak,circIn:Ng,circInOut:uE,circOut:oE,backIn:Ig,backInOut:iE,backOut:sE,anticipate:aE},lk=n=>typeof n=="string",ib=n=>{if(cE(n)){kg(n.length===4);const[e,t,r,s]=n;return bu(e,t,r,s)}else if(lk(n))return uk[n];return n},Zl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],ab={value:null};function ck(n,e){let t=new Set,r=new Set,s=!1,a=!1;const u=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},d=0;function f(m){u.has(m)&&(h.schedule(m),n()),d++,m(l)}const h={schedule:(m,y=!1,v=!1)=>{const b=v&&s?t:r;return y&&u.add(m),b.has(m)||b.add(m),m},cancel:m=>{r.delete(m),u.delete(m)},process:m=>{if(l=m,s){a=!0;return}s=!0,[t,r]=[r,t],t.forEach(f),e&&ab.value&&ab.value.frameloop[e].push(d),d=0,t.clear(),s=!1,a&&(a=!1,h.process(m))}};return h}const dk=40;function dE(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,u=Zl.reduce((T,R)=>(T[R]=ck(a,e?R:void 0),T),{}),{setup:l,read:d,resolveKeyframes:f,preUpdate:h,update:m,preRender:y,render:v,postRender:w}=u,b=()=>{const T=Vr.useManualTiming?s.timestamp:performance.now();t=!1,Vr.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(T-s.timestamp,dk),1)),s.timestamp=T,s.isProcessing=!0,l.process(s),d.process(s),f.process(s),h.process(s),m.process(s),y.process(s),v.process(s),w.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(b))},S=()=>{t=!0,r=!0,s.isProcessing||n(b)};return{schedule:Zl.reduce((T,R)=>{const I=u[R];return T[R]=(M,B=!1,U=!1)=>(t||S(),I.schedule(M,B,U)),T},{}),cancel:T=>{for(let R=0;R<Zl.length;R++)u[Zl[R]].cancel(T)},state:s,steps:u}}const{schedule:it,cancel:xs,state:Ot,steps:jh}=dE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0);let gc;function fk(){gc=void 0}const ln={now:()=>(gc===void 0&&ln.set(Ot.isProcessing||Vr.useManualTiming?Ot.timestamp:performance.now()),gc),set:n=>{gc=n,queueMicrotask(fk)}},fE=n=>e=>typeof e=="string"&&e.startsWith(n),jg=fE("--"),hk=fE("var(--"),Lg=n=>hk(n)?pk.test(n.split("/*")[0].trim()):!1,pk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ya={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Zo={...ya,transform:n=>Br(0,1,n)},Gl={...ya,default:1},jo=n=>Math.round(n*1e5)/1e5,$g=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mk(n){return n==null}const gk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Mg=(n,e)=>t=>!!(typeof t=="string"&&gk.test(t)&&t.startsWith(n)||e&&!mk(t)&&Object.prototype.hasOwnProperty.call(t,e)),hE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,a,u,l]=r.match($g);return{[n]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(u),alpha:l!==void 0?parseFloat(l):1}},yk=n=>Br(0,255,n),Lh={...ya,transform:n=>Math.round(yk(n))},Ys={test:Mg("rgb","red"),parse:hE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Lh.transform(n)+", "+Lh.transform(e)+", "+Lh.transform(t)+", "+jo(Zo.transform(r))+")"};function vk(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Am={test:Mg("#"),parse:vk,transform:Ys.transform},xu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ms=xu("deg"),wr=xu("%"),we=xu("px"),_k=xu("vh"),wk=xu("vw"),ob={...wr,parse:n=>wr.parse(n)/100,transform:n=>wr.transform(n*100)},Gi={test:Mg("hsl","hue"),parse:hE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+wr.transform(jo(e))+", "+wr.transform(jo(t))+", "+jo(Zo.transform(r))+")"},Ut={test:n=>Ys.test(n)||Am.test(n)||Gi.test(n),parse:n=>Ys.test(n)?Ys.parse(n):Gi.test(n)?Gi.parse(n):Am.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Ys.transform(n):Gi.transform(n)},bk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xk(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match($g))==null?void 0:e.length)||0)+(((t=n.match(bk))==null?void 0:t.length)||0)>0}const pE="number",mE="color",Sk="var",Ek="var(",ub="${}",Tk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Go(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(Tk,d=>(Ut.test(d)?(r.color.push(a),s.push(mE),t.push(Ut.parse(d))):d.startsWith(Ek)?(r.var.push(a),s.push(Sk),t.push(d)):(r.number.push(a),s.push(pE),t.push(parseFloat(d))),++a,ub)).split(ub);return{values:t,split:l,indexes:r,types:s}}function gE(n){return Go(n).values}function yE(n){const{split:e,types:t}=Go(n),r=e.length;return s=>{let a="";for(let u=0;u<r;u++)if(a+=e[u],s[u]!==void 0){const l=t[u];l===pE?a+=jo(s[u]):l===mE?a+=Ut.transform(s[u]):a+=s[u]}return a}}const Ak=n=>typeof n=="number"?0:n;function Pk(n){const e=gE(n);return yE(n)(e.map(Ak))}const Ss={test:xk,parse:gE,createTransformer:yE,getAnimatableNone:Pk};function $h(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ck({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,a=0,u=0;if(!e)s=a=u=t;else{const l=t<.5?t*(1+e):t+e-t*e,d=2*t-l;s=$h(d,l,n+1/3),a=$h(d,l,n),u=$h(d,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(u*255),alpha:r}}function Cc(n,e){return t=>t>0?e:n}const st=(n,e,t)=>n+(e-n)*t,Mh=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},kk=[Am,Ys,Gi],Ok=n=>kk.find(e=>e.test(n));function lb(n){const e=Ok(n);if(!e)return!1;let t=e.parse(n);return e===Gi&&(t=Ck(t)),t}const cb=(n,e)=>{const t=lb(n),r=lb(e);if(!t||!r)return Cc(n,e);const s={...t};return a=>(s.red=Mh(t.red,r.red,a),s.green=Mh(t.green,r.green,a),s.blue=Mh(t.blue,r.blue,a),s.alpha=st(t.alpha,r.alpha,a),Ys.transform(s))},Pm=new Set(["none","hidden"]);function Rk(n,e){return Pm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Ik(n,e){return t=>st(n,e,t)}function Dg(n){return typeof n=="number"?Ik:typeof n=="string"?Lg(n)?Cc:Ut.test(n)?cb:Lk:Array.isArray(n)?vE:typeof n=="object"?Ut.test(n)?cb:Nk:Cc}function vE(n,e){const t=[...n],r=t.length,s=n.map((a,u)=>Dg(a)(a,e[u]));return a=>{for(let u=0;u<r;u++)t[u]=s[u](a);return t}}function Nk(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Dg(n[s])(n[s],e[s]));return s=>{for(const a in r)t[a]=r[a](s);return t}}function jk(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],u=n.indexes[a][r[a]],l=n.values[u]??0;t[s]=l,r[a]++}return t}const Lk=(n,e)=>{const t=Ss.createTransformer(e),r=Go(n),s=Go(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Pm.has(n)&&!s.values.length||Pm.has(e)&&!r.values.length?Rk(n,e):wu(vE(jk(r,s),s.values),t):Cc(n,e)};function _E(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?st(n,e,t):Dg(n)(n,e)}const $k=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>it.update(e,t),stop:()=>xs(e),now:()=>Ot.isProcessing?Ot.timestamp:ln.now()}},wE=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)r+=n(a/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},kc=2e4;function Fg(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<kc;)e+=t,r=n.next(e);return e>=kc?1/0:e}function Mk(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(Fg(r),kc);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:_r(s)}}const Dk=5;function bE(n,e,t){const r=Math.max(e-Dk,0);return eE(t-n(r),e-r)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},db=.001;function Fk({duration:n=ot.duration,bounce:e=ot.bounce,velocity:t=ot.velocity,mass:r=ot.mass}){let s,a,u=1-e;u=Br(ot.minDamping,ot.maxDamping,u),n=Br(ot.minDuration,ot.maxDuration,_r(n)),u<1?(s=f=>{const h=f*u,m=h*n,y=h-t,v=Cm(f,u),w=Math.exp(-m);return db-y/v*w},a=f=>{const m=f*u*n,y=m*t+t,v=Math.pow(u,2)*Math.pow(f,2)*n,w=Math.exp(-m),b=Cm(Math.pow(f,2),u);return(-s(f)+db>0?-1:1)*((y-v)*w)/b}):(s=f=>{const h=Math.exp(-f*n),m=(f-t)*n+1;return-.001+h*m},a=f=>{const h=Math.exp(-f*n),m=(t-f)*(n*n);return h*m});const l=5/n,d=Bk(s,a,l);if(n=vr(n),isNaN(d))return{stiffness:ot.stiffness,damping:ot.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:u*2*Math.sqrt(r*f),duration:n}}}const Uk=12;function Bk(n,e,t){let r=t;for(let s=1;s<Uk;s++)r=r-n(r)/e(r);return r}function Cm(n,e){return n*Math.sqrt(1-e*e)}const Vk=["duration","bounce"],zk=["stiffness","damping","mass"];function fb(n,e){return e.some(t=>n[t]!==void 0)}function Hk(n){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...n};if(!fb(n,zk)&&fb(n,Vk))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,a=2*Br(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:ot.mass,stiffness:s,damping:a}}else{const t=Fk(n);e={...e,...t,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function Oc(n=ot.visualDuration,e=ot.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const a=t.keyframes[0],u=t.keyframes[t.keyframes.length-1],l={done:!1,value:a},{stiffness:d,damping:f,mass:h,duration:m,velocity:y,isResolvedFromDuration:v}=Hk({...t,velocity:-_r(t.velocity||0)}),w=y||0,b=f/(2*Math.sqrt(d*h)),S=u-a,E=_r(Math.sqrt(d/h)),A=Math.abs(S)<5;r||(r=A?ot.restSpeed.granular:ot.restSpeed.default),s||(s=A?ot.restDelta.granular:ot.restDelta.default);let T;if(b<1){const I=Cm(E,b);T=M=>{const B=Math.exp(-b*E*M);return u-B*((w+b*E*S)/I*Math.sin(I*M)+S*Math.cos(I*M))}}else if(b===1)T=I=>u-Math.exp(-E*I)*(S+(w+E*S)*I);else{const I=E*Math.sqrt(b*b-1);T=M=>{const B=Math.exp(-b*E*M),U=Math.min(I*M,300);return u-B*((w+b*E*S)*Math.sinh(U)+I*S*Math.cosh(U))/I}}const R={calculatedDuration:v&&m||null,next:I=>{const M=T(I);if(v)l.done=I>=m;else{let B=I===0?w:0;b<1&&(B=I===0?vr(w):bE(T,I,M));const U=Math.abs(B)<=r,ie=Math.abs(u-M)<=s;l.done=U&&ie}return l.value=l.done?u:M,l},toString:()=>{const I=Math.min(Fg(R),kc),M=wE(B=>R.next(I*B).value,I,30);return I+"ms "+M},toTransition:()=>{}};return R}Oc.applyToOptions=n=>{const e=Mk(n,100,Oc);return n.ease=e.ease,n.duration=vr(e.duration),n.type="keyframes",n};function km({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:u,min:l,max:d,restDelta:f=.5,restSpeed:h}){const m=n[0],y={done:!1,value:m},v=U=>l!==void 0&&U<l||d!==void 0&&U>d,w=U=>l===void 0?d:d===void 0||Math.abs(l-U)<Math.abs(d-U)?l:d;let b=t*e;const S=m+b,E=u===void 0?S:u(S);E!==S&&(b=E-m);const A=U=>-b*Math.exp(-U/r),T=U=>E+A(U),R=U=>{const ie=A(U),de=T(U);y.done=Math.abs(ie)<=f,y.value=y.done?E:de};let I,M;const B=U=>{v(y.value)&&(I=U,M=Oc({keyframes:[y.value,w(y.value)],velocity:bE(T,U,y.value),damping:s,stiffness:a,restDelta:f,restSpeed:h}))};return B(0),{calculatedDuration:null,next:U=>{let ie=!1;return!M&&I===void 0&&(ie=!0,R(U),B(U)),I!==void 0&&U>=I?M.next(U-I):(!ie&&R(U),y)}}}function qk(n,e,t){const r=[],s=t||Vr.mix||_E,a=n.length-1;for(let u=0;u<a;u++){let l=s(n[u],n[u+1]);if(e){const d=Array.isArray(e)?e[u]||Nn:e;l=wu(d,l)}r.push(l)}return r}function Wk(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const a=n.length;if(kg(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=qk(e,r,s),d=l.length,f=h=>{if(u&&h<n[0])return e[0];let m=0;if(d>1)for(;m<n.length-2&&!(h<n[m+1]);m++);const y=Wo(n[m],n[m+1],h);return l[m](y)};return t?h=>f(Br(n[0],n[a-1],h)):f}function Zk(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Wo(0,e,r);n.push(st(t,1,s))}}function Gk(n){const e=[0];return Zk(e,n.length-1),e}function Kk(n,e){return n.map(t=>t*e)}function Jk(n,e){return n.map(()=>e||lE).splice(0,n.length-1)}function Lo({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=ok(r)?r.map(ib):ib(r),a={done:!1,value:e[0]},u=Kk(t&&t.length===e.length?t:Gk(e),n),l=Wk(u,e,{ease:Array.isArray(s)?s:Jk(e,s)});return{calculatedDuration:n,next:d=>(a.value=l(d),a.done=d>=n,a)}}const Xk=n=>n!==null;function Ug(n,{repeat:e,repeatType:t="loop"},r,s=1){const a=n.filter(Xk),l=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Yk={decay:km,inertia:km,tween:Lo,keyframes:Lo,spring:Oc};function xE(n){typeof n.type=="string"&&(n.type=Yk[n.type])}class Bg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Qk=n=>n/100;class Vg extends Bg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{var r,s;if(t){const{motionValue:a}=this.options;a&&a.updatedAt!==ln.now()&&this.tick(ln.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xE(e);const{type:t=Lo,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:u=0}=e;let{keyframes:l}=e;const d=t||Lo;d!==Lo&&typeof l[0]!="number"&&(this.mixKeyframes=wu(Qk,_E(l[0],l[1])),l=[0,100]);const f=d({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...l].reverse(),velocity:-u})),f.calculatedDuration===null&&(f.calculatedDuration=Fg(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:u,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:m,repeatType:y,repeatDelay:v,type:w,onUpdate:b,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-f*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?E<0:E>s;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let T=this.currentTime,R=r;if(m){const U=Math.min(this.currentTime,s)/l;let ie=Math.floor(U),de=U%1;!de&&U>=1&&(de=1),de===1&&ie--,ie=Math.min(ie,m+1),!!(ie%2)&&(y==="reverse"?(de=1-de,v&&(de-=v/l)):y==="mirror"&&(R=u)),T=Br(0,1,de)*l}const I=A?{done:!1,value:h[0]}:R.next(T);a&&(I.value=a(I.value));let{done:M}=I;!A&&d!==null&&(M=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return B&&w!==km&&(I.value=Ug(h,this.options,S,this.speed)),b&&b(I.value),B&&this.finish(),I}then(e,t){return this.finished.then(e,t)}get duration(){return _r(this.calculatedDuration)}get time(){return _r(this.currentTime)}set time(e){var t;e=vr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ln.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=_r(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=$k,startTime:t}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ln.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function eO(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Qs=n=>n*180/Math.PI,Om=n=>{const e=Qs(Math.atan2(n[1],n[0]));return Rm(e)},tO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Om,rotateZ:Om,skewX:n=>Qs(Math.atan(n[1])),skewY:n=>Qs(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Rm=n=>(n=n%360,n<0&&(n+=360),n),hb=Om,pb=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),mb=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),nO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:pb,scaleY:mb,scale:n=>(pb(n)+mb(n))/2,rotateX:n=>Rm(Qs(Math.atan2(n[6],n[5]))),rotateY:n=>Rm(Qs(Math.atan2(-n[2],n[0]))),rotateZ:hb,rotate:hb,skewX:n=>Qs(Math.atan(n[4])),skewY:n=>Qs(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function gb(n){return n.includes("scale")?1:0}function Im(n,e){if(!n||n==="none")return gb(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=nO,s=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=tO,s=l}if(!s)return gb(e);const a=r[e],u=s[1].split(",").map(sO);return typeof a=="function"?a(u):u[a]}const rO=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Im(t,e)};function sO(n){return parseFloat(n.trim())}const va=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_a=new Set(va),yb=n=>n===ya||n===we,iO=new Set(["x","y","z"]),aO=va.filter(n=>!iO.has(n));function oO(n){const e=[];return aO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ni={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Im(e,"x"),y:(n,{transform:e})=>Im(e,"y")};ni.translateX=ni.x;ni.translateY=ni.y;const ri=new Set;let Nm=!1,jm=!1,Lm=!1;function SE(){if(jm){const n=Array.from(ri).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=oO(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([a,u])=>{var l;(l=r.getValue(a))==null||l.set(u)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}jm=!1,Nm=!1,ri.forEach(n=>n.complete(Lm)),ri.clear()}function EE(){ri.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(jm=!0)})}function uO(){Lm=!0,EE(),SE(),Lm=!1}class zg{constructor(e,t,r,s,a,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=a,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(ri.add(this),Nm||(Nm=!0,it.read(EE),it.resolveKeyframes(SE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,u);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=u),s&&a===void 0&&s.set(e[0])}eO(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ri.delete(this)}cancel(){this.state==="scheduled"&&(ri.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lO=n=>n.startsWith("--");function cO(n,e,t){lO(e)?n.style.setProperty(e,t):n.style[e]=t}const dO=Og(()=>window.ScrollTimeline!==void 0),fO={};function hO(n,e){const t=Og(n);return()=>fO[e]??t()}const TE=hO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Eo=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,vb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Eo([0,.65,.55,1]),circOut:Eo([.55,0,1,.45]),backIn:Eo([.31,.01,.66,-.59]),backOut:Eo([.33,1.53,.69,.99])};function AE(n,e){if(n)return typeof n=="function"?TE()?wE(n,e):"ease-out":cE(n)?Eo(n):Array.isArray(n)?n.map(t=>AE(t,e)||vb.easeOut):vb[n]}function pO(n,e,t,{delay:r=0,duration:s=300,repeat:a=0,repeatType:u="loop",ease:l="easeOut",times:d}={},f=void 0){const h={[e]:t};d&&(h.offset=d);const m=AE(l,s);Array.isArray(m)&&(h.easing=m);const y={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:u==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(h,y)}function PE(n){return typeof n=="function"&&"applyToOptions"in n}function mO({type:n,...e}){return PE(n)&&TE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class gO extends Bg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:a,allowFlatten:u=!1,finalKeyframe:l,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=u,this.options=e,kg(typeof e.type!="string");const f=mO(e);this.animation=pO(t,r,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=Ug(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):cO(t,r,h),this.animation.cancel()}d==null||d(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return _r(Number(e))}get time(){return _r(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&dO()?(this.animation.timeline=e,Nn):t(this)}}const CE={anticipate:aE,backInOut:iE,circInOut:uE};function yO(n){return n in CE}function vO(n){typeof n.ease=="string"&&yO(n.ease)&&(n.ease=CE[n.ease])}const _b=10;class _O extends gO{constructor(e){vO(e),xE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:a,...u}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new Vg({...u,autoplay:!1}),d=vr(this.finishedTime??this.time);t.setWithVelocity(l.sample(d-_b).value,l.sample(d).value,_b),l.stop()}}const wb=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ss.test(n)||n==="0")&&!n.startsWith("url("));function wO(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function bO(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],u=wb(s,e),l=wb(a,e);return!u||!l?!1:wO(n)||(t==="spring"||PE(t))&&r}const xO=new Set(["opacity","clipPath","filter","transform"]),SO=Og(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EO(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:a,type:u}=n;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:d}=e.owner.getProps();return SO()&&t&&xO.has(t)&&(t!=="transform"||!d)&&!l&&!r&&s!=="mirror"&&a!==0&&u!=="inertia"}const TO=40;class AO extends Bg{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:u="loop",keyframes:l,name:d,motionValue:f,element:h,...m}){var w;super(),this.stop=()=>{var b,S;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(S=this.keyframeResolver)==null||S.cancel()},this.createdAt=ln.now();const y={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:a,repeatType:u,name:d,motionValue:f,element:h,...m},v=(h==null?void 0:h.KeyframeResolver)||zg;this.keyframeResolver=new v(l,(b,S,E)=>this.onKeyframesResolved(b,S,y,!E),d,f,h),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:a,type:u,velocity:l,delay:d,isHandoff:f,onUpdate:h}=r;this.resolvedAt=ln.now(),bO(e,a,u,l)||((Vr.instantAnimations||!d)&&(h==null||h(Ug(e,r,t))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>TO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},v=!f&&EO(y)?new _O({...y,element:y.motionValue.owner.current}):new Vg(y);v.finished.then(()=>this.notifyFinished()).catch(Nn),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),uO()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const PO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function CO(n){const e=PO.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function kE(n,e,t=1){const[r,s]=CO(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const u=a.trim();return YS(u)?parseFloat(u):u}return Lg(s)?kE(s,e,t+1):s}function Hg(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const OE=new Set(["width","height","top","left","right","bottom",...va]),kO={test:n=>n==="auto",parse:n=>n},RE=n=>e=>e.test(n),IE=[ya,we,wr,ms,wk,_k,kO],bb=n=>IE.find(RE(n));function OO(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||QS(n):!0}const RO=new Set(["brightness","contrast","saturate","opacity"]);function IO(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match($g)||[];if(!r)return n;const s=t.replace(r,"");let a=RO.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+s+")"}const NO=/\b([a-z-]*)\(.*?\)/gu,$m={...Ss,getAnimatableNone:n=>{const e=n.match(NO);return e?e.map(IO).join(" "):n}},xb={...ya,transform:Math.round},jO={rotate:ms,rotateX:ms,rotateY:ms,rotateZ:ms,scale:Gl,scaleX:Gl,scaleY:Gl,scaleZ:Gl,skew:ms,skewX:ms,skewY:ms,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Zo,originX:ob,originY:ob,originZ:we},qg={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,...jO,zIndex:xb,fillOpacity:Zo,strokeOpacity:Zo,numOctaves:xb},LO={...qg,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:$m,WebkitFilter:$m},NE=n=>LO[n];function jE(n,e){let t=NE(n);return t!==$m&&(t=Ss),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const $O=new Set(["auto","none","0"]);function MO(n,e,t){let r=0,s;for(;r<n.length&&!s;){const a=n[r];typeof a=="string"&&!$O.has(a)&&Go(a).values.length&&(s=n[r]),r++}if(s&&t)for(const a of e)n[a]=jE(t,s)}class DO extends zg{constructor(e,t,r,s,a){super(e,t,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Lg(f))){const h=kE(f,t.current);h!==void 0&&(e[d]=h),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!OE.has(r)||e.length!==2)return;const[s,a]=e,u=bb(s),l=bb(a);if(u!==l)if(yb(u)&&yb(l))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else ni[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||OO(e[s]))&&r.push(s);r.length&&MO(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ni[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=ni[t](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function FO(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const Sb=30,UO=n=>!isNaN(parseFloat(n));class BO{constructor(e,t={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var u,l;const a=ln.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty();s&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ln.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Rg);const r=this.events[e].add(t);return e==="change"?()=>{r(),it.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ln.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Sb)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Sb);return eE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function la(n,e){return new BO(n,e)}const LE=(n,e)=>e&&typeof n=="number"?e.transform(n):n,{schedule:Wg}=dE(queueMicrotask,!1),Zn={x:!1,y:!1};function $E(){return Zn.x||Zn.y}function VO(n){return n==="x"||n==="y"?Zn[n]?null:(Zn[n]=!0,()=>{Zn[n]=!1}):Zn.x||Zn.y?null:(Zn.x=Zn.y=!0,()=>{Zn.x=Zn.y=!1})}function ME(n,e){const t=FO(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function Eb(n){return!(n.pointerType==="touch"||$E())}function zO(n,e,t={}){const[r,s,a]=ME(n,t),u=l=>{if(!Eb(l))return;const{target:d}=l,f=e(d,l);if(typeof f!="function"||!d)return;const h=m=>{Eb(m)&&(f(m),d.removeEventListener("pointerleave",h))};d.addEventListener("pointerleave",h,s)};return r.forEach(l=>{l.addEventListener("pointerenter",u,s)}),a}const DE=(n,e)=>e?n===e?!0:DE(n,e.parentElement):!1,Zg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,HO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qO(n){return HO.has(n.tagName)||n.tabIndex!==-1}const yc=new WeakSet;function Tb(n){return e=>{e.key==="Enter"&&n(e)}}function Dh(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WO=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Tb(()=>{if(yc.has(t))return;Dh(t,"down");const s=Tb(()=>{Dh(t,"up")}),a=()=>Dh(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Ab(n){return Zg(n)&&!$E()}function ZO(n,e,t={}){const[r,s,a]=ME(n,t),u=l=>{const d=l.currentTarget;if(!Ab(l))return;yc.add(d);const f=e(d,l),h=(v,w)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),yc.has(d)&&yc.delete(d),Ab(v)&&typeof f=="function"&&f(v,{success:w})},m=v=>{h(v,d===window||d===document||t.useGlobalTarget||DE(d,v.target))},y=v=>{h(v,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",y,s)};return r.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",u,s),l instanceof HTMLElement&&(l.addEventListener("focus",f=>WO(f,s)),!qO(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}const GO=[...IE,Ut,Ss],KO=n=>GO.find(RE(n)),FE=oe.createContext({strict:!1}),Pb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ca={};for(const n in Pb)ca[n]={isEnabled:e=>Pb[n].some(t=>!!e[t])};function JO(n){for(const e in n)ca[e]={...ca[e],...n[e]}}const XO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rc(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||XO.has(n)}let UE=n=>!Rc(n);function YO(n){n&&(UE=e=>e.startsWith("on")?!Rc(e):n(e))}try{YO(require("@emotion/is-prop-valid").default)}catch{}function QO(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(UE(s)||t===!0&&Rc(s)||!e&&!Rc(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function eR(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const ad=oe.createContext({});function od(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Ko(n){return typeof n=="string"||Array.isArray(n)}const Gg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Kg=["initial",...Gg];function ud(n){return od(n.animate)||Kg.some(e=>Ko(n[e]))}function BE(n){return!!(ud(n)||n.variants)}function tR(n,e){if(ud(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ko(t)?t:void 0,animate:Ko(r)?r:void 0}}return n.inherit!==!1?e:{}}function nR(n){const{initial:e,animate:t}=tR(n,oe.useContext(ad));return oe.useMemo(()=>({initial:e,animate:t}),[Cb(e),Cb(t)])}function Cb(n){return Array.isArray(n)?n.join(" "):n}const rR=Symbol.for("motionComponentSymbol");function Ki(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function sR(n,e,t){return oe.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ki(t)&&(t.current=r))},[e])}const Jg=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iR="framerAppearId",VE="data-"+Jg(iR),zE=oe.createContext({});function aR(n,e,t,r,s){var b,S;const{visualElement:a}=oe.useContext(ad),u=oe.useContext(FE),l=oe.useContext(Ag),d=oe.useContext(XS).reducedMotion,f=oe.useRef(null);r=r||u.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:a,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,m=oe.useContext(zE);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&oR(f.current,t,s,m);const y=oe.useRef(!1);oe.useInsertionEffect(()=>{h&&y.current&&h.update(t,l)});const v=t[VE],w=oe.useRef(!!v&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,v))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,v)));return QC(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),Wg.render(h.render),w.current&&h.animationState&&h.animationState.animateChanges())}),oe.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,v)}),w.current=!1))}),h}function oR(n,e,t,r){const{layoutId:s,layout:a,drag:u,dragConstraints:l,layoutScroll:d,layoutRoot:f,layoutCrossfade:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:HE(n.parent)),n.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!u||l&&Ki(l),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:d,layoutRoot:f})}function HE(n){if(n)return n.options.allowProjection!==!1?n.projection:HE(n.parent)}function uR({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&JO(n);function a(l,d){let f;const h={...oe.useContext(XS),...l,layoutId:lR(l)},{isStatic:m}=h,y=nR(l),v=r(l,m);if(!m&&Tg){cR();const w=dR(h);f=w.MeasureLayout,y.visualElement=aR(s,v,h,e,w.ProjectionNode)}return H.jsxs(ad.Provider,{value:y,children:[f&&y.visualElement?H.jsx(f,{visualElement:y.visualElement,...h}):null,t(s,l,sR(v,y.visualElement,d),v,m,y.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const u=oe.forwardRef(a);return u[rR]=s,u}function lR({layoutId:n}){const e=oe.useContext(JS).id;return e&&n!==void 0?e+"-"+n:n}function cR(n,e){oe.useContext(FE).strict}function dR(n){const{drag:e,layout:t}=ca;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Jo={};function fR(n){for(const e in n)Jo[e]=n[e],jg(e)&&(Jo[e].isCSSVariable=!0)}function qE(n,{layout:e,layoutId:t}){return _a.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Jo[n]||n==="opacity")}const Vt=n=>!!(n&&n.getVelocity),hR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pR=va.length;function mR(n,e,t){let r="",s=!0;for(let a=0;a<pR;a++){const u=va[a],l=n[u];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(u.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||t){const f=LE(l,qg[u]);if(!d){s=!1;const h=hR[u]||u;r+=`${h}(${f}) `}t&&(e[u]=f)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Xg(n,e,t){const{style:r,vars:s,transformOrigin:a}=n;let u=!1,l=!1;for(const d in e){const f=e[d];if(_a.has(d)){u=!0;continue}else if(jg(d)){s[d]=f;continue}else{const h=LE(f,qg[d]);d.startsWith("origin")?(l=!0,a[d]=h):r[d]=h}}if(e.transform||(u||t?r.transform=mR(e,n.transform,t):r.transform&&(r.transform="none")),l){const{originX:d="50%",originY:f="50%",originZ:h=0}=a;r.transformOrigin=`${d} ${f} ${h}`}}const Yg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function WE(n,e,t){for(const r in e)!Vt(e[r])&&!qE(r,t)&&(n[r]=e[r])}function gR({transformTemplate:n},e){return oe.useMemo(()=>{const t=Yg();return Xg(t,e,n),Object.assign({},t.vars,t.style)},[e])}function yR(n,e){const t=n.style||{},r={};return WE(r,t,n),Object.assign(r,gR(n,e)),r}function vR(n,e){const t={},r=yR(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const _R=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Qg(n){return typeof n!="string"||n.includes("-")?!1:!!(_R.indexOf(n)>-1||/[A-Z]/u.test(n))}const wR={offset:"stroke-dashoffset",array:"stroke-dasharray"},bR={offset:"strokeDashoffset",array:"strokeDasharray"};function xR(n,e,t=1,r=0,s=!0){n.pathLength=1;const a=s?wR:bR;n[a.offset]=we.transform(-r);const u=we.transform(e),l=we.transform(t);n[a.array]=`${u} ${l}`}function ZE(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:u=0,...l},d,f,h){if(Xg(n,l,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y}=n;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),s!==void 0&&xR(m,s,a,u,!1)}const GE=()=>({...Yg(),attrs:{}}),KE=n=>typeof n=="string"&&n.toLowerCase()==="svg";function SR(n,e,t,r){const s=oe.useMemo(()=>{const a=GE();return ZE(a,e,KE(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};WE(a,n.style,n),s.style={...a,...s.style}}return s}function ER(n=!1){return(t,r,s,{latestValues:a},u)=>{const d=(Qg(t)?SR:vR)(r,a,u,t),f=QO(r,typeof t=="string",n),h=t!==oe.Fragment?{...f,...d,ref:s}:{},{children:m}=r,y=oe.useMemo(()=>Vt(m)?m.get():m,[m]);return oe.createElement(t,{...h,children:y})}}function kb(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ey(n,e,t,r){if(typeof e=="function"){const[s,a]=kb(r);e=e(t!==void 0?t:n.custom,s,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,a]=kb(r);e=e(t!==void 0?t:n.custom,s,a)}return e}function vc(n){return Vt(n)?n.get():n}function TR({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:AR(t,r,s,n),renderState:e()}}const JE=n=>(e,t)=>{const r=oe.useContext(ad),s=oe.useContext(Ag),a=()=>TR(n,e,r,s);return t?a():YC(a)};function AR(n,e,t,r){const s={},a=r(n,{});for(const y in a)s[y]=vc(a[y]);let{initial:u,animate:l}=n;const d=ud(n),f=BE(n);e&&f&&!d&&n.inherit!==!1&&(u===void 0&&(u=e.initial),l===void 0&&(l=e.animate));let h=t?t.initial===!1:!1;h=h||u===!1;const m=h?l:u;if(m&&typeof m!="boolean"&&!od(m)){const y=Array.isArray(m)?m:[m];for(let v=0;v<y.length;v++){const w=ey(n,y[v]);if(w){const{transitionEnd:b,transition:S,...E}=w;for(const A in E){let T=E[A];if(Array.isArray(T)){const R=h?T.length-1:0;T=T[R]}T!==null&&(s[A]=T)}for(const A in b)s[A]=b[A]}}}return s}function ty(n,e,t){var a;const{style:r}=n,s={};for(const u in r)(Vt(r[u])||e.style&&Vt(e.style[u])||qE(u,n)||((a=t==null?void 0:t.getValue(u))==null?void 0:a.liveStyle)!==void 0)&&(s[u]=r[u]);return s}const PR={useVisualState:JE({scrapeMotionValuesFromProps:ty,createRenderState:Yg})};function XE(n,e,t){const r=ty(n,e,t);for(const s in n)if(Vt(n[s])||Vt(e[s])){const a=va.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=n[s]}return r}const CR={useVisualState:JE({scrapeMotionValuesFromProps:XE,createRenderState:GE})};function kR(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const u={...Qg(r)?CR:PR,preloadedFeatures:n,useRender:ER(s),createVisualElement:e,Component:r};return uR(u)}}function Xo(n,e,t){const r=n.getProps();return ey(r,e,t!==void 0?t:r.custom,n)}const Mm=n=>Array.isArray(n);function OR(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,la(t))}function RR(n){return Mm(n)?n[n.length-1]||0:n}function IR(n,e){const t=Xo(n,e);let{transitionEnd:r={},transition:s={},...a}=t||{};a={...a,...r};for(const u in a){const l=RR(a[u]);OR(n,u,l)}}function NR(n){return!!(Vt(n)&&n.add)}function Dm(n,e){const t=n.getValue("willChange");if(NR(t))return t.add(e);if(!t&&Vr.WillChange){const r=new Vr.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function YE(n){return n.props[VE]}const jR=n=>n!==null;function LR(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(jR),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}const $R={type:"spring",stiffness:500,damping:25,restSpeed:10},MR=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),DR={type:"keyframes",duration:.8},FR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UR=(n,{keyframes:e})=>e.length>2?DR:_a.has(n)?n.startsWith("scale")?MR(e[1]):$R:FR;function BR({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:u,repeatDelay:l,from:d,elapsed:f,...h}){return!!Object.keys(h).length}const ny=(n,e,t,r={},s,a)=>u=>{const l=Hg(r,n)||{},d=l.delay||r.delay||0;let{elapsed:f=0}=r;f=f-vr(d);const h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{u(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:a?void 0:s};BR(l)||Object.assign(h,UR(n,h)),h.duration&&(h.duration=vr(h.duration)),h.repeatDelay&&(h.repeatDelay=vr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(m=!0)),(Vr.instantAnimations||Vr.skipAnimations)&&(m=!0,h.duration=0,h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!a&&e.get()!==void 0){const y=LR(h.keyframes,l);if(y!==void 0){it.update(()=>{h.onUpdate(y),h.onComplete()});return}}return l.isSync?new Vg(h):new AO(h)};function VR({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function QE(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:u,...l}=e;r&&(a=r);const d=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const h in l){const m=n.getValue(h,n.latestValues[h]??null),y=l[h];if(y===void 0||f&&VR(f,h))continue;const v={delay:t,...Hg(a||{},h)},w=m.get();if(w!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===w&&!v.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const E=YE(n);if(E){const A=window.MotionHandoffAnimation(E,h,it);A!==null&&(v.startTime=A,b=!0)}}Dm(n,h),m.start(ny(h,m,y,n.shouldReduceMotion&&OE.has(h)?{type:!1}:v,n,b));const S=m.animation;S&&d.push(S)}return u&&Promise.all(d).then(()=>{it.update(()=>{u&&IR(n,u)})}),d}function Fm(n,e,t={}){var d;const r=Xo(n,e,t.type==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const a=r?()=>Promise.all(QE(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:y}=s;return zR(n,e,h+f,m,y,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[f,h]=l==="beforeChildren"?[a,u]:[u,a];return f().then(()=>h())}else return Promise.all([a(),u(t.delay)])}function zR(n,e,t=0,r=0,s=1,a){const u=[],l=(n.variantChildren.size-1)*r,d=s===1?(f=0)=>f*r:(f=0)=>l-f*r;return Array.from(n.variantChildren).sort(HR).forEach((f,h)=>{f.notify("AnimationStart",e),u.push(Fm(f,e,{...a,delay:t+d(h)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(u)}function HR(n,e){return n.sortNodePosition(e)}function qR(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>Fm(n,a,t));r=Promise.all(s)}else if(typeof e=="string")r=Fm(n,e,t);else{const s=typeof e=="function"?Xo(n,e,t.custom):e;r=Promise.all(QE(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function eT(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const WR=Kg.length;function tT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?tT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<WR;t++){const r=Kg[t],s=n.props[r];(Ko(s)||s===!1)&&(e[r]=s)}return e}const ZR=[...Gg].reverse(),GR=Gg.length;function KR(n){return e=>Promise.all(e.map(({animation:t,options:r})=>qR(n,t,r)))}function JR(n){let e=KR(n),t=Ob(),r=!0;const s=d=>(f,h)=>{var y;const m=Xo(n,h,d==="exit"?(y=n.presenceContext)==null?void 0:y.custom:void 0);if(m){const{transition:v,transitionEnd:w,...b}=m;f={...f,...b,...w}}return f};function a(d){e=d(n)}function u(d){const{props:f}=n,h=tT(n.parent)||{},m=[],y=new Set;let v={},w=1/0;for(let S=0;S<GR;S++){const E=ZR[S],A=t[E],T=f[E]!==void 0?f[E]:h[E],R=Ko(T),I=E===d?A.isActive:null;I===!1&&(w=S);let M=T===h[E]&&T!==f[E]&&R;if(M&&r&&n.manuallyAnimateOnMount&&(M=!1),A.protectedKeys={...v},!A.isActive&&I===null||!T&&!A.prevProp||od(T)||typeof T=="boolean")continue;const B=XR(A.prevProp,T);let U=B||E===d&&A.isActive&&!M&&R||S>w&&R,ie=!1;const de=Array.isArray(T)?T:[T];let ve=de.reduce(s(E),{});I===!1&&(ve={});const{prevResolvedValues:We={}}=A,Ze={...We,...ve},Y=Z=>{U=!0,y.has(Z)&&(ie=!0,y.delete(Z)),A.needsAnimating[Z]=!0;const D=n.getValue(Z);D&&(D.liveStyle=!1)};for(const Z in Ze){const D=ve[Z],z=We[Z];if(v.hasOwnProperty(Z))continue;let V=!1;Mm(D)&&Mm(z)?V=!eT(D,z):V=D!==z,V?D!=null?Y(Z):y.add(Z):D!==void 0&&y.has(Z)?Y(Z):A.protectedKeys[Z]=!0}A.prevProp=T,A.prevResolvedValues=ve,A.isActive&&(v={...v,...ve}),r&&n.blockInitialAnimation&&(U=!1),U&&(!(M&&B)||ie)&&m.push(...de.map(Z=>({animation:Z,options:{type:E}})))}if(y.size){const S={};if(typeof f.initial!="boolean"){const E=Xo(n,Array.isArray(f.initial)?f.initial[0]:f.initial);E&&E.transition&&(S.transition=E.transition)}y.forEach(E=>{const A=n.getBaseTarget(E),T=n.getValue(E);T&&(T.liveStyle=!0),S[E]=A??null}),m.push({animation:S})}let b=!!m.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(m):Promise.resolve()}function l(d,f){var m;if(t[d].isActive===f)return Promise.resolve();(m=n.variantChildren)==null||m.forEach(y=>{var v;return(v=y.animationState)==null?void 0:v.setActive(d,f)}),t[d].isActive=f;const h=u(d);for(const y in t)t[y].protectedKeys={};return h}return{animateChanges:u,setActive:l,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Ob(),r=!0}}}function XR(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!eT(e,n):!1}function Zs(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ob(){return{animate:Zs(!0),whileInView:Zs(),whileHover:Zs(),whileTap:Zs(),whileDrag:Zs(),whileFocus:Zs(),exit:Zs()}}class Rs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class YR extends Rs{constructor(e){super(e),e.animationState||(e.animationState=JR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();od(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let QR=0;class eI extends Rs{constructor(){super(...arguments),this.id=QR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const tI={animation:{Feature:YR},exit:{Feature:eI}};function Yo(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Su(n){return{point:{x:n.pageX,y:n.pageY}}}const nI=n=>e=>Zg(e)&&n(e,Su(e));function $o(n,e,t,r){return Yo(n,e,nI(t),r)}function nT({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function rI({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sI(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const rT=1e-4,iI=1-rT,aI=1+rT,sT=.01,oI=0-sT,uI=0+sT;function Kt(n){return n.max-n.min}function lI(n,e,t){return Math.abs(n-e)<=t}function Rb(n,e,t,r=.5){n.origin=r,n.originPoint=st(e.min,e.max,n.origin),n.scale=Kt(t)/Kt(e),n.translate=st(t.min,t.max,n.origin)-n.originPoint,(n.scale>=iI&&n.scale<=aI||isNaN(n.scale))&&(n.scale=1),(n.translate>=oI&&n.translate<=uI||isNaN(n.translate))&&(n.translate=0)}function Mo(n,e,t,r){Rb(n.x,e.x,t.x,r?r.originX:void 0),Rb(n.y,e.y,t.y,r?r.originY:void 0)}function Ib(n,e,t){n.min=t.min+e.min,n.max=n.min+Kt(e)}function cI(n,e,t){Ib(n.x,e.x,t.x),Ib(n.y,e.y,t.y)}function Nb(n,e,t){n.min=e.min-t.min,n.max=n.min+Kt(e)}function Do(n,e,t){Nb(n.x,e.x,t.x),Nb(n.y,e.y,t.y)}const jb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ji=()=>({x:jb(),y:jb()}),Lb=()=>({min:0,max:0}),dt=()=>({x:Lb(),y:Lb()});function Rn(n){return[n("x"),n("y")]}function Fh(n){return n===void 0||n===1}function Um({scale:n,scaleX:e,scaleY:t}){return!Fh(n)||!Fh(e)||!Fh(t)}function Js(n){return Um(n)||iT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function iT(n){return $b(n.x)||$b(n.y)}function $b(n){return n&&n!=="0%"}function Ic(n,e,t){const r=n-t,s=e*r;return t+s}function Mb(n,e,t,r,s){return s!==void 0&&(n=Ic(n,s,r)),Ic(n,t,r)+e}function Bm(n,e=0,t=1,r,s){n.min=Mb(n.min,e,t,r,s),n.max=Mb(n.max,e,t,r,s)}function aT(n,{x:e,y:t}){Bm(n.x,e.translate,e.scale,e.originPoint),Bm(n.y,t.translate,t.scale,t.originPoint)}const Db=.999999999999,Fb=1.0000000000001;function dI(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,u;for(let l=0;l<s;l++){a=t[l],u=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Yi(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,aT(n,u)),r&&Js(a.latestValues)&&Yi(n,a.latestValues))}e.x<Fb&&e.x>Db&&(e.x=1),e.y<Fb&&e.y>Db&&(e.y=1)}function Xi(n,e){n.min=n.min+e,n.max=n.max+e}function Ub(n,e,t,r,s=.5){const a=st(n.min,n.max,s);Bm(n,e,t,a,r)}function Yi(n,e){Ub(n.x,e.x,e.scaleX,e.scale,e.originX),Ub(n.y,e.y,e.scaleY,e.scale,e.originY)}function oT(n,e){return nT(sI(n.getBoundingClientRect(),e))}function fI(n,e,t){const r=oT(n,t),{scroll:s}=e;return s&&(Xi(r.x,s.offset.x),Xi(r.y,s.offset.y)),r}const uT=({current:n})=>n?n.ownerDocument.defaultView:null,Bb=(n,e)=>Math.abs(n-e);function hI(n,e){const t=Bb(n.x,e.x),r=Bb(n.y,e.y);return Math.sqrt(t**2+r**2)}class lT{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Bh(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,v=hI(m.offset,{x:0,y:0})>=3;if(!y&&!v)return;const{point:w}=m,{timestamp:b}=Ot;this.history.push({...w,timestamp:b});const{onStart:S,onMove:E}=this.handlers;y||(S&&S(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Uh(y,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Bh(m.type==="pointercancel"?this.lastMoveEventInfo:Uh(y,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,S),w&&w(m,S)},!Zg(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const u=Su(e),l=Uh(u,this.transformPagePoint),{point:d}=l,{timestamp:f}=Ot;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=t;h&&h(e,Bh(l,this.history)),this.removeListeners=wu($o(this.contextWindow,"pointermove",this.handlePointerMove),$o(this.contextWindow,"pointerup",this.handlePointerUp),$o(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xs(this.updatePoint)}}function Uh(n,e){return e?{point:e(n.point)}:n}function Vb(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Bh({point:n},e){return{point:n,delta:Vb(n,cT(e)),offset:Vb(n,pI(e)),velocity:mI(e,.1)}}function pI(n){return n[0]}function cT(n){return n[n.length-1]}function mI(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=cT(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>vr(e)));)t--;if(!r)return{x:0,y:0};const a=_r(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const u={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function gI(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?st(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?st(t,n,r.max):Math.min(n,t)),n}function zb(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function yI(n,{top:e,left:t,bottom:r,right:s}){return{x:zb(n.x,t,s),y:zb(n.y,e,r)}}function Hb(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function vI(n,e){return{x:Hb(n.x,e.x),y:Hb(n.y,e.y)}}function _I(n,e){let t=.5;const r=Kt(n),s=Kt(e);return s>r?t=Wo(e.min,e.max-r,n.min):r>s&&(t=Wo(n.min,n.max-s,e.min)),Br(0,1,t)}function wI(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Vm=.35;function bI(n=Vm){return n===!1?n=0:n===!0&&(n=Vm),{x:qb(n,"left","right"),y:qb(n,"top","bottom")}}function qb(n,e,t){return{min:Wb(n,e),max:Wb(n,t)}}function Wb(n,e){return typeof n=="number"?n:n[e]||0}const xI=new WeakMap;class SI{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Su(h).point)},a=(h,m)=>{const{drag:y,dragPropagation:v,onDragStart:w}=this.getProps();if(y&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VO(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rn(S=>{let E=this.getAxisMotionValue(S).get()||0;if(wr.test(E)){const{projection:A}=this.visualElement;if(A&&A.layout){const T=A.layout.layoutBox[S];T&&(E=Kt(T)*(parseFloat(E)/100))}}this.originPoint[S]=E}),w&&it.postRender(()=>w(h,m)),Dm(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},u=(h,m)=>{const{dragPropagation:y,dragDirectionLock:v,onDirectionLock:w,onDrag:b}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=m;if(v&&this.currentDirection===null){this.currentDirection=EI(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,S),this.updateAxis("y",m.point,S),this.visualElement.render(),b&&b(h,m)},l=(h,m)=>this.stop(h,m),d=()=>Rn(h=>{var m;return this.getAnimationState(h)==="paused"&&((m=this.getAxisMotionValue(h).animation)==null?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new lT(e,{onSessionStart:s,onStart:a,onMove:u,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:uT(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&it.postRender(()=>a(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Kl(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=gI(u,this.constraints[e],this.elastic[e])),a.set(u)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Ki(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=yI(r.layoutBox,e):this.constraints=!1,this.elastic=bI(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Rn(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=wI(r.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ki(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=fI(r,s.root,this.visualElement.getTransformPagePoint());let u=vI(s.layout.layoutBox,a);if(t){const l=t(rI(u));this.hasMutatedConstraints=!!l,l&&(u=nT(l))}return u}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:u,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},f=Rn(h=>{if(!Kl(h,t,this.currentDirection))return;let m=d&&d[h]||{};u&&(m={min:0,max:0});const y=s?200:1e6,v=s?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(h,w)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Dm(this.visualElement,e),r.start(ny(e,r,0,t,this.visualElement,!1))}stopAnimation(){Rn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Rn(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Rn(t=>{const{drag:r}=this.getProps();if(!Kl(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:u,max:l}=s.layout.layoutBox[t];a.set(e[t]-st(u,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ki(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Rn(u=>{const l=this.getAxisMotionValue(u);if(l&&this.constraints!==!1){const d=l.get();s[u]=_I({min:d,max:d},this.constraints[u])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rn(u=>{if(!Kl(u,e,null))return;const l=this.getAxisMotionValue(u),{min:d,max:f}=this.constraints[u];l.set(st(d,f,s[u]))})}addListeners(){if(!this.visualElement.current)return;xI.set(this.visualElement,this);const e=this.visualElement.current,t=$o(e,"pointerdown",d=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();Ki(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),it.read(r);const u=Yo(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Rn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=d[h].translate,m.set(m.get()+d[h].translate))}),this.visualElement.render())});return()=>{u(),t(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:u=Vm,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:u,dragMomentum:l}}}function Kl(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function EI(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class TI extends Rs{constructor(e){super(e),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new SI(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zb=n=>(e,t)=>{n&&it.postRender(()=>n(e,t))};class AI extends Rs{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(e){this.session=new lT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Zb(e),onStart:Zb(t),onMove:r,onEnd:(a,u)=>{delete this.session,s&&it.postRender(()=>s(a,u))}}}mount(){this.removePointerDownListener=$o(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const yo={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=Gb(n,e.target.x),r=Gb(n,e.target.y);return`${t}% ${r}%`}},PI={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ss.parse(n);if(s.length>5)return r;const a=Ss.createTransformer(n),u=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,d=t.y.scale*e.y;s[0+u]/=l,s[1+u]/=d;const f=st(l,d,.5);return typeof s[2+u]=="number"&&(s[2+u]/=f),typeof s[3+u]=="number"&&(s[3+u]/=f),a(s)}};class CI extends oe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;fR(kI),a&&(t.group&&t.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),_c.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:a}=this.props,{projection:u}=r;return u&&(u.isPresent=a,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?u.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?u.promote():u.relegate()||it.postRender(()=>{const l=u.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Wg.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dT(n){const[e,t]=ek(),r=oe.useContext(JS);return H.jsx(CI,{...n,layoutGroup:r,switchLayoutGroup:oe.useContext(zE),isPresent:e,safeToRemove:t})}const kI={borderRadius:{...yo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yo,borderTopRightRadius:yo,borderBottomLeftRadius:yo,borderBottomRightRadius:yo,boxShadow:PI};function OI(n,e,t){const r=Vt(n)?n:la(n);return r.start(ny("",r,e,t)),r.animation}function RI(n){return n instanceof SVGElement&&n.tagName!=="svg"}const II=(n,e)=>n.depth-e.depth;class NI{constructor(){this.children=[],this.isDirty=!1}add(e){Pg(this.children,e),this.isDirty=!0}remove(e){Cg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(II),this.isDirty=!1,this.children.forEach(e)}}function jI(n,e){const t=ln.now(),r=({timestamp:s})=>{const a=s-t;a>=e&&(xs(r),n(a-e))};return it.setup(r,!0),()=>xs(r)}const fT=["TopLeft","TopRight","BottomLeft","BottomRight"],LI=fT.length,Kb=n=>typeof n=="string"?parseFloat(n):n,Jb=n=>typeof n=="number"||we.test(n);function $I(n,e,t,r,s,a){s?(n.opacity=st(0,t.opacity??1,MI(r)),n.opacityExit=st(e.opacity??1,0,DI(r))):a&&(n.opacity=st(e.opacity??1,t.opacity??1,r));for(let u=0;u<LI;u++){const l=`border${fT[u]}Radius`;let d=Xb(e,l),f=Xb(t,l);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||Jb(d)===Jb(f)?(n[l]=Math.max(st(Kb(d),Kb(f),r),0),(wr.test(f)||wr.test(d))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=st(e.rotate||0,t.rotate||0,r))}function Xb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const MI=hT(0,.5,oE),DI=hT(.5,.95,Nn);function hT(n,e,t){return r=>r<n?0:r>e?1:t(Wo(n,e,r))}function Yb(n,e){n.min=e.min,n.max=e.max}function kn(n,e){Yb(n.x,e.x),Yb(n.y,e.y)}function Qb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function e0(n,e,t,r,s){return n-=e,n=Ic(n,1/t,r),s!==void 0&&(n=Ic(n,1/s,r)),n}function FI(n,e=0,t=1,r=.5,s,a=n,u=n){if(wr.test(e)&&(e=parseFloat(e),e=st(u.min,u.max,e/100)-u.min),typeof e!="number")return;let l=st(a.min,a.max,r);n===a&&(l-=e),n.min=e0(n.min,e,t,l,s),n.max=e0(n.max,e,t,l,s)}function t0(n,e,[t,r,s],a,u){FI(n,e[t],e[r],e[s],e.scale,a,u)}const UI=["x","scaleX","originX"],BI=["y","scaleY","originY"];function n0(n,e,t,r){t0(n.x,e,UI,t?t.x:void 0,r?r.x:void 0),t0(n.y,e,BI,t?t.y:void 0,r?r.y:void 0)}function r0(n){return n.translate===0&&n.scale===1}function pT(n){return r0(n.x)&&r0(n.y)}function s0(n,e){return n.min===e.min&&n.max===e.max}function VI(n,e){return s0(n.x,e.x)&&s0(n.y,e.y)}function i0(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function mT(n,e){return i0(n.x,e.x)&&i0(n.y,e.y)}function a0(n){return Kt(n.x)/Kt(n.y)}function o0(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class zI{constructor(){this.members=[]}add(e){Pg(this.members,e),e.scheduleRender()}remove(e){if(Cg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HI(n,e,t){let r="";const s=n.x.translate/e.x,a=n.y.translate/e.y,u=(t==null?void 0:t.z)||0;if((s||a||u)&&(r=`translate3d(${s}px, ${a}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:h,rotateX:m,rotateY:y,skewX:v,skewY:w}=t;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),y&&(r+=`rotateY(${y}deg) `),v&&(r+=`skewX(${v}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=n.x.scale*e.x,d=n.y.scale*e.y;return(l!==1||d!==1)&&(r+=`scale(${l}, ${d})`),r||"none"}const Vh=["","X","Y","Z"],qI={visibility:"hidden"},WI=1e3;let ZI=0;function zh(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function gT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=YE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",it,!(s||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&gT(r)}function yT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(u={},l=e==null?void 0:e()){this.id=ZI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JI),this.nodes.forEach(tN),this.nodes.forEach(nN),this.nodes.forEach(XI)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new NI)}addEventListener(u,l){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Rg),this.eventHandlers.get(u).add(l)}notifyListeners(u,...l){const d=this.eventHandlers.get(u);d&&d.notify(...l)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=RI(u),this.instance=u;const{layoutId:l,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),n){let h;const m=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=jI(m,250),_c.hasAnimatedSinceResize&&(_c.hasAnimatedSinceResize=!1,this.nodes.forEach(l0))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||oN,{onLayoutAnimationStart:b,onLayoutAnimationComplete:S}=f.getProps(),E=!this.targetLayout||!mT(this.targetLayout,v),A=!m&&y;if(this.options.layoutRoot||this.resumeFrom||A||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,A);const T={...Hg(w,"layout"),onPlay:b,onComplete:S};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else m||l0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rN),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(u0);return}this.isUpdating||this.nodes.forEach(QI),this.isUpdating=!1,this.nodes.forEach(eN),this.nodes.forEach(GI),this.nodes.forEach(KI),this.clearAllSnapshots();const l=ln.now();Ot.delta=Br(0,1e3/60,l-Ot.timestamp),Ot.timestamp=l,Ot.isProcessing=!0,jh.update.process(Ot),jh.preRender.process(Ot),jh.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Wg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YI),this.sharedNodes.forEach(sN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kt(this.snapshot.measuredBox.x)&&!Kt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(l=!1),l&&this.instance){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!pT(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;u&&this.instance&&(l||Js(this.latestValues)||h)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return u&&(d=this.removeTransform(d)),uN(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:u}=this.options;if(!u)return dt();const l=u.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(lN))){const{scroll:h}=this.root;h&&(Xi(l.x,h.offset.x),Xi(l.y,h.offset.y))}return l}removeElementScroll(u){var d;const l=dt();if(kn(l,u),(d=this.scroll)!=null&&d.wasRoot)return l;for(let f=0;f<this.path.length;f++){const h=this.path[f],{scroll:m,options:y}=h;h!==this.root&&m&&y.layoutScroll&&(m.wasRoot&&kn(l,u),Xi(l.x,m.offset.x),Xi(l.y,m.offset.y))}return l}applyTransform(u,l=!1){const d=dt();kn(d,u);for(let f=0;f<this.path.length;f++){const h=this.path[f];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Yi(d,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Js(h.latestValues)&&Yi(d,h.latestValues)}return Js(this.latestValues)&&Yi(d,this.latestValues),d}removeTransform(u){const l=dt();kn(l,u);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Js(f.latestValues))continue;Um(f.latestValues)&&f.updateSnapshot();const h=dt(),m=f.measurePageBox();kn(h,m),n0(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return Js(this.latestValues)&&n0(l,this.latestValues),l}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(u||d&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ot.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Do(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kn(this.target,this.layout.layoutBox),aT(this.target,this.targetDelta)):kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Do(this.relativeTargetOrigin,this.target,v.target),kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Um(this.parent.latestValues)||iT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var w;const u=this.getLead(),l=!!this.resumingFrom||this!==u;let d=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(d=!1),d)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;kn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;dI(this.layoutCorrected,this.treeScale,this.path,l),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=dt());const{target:v}=u;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qb(this.prevProjectionDelta.x,this.projectionDelta.x),Qb(this.prevProjectionDelta.y,this.projectionDelta.y)),Mo(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!o0(this.projectionDelta.x,this.prevProjectionDelta.x)||!o0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ji(),this.projectionDelta=Ji(),this.projectionDeltaWithTransform=Ji()}setAnimationOrigin(u,l=!1){const d=this.snapshot,f=d?d.latestValues:{},h={...this.latestValues},m=Ji();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=dt(),v=d?d.source:void 0,w=this.layout?this.layout.source:void 0,b=v!==w,S=this.getStack(),E=!S||S.members.length<=1,A=!!(b&&!E&&this.options.crossfade===!0&&!this.path.some(aN));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const I=R/1e3;c0(m.x,u.x,I),c0(m.y,u.y,I),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Do(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iN(this.relativeTarget,this.relativeTargetOrigin,y,I),T&&VI(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=dt()),kn(T,this.relativeTarget)),b&&(this.animationValues=h,$I(h,f,this.latestValues,I,A,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){var l,d,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(!1),(f=(d=this.resumingFrom)==null?void 0:d.currentAnimation)==null||f.stop(!1),this.pendingAnimation&&(xs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{_c.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=la(0)),this.currentAnimation=OI(this.motionValue,[0,1e3],{...u,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WI),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:l,target:d,layout:f,latestValues:h}=u;if(!(!l||!d||!f)){if(this!==u&&this.layout&&f&&vT(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||dt();const m=Kt(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+m;const y=Kt(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+y}kn(l,d),Yi(l,h),Mo(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(u,l){this.sharedNodes.has(u)||this.sharedNodes.set(u,new zI),this.sharedNodes.get(u).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:l,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let l=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const f={};d.z&&zh("z",u,f,this.animationValues);for(let h=0;h<Vh.length;h++)zh(`rotate${Vh[h]}`,u,f,this.animationValues),zh(`skew${Vh[h]}`,u,f,this.animationValues);u.render();for(const h in f)u.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);u.scheduleRender()}getProjectionStyles(u){if(!this.instance||this.isSVG)return;if(!this.isVisible)return qI;const l={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=vc(u==null?void 0:u.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=vc(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!Js(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=HI(this.projectionDeltaWithTransform,this.treeScale,h),d&&(l.transform=d(h,l.transform));const{x:m,y}=this.projectionDelta;l.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:l.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Jo){if(h[v]===void 0)continue;const{correct:w,applyTo:b,isCSSVariable:S}=Jo[v],E=l.transform==="none"?h[v]:w(h[v],f);if(b){const A=b.length;for(let T=0;T<A;T++)l[b[T]]=E}else S?this.options.visualElement.renderState.vars[v]=E:l[v]=E}return this.options.layoutId&&(l.pointerEvents=f===this?vc(u==null?void 0:u.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var l;return(l=u.currentAnimation)==null?void 0:l.stop(!1)}),this.root.nodes.forEach(u0),this.root.sharedNodes.clear()}}}function GI(n){n.updateLayout()}function KI(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:a}=n.options,u=e.source!==n.layout.source;a==="size"?Rn(m=>{const y=u?e.measuredBox[m]:e.layoutBox[m],v=Kt(y);y.min=r[m].min,y.max=y.min+v}):vT(a,e.layoutBox,r)&&Rn(m=>{const y=u?e.measuredBox[m]:e.layoutBox[m],v=Kt(r[m]);y.max=y.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+v)});const l=Ji();Mo(l,r,e.layoutBox);const d=Ji();u?Mo(d,n.applyTransform(s,!0),e.measuredBox):Mo(d,r,e.layoutBox);const f=!pT(l);let h=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:y,layout:v}=m;if(y&&v){const w=dt();Do(w,e.layoutBox,y.layoutBox);const b=dt();Do(b,r,v.layoutBox),mT(w,b)||(h=!0),m.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=w,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:d,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function JI(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XI(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function YI(n){n.clearSnapshot()}function u0(n){n.clearMeasurements()}function QI(n){n.isLayoutDirty=!1}function eN(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function l0(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function tN(n){n.resolveTargetDelta()}function nN(n){n.calcProjection()}function rN(n){n.resetSkewAndRotation()}function sN(n){n.removeLeadSnapshot()}function c0(n,e,t){n.translate=st(e.translate,0,t),n.scale=st(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function d0(n,e,t,r){n.min=st(e.min,t.min,r),n.max=st(e.max,t.max,r)}function iN(n,e,t,r){d0(n.x,e.x,t.x,r),d0(n.y,e.y,t.y,r)}function aN(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const oN={duration:.45,ease:[.4,0,.1,1]},f0=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),h0=f0("applewebkit/")&&!f0("chrome/")?Math.round:Nn;function p0(n){n.min=h0(n.min),n.max=h0(n.max)}function uN(n){p0(n.x),p0(n.y)}function vT(n,e,t){return n==="position"||n==="preserve-aspect"&&!lI(a0(e),a0(t),.2)}function lN(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const cN=yT({attachResizeListener:(n,e)=>Yo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hh={current:void 0},_T=yT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Hh.current){const n=new cN({});n.mount(window),n.setOptions({layoutScroll:!0}),Hh.current=n}return Hh.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),dN={pan:{Feature:AI},drag:{Feature:TI,ProjectionNode:_T,MeasureLayout:dT}};function m0(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=r[s];a&&it.postRender(()=>a(e,Su(e)))}class fN extends Rs{mount(){const{current:e}=this.node;e&&(this.unmount=zO(e,(t,r)=>(m0(this.node,r,"Start"),s=>m0(this.node,s,"End"))))}unmount(){}}class hN extends Rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wu(Yo(this.node.current,"focus",()=>this.onFocus()),Yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function g0(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=r[s];a&&it.postRender(()=>a(e,Su(e)))}class pN extends Rs{mount(){const{current:e}=this.node;e&&(this.unmount=ZO(e,(t,r)=>(g0(this.node,r,"Start"),(s,{success:a})=>g0(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zm=new WeakMap,qh=new WeakMap,mN=n=>{const e=zm.get(n.target);e&&e(n)},gN=n=>{n.forEach(mN)};function yN({root:n,...e}){const t=n||document;qh.has(t)||qh.set(t,{});const r=qh.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(gN,{root:n,...e})),r[s]}function vN(n,e,t){const r=yN(e);return zm.set(n,t),r.observe(n),()=>{zm.delete(n),r.unobserve(n)}}const _N={some:0,all:1};class wN extends Rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:a}=e,u={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:_N[s]},l=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),y=f?h:m;y&&y(d)};return vN(this.node.current,u,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(bN(e,t))&&this.startObserver()}unmount(){}}function bN({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const xN={inView:{Feature:wN},tap:{Feature:pN},focus:{Feature:hN},hover:{Feature:fN}},SN={layout:{ProjectionNode:_T,MeasureLayout:dT}},Hm={current:null},wT={current:!1};function EN(){if(wT.current=!0,!!Tg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Hm.current=n.matches;n.addListener(e),e()}else Hm.current=!1}const TN=new WeakMap;function AN(n,e,t){for(const r in e){const s=e[r],a=t[r];if(Vt(s))n.addValue(r,s);else if(Vt(a))n.addValue(r,la(s,{owner:n}));else if(a!==s)if(n.hasValue(r)){const u=n.getValue(r);u.liveStyle===!0?u.jump(s):u.hasAnimated||u.set(s)}else{const u=n.getStaticValue(r);n.addValue(r,la(u!==void 0?u:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const y0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PN{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:u},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=ln.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,it.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=u;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=ud(t),this.isVariantNode=BE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const v=m[y];d[y]!==void 0&&Vt(v)&&v.set(d[y],!1)}}mount(e){this.current=e,TN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),wT.current||EN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Hm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xs(this.notifyUpdate),xs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=_a.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&it.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a(),u&&u(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ca){const t=ca[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<y0.length;r++){const s=y0[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,u=e[a];u&&(this.propEventSubscriptions[s]=this.on(s,u))}this.prevMotionValues=AN(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=la(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(YS(r)||QS(r))?r=parseFloat(r):!KO(r)&&Ss.test(t)&&(r=jE(e,t)),this.setBaseTarget(e,Vt(r)?r.get():r)),Vt(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const u=ey(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);u&&(r=u[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Vt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Rg),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class bT extends PN{constructor(){super(...arguments),this.KeyframeResolver=DO}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Vt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function xT(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const a in t)n.style.setProperty(a,t[a])}function CN(n){return window.getComputedStyle(n)}class kN extends bT{constructor(){super(...arguments),this.type="html",this.renderInstance=xT}readValueFromInstance(e,t){if(_a.has(t))return rO(e,t);{const r=CN(e),s=(jg(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return oT(e,t)}build(e,t,r){Xg(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return ty(e,t,r)}}const ST=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ON(n,e,t,r){xT(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(ST.has(s)?s:Jg(s),e.attrs[s])}class RN extends bT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(_a.has(t)){const r=NE(t);return r&&r.default||0}return t=ST.has(t)?t:Jg(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return XE(e,t,r)}build(e,t,r){ZE(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){ON(e,t,r,s)}mount(e){this.isSVGTag=KE(e.tagName),super.mount(e)}}const IN=(n,e)=>Qg(n)?new RN(e):new kN(e,{allowProjection:n!==oe.Fragment}),NN=kR({...tI,...xN,...dN,...SN},IN),Dt=eR(NN);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),v0=n=>{const e=LN(n);return e.charAt(0).toUpperCase()+e.slice(1)},ET=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),$N=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=oe.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:u,...l},d)=>oe.createElement("svg",{ref:d,...MN,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:ET("lucide",s),...!a&&!$N(l)&&{"aria-hidden":"true"},...l},[...u.map(([f,h])=>oe.createElement(f,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=(n,e)=>{const t=oe.forwardRef(({className:r,...s},a)=>oe.createElement(DN,{ref:a,iconNode:e,className:ET(`lucide-${jN(v0(n))}`,`lucide-${n}`,r),...s}));return t.displayName=v0(n),t};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],BN=FN("quote",UN);var TT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_0=In.createContext&&In.createContext(TT),VN=["attr","size","title"];function zN(n,e){if(n==null)return{};var t=HN(n,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function HN(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Nc(){return Nc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nc.apply(this,arguments)}function w0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function jc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w0(Object(t),!0).forEach(function(r){qN(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function qN(n,e,t){return e=WN(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function WN(n){var e=ZN(n,"string");return typeof e=="symbol"?e:e+""}function ZN(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AT(n){return n&&n.map((e,t)=>In.createElement(e.tag,jc({key:t},e.attr),AT(e.child)))}function PT(n){return e=>In.createElement(GN,Nc({attr:jc({},n.attr)},e),AT(n.child))}function GN(n){var e=t=>{var{attr:r,size:s,title:a}=n,u=zN(n,VN),l=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),In.createElement("svg",Nc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:d,style:jc(jc({color:n.color||t.color},t.style),n.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&In.createElement("title",null,a),n.children)};return _0!==void 0?In.createElement(_0.Consumer,null,t=>e(t)):e(TT)}function KN(n){return PT({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(n)}function JN(n){return PT({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"},child:[]}]})(n)}const XN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMwAAADACAMAAAB/Pny7AAAAaVBMVEX///8dHRsAAAAYGBYaGhjd3d2hoaGYmJfQ0M8WFhMuLi2Pj48TEw62trYPDw3Hx8f4+Pjm5uYICAVCQkHs7OxiYmE8PDs3NzYnJyVra2q9vb1NTUx8fHtbW1tTU1HX19aFhYV0dHSrq6sev7G7AAAFk0lEQVR4nO2da5uqIBCAEcn1Uohk3jK7/P8feaxtT4lYihfweeb9uLu5vDEyFNOEEAAAAAAAAAAA+old1z3HukcxCfGtPCbJ8epEukcyHvdAMd1uKeaHUPdYxlLssW09IDjZ6R7NOMKEWv+haaF7PGMI928ud5sVR1roc6sBzVY7N2EiuFgWX+vchHssuqzWRupiWXiNNmEidalt/NXZdLqsMNI+uNxtVrWmhfvWOrZaGyFXtqHJaiLN/eayIpsw/Rhjz0hbx5rmyvNL+75ZgU1PlzrfmB9pvV1WYON+yi8tG7PvmwHz8rAx+b7p2FuuMtLcz3lfBjfVxj1+zZVt6N5IGyUXQ23c9mvkfhiYPQeuY+/g1NU9+ibuUeZCyPef3G0So2w6XKxM/FFm2abbyGOM8GuZNWaCWNeSSm3MibSz3AXn0c1qythOfOXSSDPFpiPGeB4hR5T5QVEutzFjhXaP0jUZnyIkk0FxLl33uAk2biXNlXjPkFwGsUpqQ4/abc7yvI/Tu4tcBiH56wS613zfdORKnP7+ukMGyR/F9a4CZ+m9b+Ej+/19lww6YeOyp9yF8OrvaLlThh061jRtNh35hR/+nyt3ytRrmln5ptNl8/9PumU6840em408xvCbyyeZ7ux5Xt4lOslXpHeXjzK1jXwVOG7E/zU7ZXfef/FRBsUH+fORL2tyP0j2ZC5Js0Tmswxi0ki1s6WLHy6yxI8z1vyrLzII+TIbXi6m8SA+SKIM+4LLdxnpzoaeli2Bik/tmfndWzb4LiPbddJq2QKotgzhx/bz+V2mvlJrhaanZWVYLoQZ4bIR9JBBUWtnww8LV9oFXnOYzfzyRx+ZdvZcegFAbup9d+kngzbNufGWP+m4vN+4/CTP2v1k6kh7vxheemKa6Rt3LT89ZRp7I1xpqE2Nc/y7CGxx5w3bVwbF1+fFKF44yTxhRYrvZLtWfvmjtwxi4fNiRefF5iYqdsWnJ7K/TE1cX8zkcuFBMqYDMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMqYCMvPAwqAsgzFn2VPKxLtLeflRrd8sKt+j1PaP6lWG08mwIMm2lJJUXqTzjR9CbXIfAMUX1SFMJsNOeHv/vBrxlFpWOPhVtoQDxTFMJvNWD879wTZh9l7qhxWLpqaSCRpVTx0lVJ2wxsMt6qsNYiIZ1qzjxLdhDz8nzRpMrFbUsmtWP9vZwGE8cQSZcljhUyjUtA59Mp4IfU62ip8xFyrT6X5YnBWijGJ8XBt1qTRXy1lC6xfbGvZJjp0oo7iehdlbnNmqrdqEUn2y1SNThzsZfxFTZJjzrFe0OA5UN0amyDwanjwY8bF/c2QQ2jhB4Iz5hI9JMqMBmRcgMxsg8wJkZgNkXoDMbIDMC5CZDZB5ATKzATIvQGY2QOYFyMwGyLxovXFukszQN87FIw1ezTTOXmTNDo+eP6wDkihDLI1fIFUI/XqGns+4RGh3SfXFGTsInVRwPuwcb3MSupd4w894p+LHFrqf4MuwMIlLsbeNp+srIxxL7Ao1+Ezy1mrUQ3G+fK8utquw2N91ePeTMN2KNgQvjoVxuyfU0Fvm0UmtdZX7Qf6yeEQyCIXDYmcru5ABeApHcJtKsc333NCBJQ2/U2MZOTWeUmFEbObUULXmR0Uma3qtGZoqtqYJZAuaXghWTt3y1pA6UazhecANs8GjWmwm0iakmvBGdj5jpa30DRkzQHjmjHKpbX7S1k5PC5TuJ9i2h9dMv46H08sk3YLjXU6wtB3xQtTbdf8STtXELSqCqt6Qc2qThfHo/ZXAyQmnfAuCbcJbWfnbpV/QZOnhcgujyVvrsTiKNosTxUxbk0AAAAAAAAAAAAAAAABgEP8ATMBggnodxMMAAAAASUVORK5CYII=",YN="/assets/trusted-CcGghIr6.jpg",QN="/assets/getpaid-DcWYYlby.png",ej="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAflBMVEX///8AAADh4eFfX1/z8/P8/Pzu7u6urq6np6fJycnk5OT6+vro6OihoaFsbGzS0tK9vb2RkZG1tbXKyspAQEDZ2dmampqKiop5eXlTU1N/f38vLy8mJia5ubk3NzceHh5XV1dLS0sTExNwcHBkZGRGRkZ6enosLCwZGRkMDAw4C2qIAAAMEElEQVR4nO2da3eqOhCGO6goigIq4BXR6m77///g4aaSSSbkrErArjxf3FutJpLM5c0kfHwYDAaDwWAwGAwGg8FgMBgMBoPBYDAYDAaDoS2sccakZF4QlQQlu64b+GuuIOftezgDKC5ddRXHJcuCo78EsLtu4W85wqfk1Qj+aWtJW6Swol8cAbj6mtIOQwDJqxNYaGtJW4yllgTA0taStjiDR784hoG+lrSEDT+SV08QamtJW0wgpl/0YauvJW2xll2lRGZm3wQXTvSLDiT6WvJybG+ZP0QQ0O9Zg6OrOa/F9oNtFm4Wkcxe4g08+NLWphfixfsqoM6dhCUbh1s4amvWq1h95l07bJaWXUYyAczJN4eyKdpL3OAn695gXMSZlZM4SKLOK4w1tew1eGnWvfQ4q/5bOokQ1uQfTKXxau9w1gCX6JnouXDIH2KYkH/yKRnAvcPL+pf49WcqJyHJbrOJOsoewnfwF+4g6x9qaFI4CU8SlO3K3yCFQe/zwwDg5KPnLNjnD/9oW5JljcPijRmSmKAHhAeAiHs2KJ8reyEkKLPGBcznmXvpcYIRZ/ZTMNVKJ+HQyd+snKFubk/tLACS5B+dYmcWZil4vnISn3TMEsEmf9iU13oMsO6l4OZQDSudxKi0lkJK/Smzp6X/zH+qHhrViBxcP8UQ9OFK/WmlP8XPD8iGe+/c4wYAm9AKD875w5V6/ePjUjiTWd0S+VAO3P6Q0irZrnASkkG6hDR/CBgVLnMc6asa9wrW8EV5Are8NBKp+1BkViMU8Qy/4EZOXO2sISEas7xBGcnQUrcPt/xhjn+C0VoSqGuGasowC3DgVETgEqk7Ke0mwFT1c7WzFTdklhlEWFT6Ly11r8q8XygG3/ohLy7gSzRE5/lS4GNm0VL3ubSxF5GlGu37sI4RCMPNPEDdPC2HTQ5Sr0wdV1lCIghHZ5fuA3FfMH8Kj32rXxNa6k6rQM+6CbMKl3SzunBF8ZW7B5QokVK39VzHyMLRhI/6nK5XFA+CH97nAtRKxRCwqAkb4nA0Iv9WCxuBsQv4AJWUul12fgrD0bTL+M0RWJksQOWyJFLq3qB8+SgoxZh1mGiIvnsA/JSrVAyeR770IAQ+unMkeVfLbHhvNRAZhkCgbBTEvIl1BV387GqchtwVyNoiEgxPhDmciVypzQ/UmWBcaCHhNItY2EFS6g6EoZzNi1nHblYWl1zDl+IkkZK6cb50x+K9/FooALXNDw41Q8LoUVI3ly/dcbg4KZQWOLTEBCcDo4vYoJBStzDeK+C9/ECy5NEW3IhcED3ZEVK3rHhmi62npX9pimufT0na1PMXiYHMEmYkCehfXjyg9s2oJMCBVPj8UZrd+nBhnwh1h6cONqQ7Sg6lpO69rPwrv2YolL1pLrYZoCs2JZddiJCL+4kQQ2yBfb01b1zOPqACM5/QIRqLZyL8h3qrh+cooAxJU0dI3RacXIuDmdrYmcRahf4E2RnSXc2IQWoLi9jT+ltwNa20GOfVuKh8ySUvISl1rwaI6xlPZTwsvzTqGXNk6GJSEUvVs9crnsoB+tRAY1xzRoOUNKTyqm4Gn3N4+I/DchFLBzP01bQhl1d1M3zz/m6ABgCfj7aFg2wAvTQorepmCAS/EvY0C21OP2BjRHpp0MaxF4kt8nYjNFbG2gTwM5tW4Ev6RFrVzTAQNv7KDlNL20IN+ml3ZAIurequsxJf7CX6hXSlUNNySfPBngqnaKkbcxDPZBs5+RuZM78WnzWQQ/gm3iit6q4zp4bfhXVDO03LNBHreVfkCr2sqrvOkFx9WbC2eKIpNN2w839Ofa2lWpq+IA3SnP0xHU3S8JadDRsqMCOlboRHq/YOux1xqsmYHtjJcaaG2EUxUt7TBW8uG6gNNUkZyGZfiCsgq+quM0Gmuc4IWTE97mKGtg1Q3yqr6mY+TmaP0IeftESmQ9ZJDamlsx811eFTGpzv2RmR0EW4L8RlR5VN5DSyqu4aggWsOmf2Z7ppSYJdtulTSIVvo6RuRCJ/W8ra7a2WHlq4h+LksFReDsl5sNjsgmgyPvqCTGrcIL4McA917BOeKvUwTJLDT+NxCY1rn1wPdQSmaJS6svk2mg1dK/QcfzmJgpi3urumIAUNSz2j1Gb9nK1cQMjrLFajLrFmLc1aiyqM3MNIOc7gbc+t0WUe2HBir8VbfKBsVTnO4BS5I+VKyQ+/6EmBUaCs6oVXeMKOoFGn4saLnh4m7GS4KkoVGyx2xM3FoyG7Zodz/rZAXQoU9+9iq0IvyD05spljSO/ZeCkxqyUc1QQ1btvTViFhj9lfT/Grfs2YzWynamI7XgvmVXwBSLeMNC3me2j+qE1/PEgvKgI2+uirsoT+O3CmPVD5XqzQi1R8Dg+96aTHHXJfNFERDdHahlDF50DraUNtW/Y/2QHmKthwvBacKqlUCRtoO9JDtF4JXiHZN8fDaC3YIVXkOlgzD7RVDVlIO4qaLwhaCiRUfAT+3ETfKVJIbLcbrwhazo0gVfmab3ZsDJXX6n7PBl2CbZPlXzJ5oK22h2KFHO1RYzE0XjGkatcesD/BVS00SdHveNVZs491+IN8hrCD1FMrh7XQ2MfVA+2yQD/vWB4SswULEhW/zhWlx0et+9i4YSkrFkUFCxO1OJYrJDvrLU7EgvZRsvjAFiwMFU8OvKF00tVc6o3rlTJfRXs4pmBBruI/8LHCQdddtQNXfhlKtu7UCxZk76vBKRzU1oX2WOAI6h8ZNDLH0PHbUIRwG4Hm2vfLWlycT+72rNf5Nan4FT53pX/0n/uZ4ovhUeOoVrCguIPJ5lS4CaT/r3kvgN/GEojlz2nt6X9qgdeesyqd7O26ckrSVpi31zIES0FeKz4ZL4UEmkQ2Fpdv7knkCb6eaWyzip+zgxOahIqh+suJOetpC3ac18qzFVT8j2IfMZ7Pg67OVeJVeYvvYu2sxGYVv3g/ZzX9zs7jc/iUNOQ2cn8/roiCil9s0sQdHHW41fnKz7usiwv2//flRRUVPwskeL+36MTMlIg2c7s/sK715FlVo6DiD9dw4UzKUl95t4CV4LpkzazlOY8kREHFzz7txnVmym3U00ssWuP+95yM3iMZbG5oLLzzw6Hr8+nOooA7M36n0mw+VrYbfbZ3Ega2A32bLAhmwt2/dlqdbnIfxW5D8mNnJmYgMEQxXDqchCVTwTkYH7mTyG3iY2Wb3L1XUBy4JMpM5vRuaI14IndVRTL3lW2B53zi7qgzPZdKMUL7+AIjUkUyd0P/TftsPz9xOBZ6ymPnBwzdGfNXkT3Qk1LxZ35xHnYkjgSO+KSiDhnjuVhFMpWsKkoNRlM/Xufdu1JXd9KjDhY/NxOwPA70LAZppeJPtps4mk/mUbxJy5Pafz590lLGYgvWGQ4wVfWX6kDPIkT1ytRgyNYp3nZLmZm89u4I0yxvuj2mE3ugZ7VY+Ak7z19OJpOlv7IaYnA76eEdZ/Jw9G7ay0imWkqpVHzvfyR5+XG2mmoS/hfPcLR+oOddxd+rHzGzg77e1ypzjF+5JLaCNP9vubJdqfhj2cIGAxGg9gP7XFzGMpIpB2ml4isf9TTKRsK5lydBV2SeEY7lMv+4GGqVir9RHHf53/fIC4oYLvK7WuT/2uaGZ1y6/oZdFXecL4BFH00Mi5cUrrpY2b4PzrXKhcnvGZH0ItJupLhxR7GyvSlV/GXzesxofADY99bCiMhXtqta/OZy5zBPoNZv1b9yCXVdCm07eT2aFX3lEfh7jM8n+cp2NTgtybKv7e/ynTXJvP/2BZOfYFMNzhskE8fFnRy5zvzzkMfg66h3IagCeVlhpeKHVTJxOi92QZTfHDfYLc6n6snNsc/uXUIEkf1Qi4er+eaGt3n9rDfz1fuNzQcJuFjFn7mh4y/zO+P6jue+cd8KLFg73Z5w3DYBRId+CIFtcYDFH7hpqgQLLn/g7tMy8rs+qJ0Y8a58g1It/vuS+/ieSYEvJu7ZXXBez6Xr+xm0jdf3+9/9ml0XR1Nrpcdy52vAW13+Hpv+ram8GPXjLt8Up7Pbbehi0HNR/tfM3vke90os/3Tem/PXx+jH6N0VJoPBYDAYDAaDwWAwGAwGg8FgMBgMBoPBYHhn/gNiPX39aozRqAAAAABJRU5ErkJggg==",tj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAeFBMVEX///8AAAC2trYaGhrY2NhfX19kZGSxsbGOjo78/Pzx8fHS0tIwMDBISEjFxcXj4+N2dnakpKRTU1Pg4OA7Ozvr6+s1NTWIiIjw8PCVlZXMzMxQUFBzc3O7u7vGxsapqakmJiYPDw8dHR2bm5t+fn5qamojIyNBQUGjxSU6AAAEw0lEQVR4nO2c2ZayOhBGiQM2iDjgbOPQavv+b3ioCiJI8OqnOVXr21ch9HJld6BSSQDPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAFKeg6xa0SxyZrpvQKuOHMZoNBwdjNBtOfWM0G26/jdFsGG6MUW24s2q3s1LDufXzV0edfTi6sNZi4Hk/Gg1je2Eu957ty4k2wxX7nWMqB1lpnWoz9LIY2u/Z4i2T2+szDM08LyWZ28HrqTN8QXfgVLMhqd08xYYUZkyg2ZCyUoo4ag3HHGY8xYaUzayooNWQZhZXLik1HFA2Y4tptDx32pZ2oGs06boRbULp2q7rRrTJ8XWN6iQ0nK4pZpEJnrpuRJtcaX7fdSPaZJDno2rhhHvfdSva5KB9oNg8E26t0KLMRfNNSCszZtB1K1qEh/pR161ok6VdmdGLXxvqVzkdNehfQ2H0txJljrp213i/qdJb4VOw31Wb/ilpPYweVBnuySSuVNEmacp5qgZDTrerMyZynnlaDKemlo1us5qICioMec/wbSBcPuOOBkMWvFfrvovbUoEhC/rVOho6vmxRviELDqt1+1J2I96Qg8yiXldkN9INE0cPBpdydiPccOwQ5DA6Lo5kGx4dUdQbVieJog1HJs9bymxeYZSRbMhP523ea7Mu/C4fCzacmWIXtIxvt+8LxBoGtDtRdbH4b0s1Ug2356a1bSWGPEpcnDtoOgxPJLgOnedUGM4cuXaBAsPtsj7fLSHfkFdk3pZkyog3/CK/n1qMSeen05xDq3DDcOK+Be3LFZzfyDaMWWReq7/bdVFOR0Ub3ox794yWfh8P+YYJpzHD2v5nGPEccSfe8Grqq75Eki8lfgk3nPIgGNXztPg5wxBueH3FSseJlEqiDZM1J9rj+pn7K/RINuRB3rV9vaUYE22LvxJquO/zFqCjA/eVhTaphqHfdAfaZZpXAi7U0EaYteuBZt7hPb6ORRoefxuyNC9/8668bS/QcMprTWa4dZ4lw8okX5xhaJPQc9ODlOIN7Q3ovkAZ4YYj6zdzrzUxog1T+wb2wvlKSDoc8gnBhnHEfpHzBrTDI43+Yg1jTkFNP3We7dmrV7Bhavuv4W2J1fMxLrGGvehjALXhNV5KNQzml49+Y85v7oEXyTTcfpmPfiFPBPsUfUQaJvm3ci5NbytdX4uFEg3jifWL3PEz+wO+fg95mi3PMM9fFk0J6ID/AZdCX56hRwLfja+02o2Y0k6TQMON2X3IP2m18F6eQAk0DJve4uH6zHBSqRVo2EBw5ZcI1BoGNEBQQalhYAdAKqo0DJ8JDh0oNFzdjNFsOMi3c+eJTsP4wXo/J/skM1cpMgznvENhlpyg6TOczqr5qT5De//dik1efYZZF/5eS01WaViZ/6o0rKxgwBCGBTD8M2BYAEMYdgYMC2AIw86AYQEMYdgZMCyA4f/W8Pa2TrPKDffvhuv84Xzz9g3PXb5TfH97/zkx5qeF9n4mWQzf8bOuefilCnp8lo4nWReU6/2LMQcqZOcrP5CZr7M/9M/ZD5VPHPIfyn/2b74QPTbd4XjmvwX2HRr+zcdbV6NeV4y0fGEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDW+A9JJUQmMzty7gAAAABJRU5ErkJggg==",nj="/assets/getvalidation-Dw44V0c2.jpg",rj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABHVBMVEX///8VfsIAAAD///3//v8Aa7oAAByqyeIPE0CPkZ7///yMjZoOE0IAaryZvd0OFELExcwAb7sAACgAABkAADEAABQAACAVfcMAd78RFEQAAC4OFT8AZLkAcr0AACsAADgAADSGs9icxOGGotCjvdwAAArb4+4UgMBxoc7x/Pu+v8Gjo6kAXrcIDUGAgYUsLTcAACPv8PDi4ubk8fXa29rO3e++z+TV7fJXi8RMf7/N4/QAVa+MuNofgcwAY690ntGxsLhkY218fHseHje31exAQFMSGT5MTlLW3vBNUF+Hs9UWFisUES3h4OYmJkKlqaaio69Zmc1Og8JhYWI5OUIeHihra3M2N0tSVFmcnKAQExrCxcN3dYBERUfO0NQjeq0kAAALMklEQVR4nO2cDVvayBbHh5kExxjKe14cQGiLqWiwQXSt63bB7W6v7Xa1t61bdlu//8e450zAVkHr60Pgnh/0WUkIO//MmXPOvIUxgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiAIgiCIZCKEAS/4r2UYQohpF+cBEAYosyxLMHgzY9rFeQAseGkEVqE13cI8CAZbW13d3tnZXt1am3ZZHoafGrtmpZKBl/misTft0twfltBGKXaCn003lQpSSJD/2dxZA99jWWzmfQ4IBN+5tVvxUJ6rBXqg06vs7lnCANudfYXgORcyXirGTbmui0LdlLfxyMLzs64QHOjafgWqzUVpMfA3/PN+efkrutRZ96pgiPsvocqCuAV61aoXC4XP7ssGWOmsK2TicSW2StetmLtPGo0nv2bMKup13WDjDWYAs4346aUW6Kby1f1VHQjF6uOUiRIDL1V5NfOxf23XiwVuPNmCyIHBAV5RowKuBs01szbr+dtCRTuWVH4BoyLkpjr1ttgeWCo6VbMx61bqxY5lY8GKA4OIAekZtN5fUt7WtIt4A2IJFrYs3bogmdnbQBcTZPbHOxPogdwglXkax3xtwZbQVpzYLEDnKBYGCGhpUa4HRxp5HSPctbHAbkELRRdbDeBWtPrdKMLQCF2rJPc8sBawqqzc+sFvTX7MxNYLbaOZR9j0zmOIV+hl3dTPcN0pbzZ/O1jPWWe/lEywnjrdo983Haf2h88jw1qt6Ewtv8XGqgU0u54bQEx8JVjnbajUspPe/P2oGyVXINBqv+bpUmgr37Y5qPhPRUeKXxn2Is4DXvVZHtQHlX2LRYcr0velvVJK89ft1lTKfjnGsIl1c4ec11ZAmy2V8mUTjj0y0UjNN5MSbCG28axbfQJ1drCibCll1gaVNc4P/+3qn05GbRroIaJWf7NcsrMoTikoqkpzKN6+iUYKnlSMl9UQ2xXthrTCZimrJFwNL+nb9fJmvxWJpHhV8C49zpfrPlSDrULp1+vP+duDAZTuTazw8YSiwlWr3xS21g/+5E6pruwwi0L9+jLnvYQIxFIslX3pS1Doh6pY/trvvYt0v+iNDhaVxxOKCge+KUQPbHR6/a/FogIjh+r0bb+8lBCFFtjpogPmBUWrN/lfRzntDYWhFWLGBgqho3/hMjDB7xSKeDQjyh39xZvgdWz4PWcJLDkZkVGwxTSUyXacg+PzxxvaSkHhxJ78mcJzGMcHbx34NT+9lJgRAFQIPsYZdM6b1e0UQq11jh1ojAlTKO0sPwVjvLtCQ+c42eQplD7PQRi3zh2/jUIMLDnuy2yyFBazWqFg96GQoUKVMIVp8KRaYVwiHEKEzJNB18LVCg1M00bor4D7XNUDHN6TOF8XQwuP6zB5VnpBoZ4/szCncTHis4mRbbUyVKh7JXrqjc2KQuw5rD19uvC+qruAz55OJO48ursL8Pfat6mpmVAIFrf1wjRNT/cAXS9vwusi5nAg3M3DN19sjfq9s6EQPP6rDT3oiwoDfAepy9Bf2VgQZ782CwqhYHHH6dqY+6N54blV+IgUThNS+H+kEBxq4Mbzh+48KvRSQdXMV/M4Y+FdPDkPCiEgVnZfbbGtV7uV0ZKF+VLoQsyD1MzCae+X7lxaqdkYLvcS1rPxk3Og0HPZWebJvHmsw3xjtO4ChD7Lz6HCzPao9wBtcTszhwor26OxDOhbzaVCc+FMIWMLY2fnQKGXisdjQMmalboY8udBoWsunE3xLlx0NHOhMOXl94aeZs+cy2iR+sWDpojs5725zGkCL8i/12e9fDCDmbeUqJBdVYcpt/pUn31WHTt1TiGOedtSOkuTBlmnwjUVuqn8jj7bMMe6h5MUpmdPYZCJFe5k5lVhaqTwmnW4mDiFPfYjK93WZ3fyP1LYSpZCKMZxExQ2j5kxzFouUWj+pM/uTRjC+aYw/j1b2uXjpGweghL1uFJZuOc/qMNqvNJyK5+6YiQKWSzaQ5tIBLiajUulCu2rszbX+298du3FVQrxN9oFpSR/x5Kx3ERHZWg3qt7WyyfjY5Pq0NsdXrI7FvAvKiwpKblxdsemy0ihXPkQjXKQSxS+H17y/sqsTYjowwrmSEyI5OxVwHvuFzujjxMVQtrWeIY0gjGB5zyN9c6xs9na8rTETOSgBK6h2T0biZnsaVLVGPeqdgiW3m1K266dTFPQGK20rez00ajZTFY42hf03QahSVZqsaOirWQ6WctMc7hOa/mQXREP3QDerlYXXDXmbQh2WJNwv3LTFDRG52Mo1cqmxS5XiHPe3rAOxwSej4eboZThx86l/7ep0Edfk+4NPwlL7FQuiricIAgqO9ao/lmvKKUs9aemZTLrTV/Zz9vGqC2Jrd2KmcnA+4eYZsas7K5Z1mhEvO1kpSqvT1POBCIO9z10om/radjCTcArhlYaOTY0ah5NT8xEjM/LtvSbvfiTJYwb58xnOxF7zay0lz8nIZs5xyCtpF0axTAcGtUJjnEdcMkX7omOrz1Zlko6g0QkbN8TfQqlHZZP79ThwZ3Pp2VcUP0paUYKN/ykIJX//AT+Mm579wXenpPnvpKFk6RtY4fidLkvbZ9jFLuLwg4m8T7vJk0hYPRLtsrWvrC7KGTsC5iCvdw3RpMcSSLHMRUpd++ksFuW9nBQK3kK2d+1rJT1zejWCsGtfoROSrb2972W6/7IpTFUF9dvffcNdgwZvExat+I7Tgq+VKp8+5S5+9aHvKFwkjgnM6JTtqER1fq3jWVGvwDXyzvcogdnCYxM+cWjW16+Dj1fpdLtJDqZEa9LUqqQv8MNyze6EL//jofQCEuvH6hs9wGkXI6dVX59s3PTxAYHXTfrEFBt5/SBSncP4I6JQRPS5mzhc3RDSzNY9LkGbko2B0zcOu17aPQmwsMaZl3gDm9opeLkOSQMduEQNzQmVyG8o826tJVfHtzw4kHZV1lV+hglVd03IO8Cjy95+7p7sfVm8DaHq5Qsdx+8fPdADyTidOLgbBfX1eDXBtzH3erF3kMX7n5Y0tmbXWyL67kbIdpFCDLSTtC89pVYxiL28SR0h6+V3IjoxPEl9i0X8clnD128O2Pg8yCwVYHE9IfrSIw+FH38OrTc24xgTQnwjJjc1KCvPmyMY0/+GI5SsS5f9vEZA8Wbet/pYmBb/ENlS84Ax20mBkc9wiYGTkmqP3AF1MxUn8ZiS1yG4G7CJvQ0Llm8ZQnW6TdDiIOhzReTMxl6HXDutleuYxbmFzZ78aEJ9DZ1j9Kul3vG7DRBBB+FxFr/lPBJJ36dtyc8VQc+R21e8uEmhMv/tLBRzlQlaqLfdWBUdoEPIp26CO1h9Fg4iwa8gPogDB7OUu19B+So7T/rNg68yPTrf43RWLHARMD493Ua0jR8Jo3Tjmb10YJgdrly2keNYKqfW3GiqhOd1mde97N6eUMxx6wEjo1eB3A3Fut8KdehU6ykKjmHrUhPu0WtQ6eU1W6oVPzSYUkc/L0WhsChCaPllEMwRui915tfj8E+j782V+ysfipUOd0SCVkWdGvwcRGDZiGEkACtLizzv3kZe7pQg2GhuW4kcmj7hoBjOf3i1NBrQrOT2D+G+lR+If2ly2bXQs8YTpSe9nnN9n18khdGeB8CSP+UWXHmNtvoJoaPger0P6VD3YcAEy1+6ncMbZ8zlchcxuh5nt1FzldCGa5wvtgdJt5JeejcvdE7KfLiQW/axXgosCKN7mnXSMxGkXsGxxrjJTOWSMba3/sGNRnnPs0fYiRyPo2UIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIAiCIIg54X+nYRG2gDtQagAAAABJRU5ErkJggg==",sj="/assets/ai_image-CW9plc54.jpg",qm="RFC3986",Wm={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:n=>String(n)},ij="RFC1738",aj=Array.isArray,fr=(()=>{const n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})(),Wh=1024,oj=(n,e,t,r,s)=>{if(n.length===0)return n;let a=n;if(typeof n=="symbol"?a=Symbol.prototype.toString.call(n):typeof n!="string"&&(a=String(n)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let u="";for(let l=0;l<a.length;l+=Wh){const d=a.length>=Wh?a.slice(l,l+Wh):a,f=[];for(let h=0;h<d.length;++h){let m=d.charCodeAt(h);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||s===ij&&(m===40||m===41)){f[f.length]=d.charAt(h);continue}if(m<128){f[f.length]=fr[m];continue}if(m<2048){f[f.length]=fr[192|m>>6]+fr[128|m&63];continue}if(m<55296||m>=57344){f[f.length]=fr[224|m>>12]+fr[128|m>>6&63]+fr[128|m&63];continue}h+=1,m=65536+((m&1023)<<10|d.charCodeAt(h)&1023),f[f.length]=fr[240|m>>18]+fr[128|m>>12&63]+fr[128|m>>6&63]+fr[128|m&63]}u+=f.join("")}return u};function uj(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function b0(n,e){if(aj(n)){const t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}const lj=Object.prototype.hasOwnProperty,CT={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},hr=Array.isArray,cj=Array.prototype.push,kT=function(n,e){cj.apply(n,hr(e)?e:[e])},dj=Date.prototype.toISOString,yt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:oj,encodeValuesOnly:!1,format:qm,formatter:Wm[qm],indices:!1,serializeDate(n){return dj.call(n)},skipNulls:!1,strictNullHandling:!1};function fj(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}const Zh={};function OT(n,e,t,r,s,a,u,l,d,f,h,m,y,v,w,b,S,E){let A=n,T=E,R=0,I=!1;for(;(T=T.get(Zh))!==void 0&&!I;){const de=T.get(n);if(R+=1,typeof de<"u"){if(de===R)throw new RangeError("Cyclic object value");I=!0}typeof T.get(Zh)>"u"&&(R=0)}if(typeof f=="function"?A=f(e,A):A instanceof Date?A=y==null?void 0:y(A):t==="comma"&&hr(A)&&(A=b0(A,function(de){return de instanceof Date?y==null?void 0:y(de):de})),A===null){if(a)return d&&!b?d(e,yt.encoder,S,"key",v):e;A=""}if(fj(A)||uj(A)){if(d){const de=b?e:d(e,yt.encoder,S,"key",v);return[(w==null?void 0:w(de))+"="+(w==null?void 0:w(d(A,yt.encoder,S,"value",v)))]}return[(w==null?void 0:w(e))+"="+(w==null?void 0:w(String(A)))]}const M=[];if(typeof A>"u")return M;let B;if(t==="comma"&&hr(A))b&&d&&(A=b0(A,d)),B=[{value:A.length>0?A.join(",")||null:void 0}];else if(hr(f))B=f;else{const de=Object.keys(A);B=h?de.sort(h):de}const U=l?String(e).replace(/\./g,"%2E"):String(e),ie=r&&hr(A)&&A.length===1?U+"[]":U;if(s&&hr(A)&&A.length===0)return ie+"[]";for(let de=0;de<B.length;++de){const ve=B[de],We=typeof ve=="object"&&typeof ve.value<"u"?ve.value:A[ve];if(u&&We===null)continue;const Ze=m&&l?ve.replace(/\./g,"%2E"):ve,Y=hr(A)?typeof t=="function"?t(ie,Ze):ie:ie+(m?"."+Ze:"["+Ze+"]");E.set(n,R);const J=new WeakMap;J.set(Zh,E),kT(M,OT(We,Y,t,r,s,a,u,l,t==="comma"&&b&&hr(A)?null:d,f,h,m,y,v,w,b,S,J))}return M}function hj(n=yt){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=n.charset||yt.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=qm;if(typeof n.format<"u"){if(!lj.call(Wm,n.format))throw new TypeError("Unknown format option provided.");t=n.format}const r=Wm[t];let s=yt.filter;(typeof n.filter=="function"||hr(n.filter))&&(s=n.filter);let a;if(n.arrayFormat&&n.arrayFormat in CT?a=n.arrayFormat:"indices"in n?a=n.indices?"indices":"repeat":a=yt.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:yt.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:yt.addQueryPrefix,allowDots:u,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:yt.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:yt.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?yt.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:yt.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:yt.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:yt.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:yt.encodeValuesOnly,filter:s,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:yt.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:yt.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:yt.strictNullHandling}}function pj(n,e={}){let t=n;const r=hj(e);let s,a;typeof r.filter=="function"?(a=r.filter,t=a("",t)):hr(r.filter)&&(a=r.filter,s=a);const u=[];if(typeof t!="object"||t===null)return"";const l=CT[r.arrayFormat],d=l==="comma"&&r.commaRoundTrip;s||(s=Object.keys(t)),r.sort&&s.sort(r.sort);const f=new WeakMap;for(let y=0;y<s.length;++y){const v=s[y];r.skipNulls&&t[v]===null||kT(u,OT(t[v],v,l,d,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,f))}const h=u.join(r.delimiter);let m=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),h.length>0?m+h:""}const qi="4.98.0";let x0=!1,Fo,RT,IT,Zm,NT,jT,LT,$T,MT;function mj(n,e={auto:!1}){if(x0)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(Fo)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${Fo}'\``);x0=e.auto,Fo=n.kind,RT=n.fetch,IT=n.FormData,Zm=n.File,NT=n.ReadableStream,jT=n.getMultipartRequestOptions,LT=n.getDefaultAgent,$T=n.fileFromPath,MT=n.isFsReadStream}class gj{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function yj({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,s,a;try{t=fetch,r=Request,s=Response,a=Headers}catch(u){throw new Error(`this environment is missing the following Web Fetch API type: ${u.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(u,l)=>({...l,body:new gj(u)}),getDefaultAgent:u=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:u=>!1}}const DT=()=>{Fo||mj(yj(),{auto:!0})};DT();class _e extends Error{}class It extends _e{constructor(e,t,r,s){super(`${It.makeMessage(e,t,r)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,r){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){if(!e||!s)return new ld({message:r,cause:Km(t)});const a=t==null?void 0:t.error;return e===400?new FT(e,a,r,s):e===401?new UT(e,a,r,s):e===403?new BT(e,a,r,s):e===404?new VT(e,a,r,s):e===409?new zT(e,a,r,s):e===422?new HT(e,a,r,s):e===429?new qT(e,a,r,s):e>=500?new WT(e,a,r,s):new It(e,a,r,s)}}class wn extends It{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ld extends It{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class cd extends ld{constructor({message:e}={}){super({message:e??"Request timed out."})}}class FT extends It{}class UT extends It{}class BT extends It{}class VT extends It{}class zT extends It{}class HT extends It{}class qT extends It{}class WT extends It{}class ZT extends _e{constructor(){super("Could not parse response content as the length limit was reached")}}class GT extends _e{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Jl=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Gs=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},gn;class dd{constructor(){gn.set(this,void 0),this.buffer=new Uint8Array,Jl(this,gn,null,"f")}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?new TextEncoder().encode(e):e;let r=new Uint8Array(this.buffer.length+t.length);r.set(this.buffer),r.set(t,this.buffer.length),this.buffer=r;const s=[];let a;for(;(a=vj(this.buffer,Gs(this,gn,"f")))!=null;){if(a.carriage&&Gs(this,gn,"f")==null){Jl(this,gn,a.index,"f");continue}if(Gs(this,gn,"f")!=null&&(a.index!==Gs(this,gn,"f")+1||a.carriage)){s.push(this.decodeText(this.buffer.slice(0,Gs(this,gn,"f")-1))),this.buffer=this.buffer.slice(Gs(this,gn,"f")),Jl(this,gn,null,"f");continue}const u=Gs(this,gn,"f")!==null?a.preceding-1:a.preceding,l=this.decodeText(this.buffer.slice(0,u));s.push(l),this.buffer=this.buffer.slice(a.index),Jl(this,gn,null,"f")}return s}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new _e(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new _e(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new _e("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode(`
`):[]}}gn=new WeakMap;dd.NEWLINE_CHARS=new Set([`
`,"\r"]);dd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function vj(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function _j(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}function KT(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class gr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;async function*s(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const u of wj(e,t))if(!a){if(u.data.startsWith("[DONE]")){a=!0;continue}if(u.event===null||u.event.startsWith("response.")||u.event.startsWith("transcript.")){let l;try{l=JSON.parse(u.data)}catch(d){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),d}if(l&&l.error)throw new It(void 0,l.error,void 0,nA(e.headers));yield l}else{let l;try{l=JSON.parse(u.data)}catch(d){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),d}if(u.event=="error")throw new It(void 0,l.error,l.message,void 0);yield{event:u.event,data:l}}}a=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{a||t.abort()}}return new gr(s,t)}static fromReadableStream(e,t){let r=!1;async function*s(){const u=new dd,l=KT(e);for await(const d of l)for(const f of u.decode(d))yield f;for(const d of u.flush())yield d}async function*a(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let u=!1;try{for await(const l of s())u||l&&(yield JSON.parse(l));u=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{u||t.abort()}}return new gr(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),s=a=>({next:()=>{if(a.length===0){const u=r.next();e.push(u),t.push(u)}return a.shift()}});return[new gr(()=>s(e),this.controller),new gr(()=>s(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new NT({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:u}=await t.next();if(u)return s.close();const l=r.encode(JSON.stringify(a)+`
`);s.enqueue(l)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*wj(n,e){if(!n.body)throw e.abort(),new _e("Attempted to iterate over a response with no body");const t=new xj,r=new dd,s=KT(n.body);for await(const a of bj(s))for(const u of r.decode(a)){const l=t.decode(u);l&&(yield l)}for(const a of r.flush()){const u=t.decode(a);u&&(yield u)}}async function*bj(n){let e=new Uint8Array;for await(const t of n){if(t==null)continue;const r=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let s=new Uint8Array(e.length+r.length);s.set(e),s.set(r,e.length),e=s;let a;for(;(a=_j(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}class xj{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,s]=Sj(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function Sj(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}const JT=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",XT=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&fd(n),fd=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Ej=n=>XT(n)||JT(n)||MT(n);async function YT(n,e,t){var s;if(n=await n,XT(n))return n;if(JT(n)){const a=await n.blob();e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file");const u=fd(a)?[await a.arrayBuffer()]:[a];return new Zm(u,e,t)}const r=await Tj(n);if(e||(e=Pj(n)??"unknown_file"),!(t!=null&&t.type)){const a=(s=r[0])==null?void 0:s.type;typeof a=="string"&&(t={...t,type:a})}return new Zm(r,e,t)}async function Tj(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(fd(n))e.push(await n.arrayBuffer());else if(Cj(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${Aj(n)}`);return e}function Aj(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function Pj(n){var e;return Gh(n.name)||Gh(n.filename)||((e=Gh(n.path))==null?void 0:e.split(/[\\/]/).pop())}const Gh=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},Cj=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",S0=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",da=async n=>{const e=await kj(n.body);return jT(e,n)},kj=async n=>{const e=new IT;return await Promise.all(Object.entries(n||{}).map(([t,r])=>Gm(e,t,r))),e},Gm=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(Ej(t)){const r=await YT(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>Gm(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,s])=>Gm(n,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var sa={},Oj=function(n,e,t,r,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},Rj=function(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Xl;DT();async function QT(n){var u;const{response:e}=n;if(n.options.stream)return vs("response",e.status,e.url,e.headers,e.body),n.options.__streamClass?n.options.__streamClass.fromSSEResponse(e,n.controller):gr.fromSSEResponse(e,n.controller);if(e.status===204)return null;if(n.options.__binaryResponse)return e;const t=e.headers.get("content-type"),r=(u=t==null?void 0:t.split(";")[0])==null?void 0:u.trim();if((r==null?void 0:r.includes("application/json"))||(r==null?void 0:r.endsWith("+json"))){const l=await e.json();return vs("response",e.status,e.url,e.headers,l),eA(l,e)}const a=await e.text();return vs("response",e.status,e.url,e.headers,a),a}function eA(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class hd extends Promise{constructor(e,t=QT){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new hd(this.responsePromise,async t=>eA(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Ij{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:s,fetch:a}){this.baseURL=e,this.maxRetries=Kh("maxRetries",t),this.timeout=Kh("timeout",r),this.httpAgent=s,this.fetch=a??RT}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Mj(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Bj()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(async s=>{const a=s&&fd(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:t,...s,body:a}}))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var b;const r={...e},{method:s,path:a,query:u,headers:l={}}=r,d=ArrayBuffer.isView(r.body)||r.__binaryRequest&&typeof r.body=="string"?r.body:S0(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,f=this.calculateContentLength(d),h=this.buildURL(a,u);"timeout"in r&&Kh("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const m=r.httpAgent??this.httpAgent??LT(h),y=r.timeout+1e3;typeof((b=m==null?void 0:m.options)==null?void 0:b.timeout)=="number"&&y>(m.options.timeout??0)&&(m.options.timeout=y),this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const v=this.buildHeaders({options:r,headers:l,contentLength:f,retryCount:t});return{req:{method:s,...d&&{body:d},headers:v,...m&&{agent:m},signal:r.signal??null},url:h,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:r,retryCount:s}){const a={};r&&(a["content-length"]=r);const u=this.defaultHeaders(e);return P0(a,u),P0(a,t),S0(e.body)&&Fo!=="node"&&delete a["content-type"],Ql(u,"x-stainless-retry-count")===void 0&&Ql(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),Ql(u,"x-stainless-timeout")===void 0&&Ql(t,"x-stainless-timeout")===void 0&&e.timeout&&(a["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,s){return It.generate(e,t,r,s)}request(e,t=null){return new hd(this.makeRequest(e,t))}async makeRequest(e,t){var m,y;const r=await e,s=r.maxRetries??this.maxRetries;t==null&&(t=s),await this.prepareOptions(r);const{req:a,url:u,timeout:l}=this.buildRequest(r,{retryCount:s-t});if(await this.prepareRequest(a,{url:u,options:r}),vs("request",u,r,a.headers),(m=r.signal)!=null&&m.aborted)throw new wn;const d=new AbortController,f=await this.fetchWithTimeout(u,a,l,d).catch(Km);if(f instanceof Error){if((y=r.signal)!=null&&y.aborted)throw new wn;if(t)return this.retryRequest(r,t);throw f.name==="AbortError"?new cd:new ld({cause:f})}const h=nA(f.headers);if(!f.ok){if(t&&this.shouldRetry(f)){const A=`retrying, ${t} attempts remaining`;return vs(`response (error; ${A})`,f.status,u,h),this.retryRequest(r,t,h)}const v=await f.text().catch(A=>Km(A).message),w=Dj(v),b=w?void 0:v;throw vs(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,f.status,u,h,b),this.makeStatusError(f.status,w,b,h)}return{response:f,options:r,controller:d}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new Nj(this,r,e)}buildURL(e,t){const r=Uj(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return rA(s)||(t={...s,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new _e(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,s){const{signal:a,...u}=t||{};a&&a.addEventListener("abort",()=>s.abort());const l=setTimeout(()=>s.abort(),r),d={signal:s.signal,...u};return d.method&&(d.method=d.method.toUpperCase()),this.fetch.call(void 0,e,d).finally(()=>{clearTimeout(l)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let s;const a=r==null?void 0:r["retry-after-ms"];if(a){const l=parseFloat(a);Number.isNaN(l)||(s=l)}const u=r==null?void 0:r["retry-after"];if(u&&!s){const l=parseFloat(u);Number.isNaN(l)?s=Date.parse(u)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){const l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,l)}return await Eu(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),l=1-Math.random()*.25;return u*l*1e3}getUserAgent(){return`${this.constructor.name}/JS ${qi}`}}class tA{constructor(e,t,r,s){Xl.set(this,void 0),Oj(this,Xl,e),this.options=s,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new _e("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[s,a]of r)e.url.searchParams.set(s,a);t.query=void 0,t.path=e.url.toString()}return await Rj(this,Xl,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Xl=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Nj extends hd{constructor(e,t,r){super(t,async s=>new r(e,s.response,await QT(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const nA=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),jj={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},ut=n=>typeof n=="object"&&n!==null&&!rA(n)&&Object.keys(n).every(e=>sA(jj,e)),Lj=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":T0(Deno.build.os),"X-Stainless-Arch":E0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":T0(process.platform),"X-Stainless-Arch":E0(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=$j();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function $j(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const s=r[1]||0,a=r[2]||0,u=r[3]||0;return{browser:e,version:`${s}.${a}.${u}`}}}return null}const E0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",T0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let A0;const Mj=()=>A0??(A0=Lj()),Dj=n=>{try{return JSON.parse(n)}catch{return}},Fj=/^[a-z][a-z0-9+.-]*:/i,Uj=n=>Fj.test(n),Eu=n=>new Promise(e=>setTimeout(e,n)),Kh=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new _e(`${n} must be an integer`);if(e<0)throw new _e(`${n} must be a positive integer`);return e},Km=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null)try{return new Error(JSON.stringify(n))}catch{}return new Error(n)},Yl=n=>{var e,t,r,s;if(typeof process<"u")return((e=sa==null?void 0:sa[n])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(r=(t=Deno.env)==null?void 0:t.get)==null?void 0:r.call(t,n))==null?void 0:s.trim()};function rA(n){if(!n)return!0;for(const e in n)return!1;return!0}function sA(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function P0(n,e){for(const t in e){if(!sA(e,t))continue;const r=t.toLowerCase();if(!r)continue;const s=e[t];s===null?delete n[r]:s!==void 0&&(n[r]=s)}}const C0=new Set(["authorization","api-key"]);function vs(n,...e){if(typeof process<"u"&&(sa==null?void 0:sa.DEBUG)==="true"){const t=e.map(r=>{if(!r)return r;if(r.headers){const a={...r,headers:{...r.headers}};for(const u in r.headers)C0.has(u.toLowerCase())&&(a.headers[u]="REDACTED");return a}let s=null;for(const a in r)C0.has(a.toLowerCase())&&(s??(s={...r}),s[a]="REDACTED");return s??r});console.log(`OpenAI:DEBUG:${n}`,...t)}}const Bj=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),Vj=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",zj=n=>typeof(n==null?void 0:n.get)=="function",Ql=(n,e)=>{var r;const t=e.toLowerCase();if(zj(n)){const s=((r=e[0])==null?void 0:r.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,u,l)=>u+l.toUpperCase());for(const a of[e,t,e.toUpperCase(),s]){const u=n.get(a);if(u)return u}}for(const[s,a]of Object.entries(n))if(s.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a},Hj=n=>{if(typeof Buffer<"u"){const e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(n),t=e.length,r=new Uint8Array(t);for(let s=0;s<t;s++)r[s]=e.charCodeAt(s);return Array.from(new Float32Array(r.buffer))}};function Jh(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}class pd extends tA{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Nt extends tA{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var r;const e=this.getPaginatedItems();if(!e.length)return null;const t=(r=e[e.length-1])==null?void 0:r.id;return t?{params:{after:t}}:null}}class Se{constructor(e){this._client=e}}let iA=class extends Se{list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,qj,{query:t,...r})}},md=class extends Se{constructor(){super(...arguments),this.messages=new iA(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/chat/completions",gd,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class gd extends Nt{}class qj extends Nt{}md.ChatCompletionsPage=gd;md.Messages=iA;let yd=class extends Se{constructor(){super(...arguments),this.completions=new md(this._client)}};yd.Completions=md;yd.ChatCompletionsPage=gd;class aA extends Se{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class oA extends Se{create(e,t){return this._client.post("/audio/transcriptions",da({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class uA extends Se{create(e,t){return this._client.post("/audio/translations",da({body:e,...t,__metadata:{model:e.model}}))}}class Tu extends Se{constructor(){super(...arguments),this.transcriptions=new oA(this._client),this.translations=new uA(this._client),this.speech=new aA(this._client)}}Tu.Transcriptions=oA;Tu.Translations=uA;Tu.Speech=aA;class ry extends Se{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/batches",sy,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class sy extends Nt{}ry.BatchesPage=sy;var Gn=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},nt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Jm,wc,bc,To,Ao,xc,Po,$r,Co,Lc,$c,Wi,lA;class iy{constructor(){Jm.add(this),this.controller=new AbortController,wc.set(this,void 0),bc.set(this,()=>{}),To.set(this,()=>{}),Ao.set(this,void 0),xc.set(this,()=>{}),Po.set(this,()=>{}),$r.set(this,{}),Co.set(this,!1),Lc.set(this,!1),$c.set(this,!1),Wi.set(this,!1),Gn(this,wc,new Promise((e,t)=>{Gn(this,bc,e,"f"),Gn(this,To,t,"f")}),"f"),Gn(this,Ao,new Promise((e,t)=>{Gn(this,xc,e,"f"),Gn(this,Po,t,"f")}),"f"),nt(this,wc,"f").catch(()=>{}),nt(this,Ao,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},nt(this,Jm,"m",lA).bind(this))},0)}_connected(){this.ended||(nt(this,bc,"f").call(this),this._emit("connect"))}get ended(){return nt(this,Co,"f")}get errored(){return nt(this,Lc,"f")}get aborted(){return nt(this,$c,"f")}abort(){this.controller.abort()}on(e,t){return(nt(this,$r,"f")[e]||(nt(this,$r,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=nt(this,$r,"f")[e];if(!r)return this;const s=r.findIndex(a=>a.listener===t);return s>=0&&r.splice(s,1),this}once(e,t){return(nt(this,$r,"f")[e]||(nt(this,$r,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Gn(this,Wi,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}async done(){Gn(this,Wi,!0,"f"),await nt(this,Ao,"f")}_emit(e,...t){if(nt(this,Co,"f"))return;e==="end"&&(Gn(this,Co,!0,"f"),nt(this,xc,"f").call(this));const r=nt(this,$r,"f")[e];if(r&&(nt(this,$r,"f")[e]=r.filter(s=>!s.once),r.forEach(({listener:s})=>s(...t))),e==="abort"){const s=t[0];!nt(this,Wi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),nt(this,To,"f").call(this,s),nt(this,Po,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=t[0];!nt(this,Wi,"f")&&!(r!=null&&r.length)&&Promise.reject(s),nt(this,To,"f").call(this,s),nt(this,Po,"f").call(this,s),this._emit("end")}}_emitFinal(){}}wc=new WeakMap,bc=new WeakMap,To=new WeakMap,Ao=new WeakMap,xc=new WeakMap,Po=new WeakMap,$r=new WeakMap,Co=new WeakMap,Lc=new WeakMap,$c=new WeakMap,Wi=new WeakMap,Jm=new WeakSet,lA=function(e){if(Gn(this,Lc,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new wn),e instanceof wn)return Gn(this,$c,!0,"f"),this._emit("abort",e);if(e instanceof _e)return this._emit("error",e);if(e instanceof Error){const t=new _e(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new _e(String(e)))};var me=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},mn=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},Rt,Xm,pr,Sc,Kn,ei,Qi,Xs,Mc,vn,Ec,Tc,Uo,ko,Oo,k0,O0,R0,I0,N0,j0,L0;class Jn extends iy{constructor(){super(...arguments),Rt.add(this),Xm.set(this,[]),pr.set(this,{}),Sc.set(this,{}),Kn.set(this,void 0),ei.set(this,void 0),Qi.set(this,void 0),Xs.set(this,void 0),Mc.set(this,void 0),vn.set(this,void 0),Ec.set(this,void 0),Tc.set(this,void 0),Uo.set(this,void 0)}[(Xm=new WeakMap,pr=new WeakMap,Sc=new WeakMap,Kn=new WeakMap,ei=new WeakMap,Qi=new WeakMap,Xs=new WeakMap,Mc=new WeakMap,vn=new WeakMap,Ec=new WeakMap,Tc=new WeakMap,Uo=new WeakMap,Rt=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Jn;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=gr.fromReadableStream(e,this.controller);for await(const u of s)me(this,Rt,"m",ko).call(this,u);if((a=s.controller.signal)!=null&&a.aborted)throw new wn;return this._addRun(me(this,Rt,"m",Oo).call(this))}toReadableStream(){return new gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,s,a){const u=new Jn;return u._run(()=>u._runToolAssistantStream(e,t,r,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(e,t,r,s,a){var f;const u=a==null?void 0:a.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const l={...s,stream:!0},d=await e.submitToolOutputs(t,r,l,{...a,signal:this.controller.signal});this._connected();for await(const h of d)me(this,Rt,"m",ko).call(this,h);if((f=d.controller.signal)!=null&&f.aborted)throw new wn;return this._addRun(me(this,Rt,"m",Oo).call(this))}static createThreadAssistantStream(e,t,r){const s=new Jn;return s._run(()=>s._threadAssistantStream(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,t,r,s){const a=new Jn;return a._run(()=>a._runAssistantStream(e,t,r,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return me(this,Ec,"f")}currentRun(){return me(this,Tc,"f")}currentMessageSnapshot(){return me(this,Kn,"f")}currentRunStepSnapshot(){return me(this,Uo,"f")}async finalRunSteps(){return await this.done(),Object.values(me(this,pr,"f"))}async finalMessages(){return await this.done(),Object.values(me(this,Sc,"f"))}async finalRun(){if(await this.done(),!me(this,ei,"f"))throw Error("Final run was not received.");return me(this,ei,"f")}async _createThreadAssistantStream(e,t,r){var l;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},u=await e.createAndRun(a,{...r,signal:this.controller.signal});this._connected();for await(const d of u)me(this,Rt,"m",ko).call(this,d);if((l=u.controller.signal)!=null&&l.aborted)throw new wn;return this._addRun(me(this,Rt,"m",Oo).call(this))}async _createAssistantStream(e,t,r,s){var d;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const u={...r,stream:!0},l=await e.create(t,u,{...s,signal:this.controller.signal});this._connected();for await(const f of l)me(this,Rt,"m",ko).call(this,f);if((d=l.controller.signal)!=null&&d.aborted)throw new wn;return this._addRun(me(this,Rt,"m",Oo).call(this))}static accumulateDelta(e,t){for(const[r,s]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=s;continue}let a=e[r];if(a==null){e[r]=s;continue}if(r==="index"||r==="type"){e[r]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(Jh(a)&&Jh(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(u=>typeof u=="string"||typeof u=="number")){a.push(...s);continue}for(const u of s){if(!Jh(u))throw new Error(`Expected array delta entry to be an object but got: ${u}`);const l=u.index;if(l==null)throw console.error(u),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const d=a[l];d==null?a.push(u):a[l]=this.accumulateDelta(d,u)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${s}, accValue: ${a}`);e[r]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,s){return await this._createAssistantStream(t,e,r,s)}async _runToolAssistantStream(e,t,r,s,a){return await this._createToolAssistantStream(r,e,t,s,a)}}ko=function(e){if(!this.ended)switch(mn(this,Ec,e,"f"),me(this,Rt,"m",R0).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":me(this,Rt,"m",L0).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":me(this,Rt,"m",O0).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":me(this,Rt,"m",k0).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Oo=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");if(!me(this,ei,"f"))throw Error("Final run has not been received");return me(this,ei,"f")},k0=function(e){const[t,r]=me(this,Rt,"m",N0).call(this,e,me(this,Kn,"f"));mn(this,Kn,t,"f"),me(this,Sc,"f")[t.id]=t;for(const s of r){const a=t.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,u=t.content[s.index];if(u&&u.type=="text")this._emit("textDelta",a,u.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=me(this,Qi,"f")){if(me(this,Xs,"f"))switch(me(this,Xs,"f").type){case"text":this._emit("textDone",me(this,Xs,"f").text,me(this,Kn,"f"));break;case"image_file":this._emit("imageFileDone",me(this,Xs,"f").image_file,me(this,Kn,"f"));break}mn(this,Qi,s.index,"f")}mn(this,Xs,t.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(me(this,Qi,"f")!==void 0){const s=e.data.content[me(this,Qi,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,me(this,Kn,"f"));break;case"text":this._emit("textDone",s.text,me(this,Kn,"f"));break}}me(this,Kn,"f")&&this._emit("messageDone",e.data),mn(this,Kn,void 0,"f")}},O0=function(e){const t=me(this,Rt,"m",I0).call(this,e);switch(mn(this,Uo,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of r.step_details.tool_calls)a.index==me(this,Mc,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(me(this,vn,"f")&&this._emit("toolCallDone",me(this,vn,"f")),mn(this,Mc,a.index,"f"),mn(this,vn,t.step_details.tool_calls[a.index],"f"),me(this,vn,"f")&&this._emit("toolCallCreated",me(this,vn,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":mn(this,Uo,void 0,"f"),e.data.step_details.type=="tool_calls"&&me(this,vn,"f")&&(this._emit("toolCallDone",me(this,vn,"f")),mn(this,vn,void 0,"f")),this._emit("runStepDone",e.data,t);break}},R0=function(e){me(this,Xm,"f").push(e),this._emit("event",e)},I0=function(e){switch(e.event){case"thread.run.step.created":return me(this,pr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=me(this,pr,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const s=Jn.accumulateDelta(t,r.delta);me(this,pr,"f")[e.data.id]=s}return me(this,pr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":me(this,pr,"f")[e.data.id]=e.data;break}if(me(this,pr,"f")[e.data.id])return me(this,pr,"f")[e.data.id];throw new Error("No snapshot available")},N0=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in t.content){let u=t.content[a.index];t.content[a.index]=me(this,Rt,"m",j0).call(this,a,u)}else t.content[a.index]=a,r.push(a);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},j0=function(e,t){return Jn.accumulateDelta(t,e)},L0=function(e){switch(mn(this,Tc,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":mn(this,ei,e.data,"f"),me(this,vn,"f")&&(this._emit("toolCallDone",me(this,vn,"f")),mn(this,vn,void 0,"f"));break}};class ay extends Se{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/assistants",oy,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class oy extends Nt{}ay.AssistantsPage=oy;function $0(n){return typeof n.parse=="function"}const ia=n=>(n==null?void 0:n.role)==="assistant",cA=n=>(n==null?void 0:n.role)==="function",dA=n=>(n==null?void 0:n.role)==="tool";function Wj(n,e){const t={...n};return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function uy(n){return(n==null?void 0:n.$brand)==="auto-parseable-response-format"}function Au(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function Zj(n,e){return!e||!fA(e)?{...n,choices:n.choices.map(t=>({...t,message:{...t.message,parsed:null,...t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0}}))}:ly(n,e)}function ly(n,e){const t=n.choices.map(r=>{var s;if(r.finish_reason==="length")throw new ZT;if(r.finish_reason==="content_filter")throw new GT;return{...r,message:{...r.message,...r.message.tool_calls?{tool_calls:((s=r.message.tool_calls)==null?void 0:s.map(a=>Kj(e,a)))??void 0}:void 0,parsed:r.message.content&&!r.message.refusal?Gj(e,r.message.content):null}}});return{...n,choices:t}}function Gj(n,e){var t,r;return((t=n.response_format)==null?void 0:t.type)!=="json_schema"?null:((r=n.response_format)==null?void 0:r.type)==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Kj(n,e){var r;const t=(r=n.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:Au(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function Jj(n,e){var r;if(!n)return!1;const t=(r=n.tools)==null?void 0:r.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return Au(t)||(t==null?void 0:t.function.strict)||!1}function fA(n){var e;return uy(n.response_format)?!0:((e=n.tools)==null?void 0:e.some(t=>Au(t)||t.type==="function"&&t.function.strict===!0))??!1}function Xj(n){for(const e of n??[]){if(e.type!=="function")throw new _e(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new _e(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var on=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Ft,Ym,Dc,Qm,eg,tg,hA,ng;const M0=10;class pA extends iy{constructor(){super(...arguments),Ft.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var r;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(r=e.choices[0])==null?void 0:r.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(cA(e)||dA(e))&&e.content)this._emit("functionCallResult",e.content);else if(ia(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ia(e)&&e.tool_calls)for(const r of e.tool_calls)r.type==="function"&&this._emit("functionCall",r.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new _e("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),on(this,Ft,"m",Ym).call(this)}async finalMessage(){return await this.done(),on(this,Ft,"m",Dc).call(this)}async finalFunctionCall(){return await this.done(),on(this,Ft,"m",Qm).call(this)}async finalFunctionCallResult(){return await this.done(),on(this,Ft,"m",eg).call(this)}async totalUsage(){return await this.done(),on(this,Ft,"m",tg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=on(this,Ft,"m",Dc).call(this);t&&this._emit("finalMessage",t);const r=on(this,Ft,"m",Ym).call(this);r&&this._emit("finalContent",r);const s=on(this,Ft,"m",Qm).call(this);s&&this._emit("finalFunctionCall",s);const a=on(this,Ft,"m",eg).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(u=>u.usage)&&this._emit("totalUsage",on(this,Ft,"m",tg).call(this))}async _createChatCompletion(e,t,r){const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),on(this,Ft,"m",hA).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(ly(a,t))}async _runChatCompletion(e,t,r){for(const s of t.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){var y;const s="function",{function_call:a="auto",stream:u,...l}=t,d=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:f=M0}=r||{},h={};for(const v of t.functions)h[v.name||v.function.name]=v;const m=t.functions.map(v=>({name:v.name||v.function.name,parameters:v.parameters,description:v.description}));for(const v of t.messages)this._addMessage(v,!1);for(let v=0;v<f;++v){const b=(y=(await this._createChatCompletion(e,{...l,function_call:a,functions:m,messages:[...this.messages]},r)).choices[0])==null?void 0:y.message;if(!b)throw new _e("missing message in ChatCompletion response");if(!b.function_call)return;const{name:S,arguments:E}=b.function_call,A=h[S];if(A){if(d&&d!==S){const M=`Invalid function_call: ${JSON.stringify(S)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:s,name:S,content:M});continue}}else{const M=`Invalid function_call: ${JSON.stringify(S)}. Available options are: ${m.map(B=>JSON.stringify(B.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:S,content:M});continue}let T;try{T=$0(A)?await A.parse(E):E}catch(M){this._addMessage({role:s,name:S,content:M instanceof Error?M.message:String(M)});continue}const R=await A.function(T,this),I=on(this,Ft,"m",ng).call(this,R);if(this._addMessage({role:s,name:S,content:I}),d)return}}async _runTools(e,t,r){var v,w,b;const s="tool",{tool_choice:a="auto",stream:u,...l}=t,d=typeof a!="string"&&((v=a==null?void 0:a.function)==null?void 0:v.name),{maxChatCompletions:f=M0}=r||{},h=t.tools.map(S=>{if(Au(S)){if(!S.$callback)throw new _e("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:S.$callback,name:S.function.name,description:S.function.description||"",parameters:S.function.parameters,parse:S.$parseRaw,strict:!0}}}return S}),m={};for(const S of h)S.type==="function"&&(m[S.function.name||S.function.function.name]=S.function);const y="tools"in t?h.map(S=>S.type==="function"?{type:"function",function:{name:S.function.name||S.function.function.name,parameters:S.function.parameters,description:S.function.description,strict:S.function.strict}}:S):void 0;for(const S of t.messages)this._addMessage(S,!1);for(let S=0;S<f;++S){const A=(w=(await this._createChatCompletion(e,{...l,tool_choice:a,tools:y,messages:[...this.messages]},r)).choices[0])==null?void 0:w.message;if(!A)throw new _e("missing message in ChatCompletion response");if(!((b=A.tool_calls)!=null&&b.length))return;for(const T of A.tool_calls){if(T.type!=="function")continue;const R=T.id,{name:I,arguments:M}=T.function,B=m[I];if(B){if(d&&d!==I){const ve=`Invalid tool_call: ${JSON.stringify(I)}. ${JSON.stringify(d)} requested. Please try again`;this._addMessage({role:s,tool_call_id:R,content:ve});continue}}else{const ve=`Invalid tool_call: ${JSON.stringify(I)}. Available options are: ${Object.keys(m).map(We=>JSON.stringify(We)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:R,content:ve});continue}let U;try{U=$0(B)?await B.parse(M):M}catch(ve){const We=ve instanceof Error?ve.message:String(ve);this._addMessage({role:s,tool_call_id:R,content:We});continue}const ie=await B.function(U,this),de=on(this,Ft,"m",ng).call(this,ie);if(this._addMessage({role:s,tool_call_id:R,content:de}),d)return}}}}Ft=new WeakSet,Ym=function(){return on(this,Ft,"m",Dc).call(this).content??null},Dc=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ia(t)){const{function_call:r,...s}=t,a={...s,content:t.content??null,refusal:t.refusal??null};return r&&(a.function_call=r),a}}throw new _e("stream ended without producing a ChatCompletionMessage with role=assistant")},Qm=function(){var e,t;for(let r=this.messages.length-1;r>=0;r--){const s=this.messages[r];if(ia(s)&&(s!=null&&s.function_call))return s.function_call;if(ia(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(t=s.tool_calls.at(-1))==null?void 0:t.function}},eg=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(cA(t)&&t.content!=null||dA(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>{var s;return r.role==="assistant"&&((s=r.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},tg=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},hA=function(e){if(e.n!=null&&e.n>1)throw new _e("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ng=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Qo extends pA{static runFunctions(e,t,r){const s=new Qo,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,r){const s=new Qo,a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}_addMessage(e,t=!0){super._addMessage(e,t),ia(e)&&e.content&&this._emit("content",e.content)}}const mA=1,gA=2,yA=4,vA=8,_A=16,wA=32,bA=64,xA=128,SA=256,EA=xA|SA,TA=_A|wA|EA|bA,AA=mA|gA|TA,PA=yA|vA,Yj=AA|PA,St={STR:mA,NUM:gA,ARR:yA,OBJ:vA,NULL:_A,BOOL:wA,NAN:bA,INFINITY:xA,MINUS_INFINITY:SA,INF:EA,SPECIAL:TA,ATOM:AA,COLLECTION:PA,ALL:Yj};class Qj extends Error{}class eL extends Error{}function tL(n,e=St.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return nL(n.trim(),e)}const nL=(n,e)=>{const t=n.length;let r=0;const s=y=>{throw new Qj(`${y} at position ${r}`)},a=y=>{throw new eL(`${y} at position ${r}`)},u=()=>(m(),r>=t&&s("Unexpected end of input"),n[r]==='"'?l():n[r]==="{"?d():n[r]==="["?f():n.substring(r,r+4)==="null"||St.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||St.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||St.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||St.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||St.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||St.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):h()),l=()=>{const y=r;let v=!1;for(r++;r<t&&(n[r]!=='"'||v&&n[r-1]==="\\");)v=n[r]==="\\"?!v:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(y,++r-Number(v)))}catch(w){a(String(w))}else if(St.STR&e)try{return JSON.parse(n.substring(y,r-Number(v))+'"')}catch{return JSON.parse(n.substring(y,n.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},d=()=>{r++,m();const y={};try{for(;n[r]!=="}";){if(m(),r>=t&&St.OBJ&e)return y;const v=l();m(),r++;try{const w=u();Object.defineProperty(y,v,{value:w,writable:!0,enumerable:!0,configurable:!0})}catch(w){if(St.OBJ&e)return y;throw w}m(),n[r]===","&&r++}}catch{if(St.OBJ&e)return y;s("Expected '}' at end of object")}return r++,y},f=()=>{r++;const y=[];try{for(;n[r]!=="]";)y.push(u()),m(),n[r]===","&&r++}catch{if(St.ARR&e)return y;s("Expected ']' at end of array")}return r++,y},h=()=>{if(r===0){n==="-"&&St.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n)}catch(v){if(St.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}a(String(v))}}const y=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(St.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(n.substring(y,r))}catch{n.substring(y,r)==="-"&&St.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(n.substring(y,n.lastIndexOf("e")))}catch(w){a(String(w))}}},m=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return u()},D0=n=>tL(n,St.ALL^St.NUM);var Fi=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},qe=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},gt,Nr,Ui,cs,Xh,ec,Yh,Qh,ep,tc,tp,F0;class eu extends pA{constructor(e){super(),gt.add(this),Nr.set(this,void 0),Ui.set(this,void 0),cs.set(this,void 0),Fi(this,Nr,e,"f"),Fi(this,Ui,[],"f")}get currentChatCompletionSnapshot(){return qe(this,cs,"f")}static fromReadableStream(e){const t=new eu(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const s=new eu(t);return s._run(()=>s._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,t,r){var u;super._createChatCompletion;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),qe(this,gt,"m",Xh).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)qe(this,gt,"m",Yh).call(this,l);if((u=a.controller.signal)!=null&&u.aborted)throw new wn;return this._addChatCompletion(qe(this,gt,"m",tc).call(this))}async _fromReadableStream(e,t){var u;const r=t==null?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),qe(this,gt,"m",Xh).call(this),this._connected();const s=gr.fromReadableStream(e,this.controller);let a;for await(const l of s)a&&a!==l.id&&this._addChatCompletion(qe(this,gt,"m",tc).call(this)),qe(this,gt,"m",Yh).call(this,l),a=l.id;if((u=s.controller.signal)!=null&&u.aborted)throw new wn;return this._addChatCompletion(qe(this,gt,"m",tc).call(this))}[(Nr=new WeakMap,Ui=new WeakMap,cs=new WeakMap,gt=new WeakSet,Xh=function(){this.ended||Fi(this,cs,void 0,"f")},ec=function(t){let r=qe(this,Ui,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},qe(this,Ui,"f")[t.index]=r,r)},Yh=function(t){var s,a,u,l,d,f,h,m,y,v,w,b,S,E,A;if(this.ended)return;const r=qe(this,gt,"m",F0).call(this,t);this._emit("chunk",t,r);for(const T of t.choices){const R=r.choices[T.index];T.delta.content!=null&&((s=R.message)==null?void 0:s.role)==="assistant"&&((a=R.message)!=null&&a.content)&&(this._emit("content",T.delta.content,R.message.content),this._emit("content.delta",{delta:T.delta.content,snapshot:R.message.content,parsed:R.message.parsed})),T.delta.refusal!=null&&((u=R.message)==null?void 0:u.role)==="assistant"&&((l=R.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:T.delta.refusal,snapshot:R.message.refusal}),((d=T.logprobs)==null?void 0:d.content)!=null&&((f=R.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(h=T.logprobs)==null?void 0:h.content,snapshot:((m=R.logprobs)==null?void 0:m.content)??[]}),((y=T.logprobs)==null?void 0:y.refusal)!=null&&((v=R.message)==null?void 0:v.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(w=T.logprobs)==null?void 0:w.refusal,snapshot:((b=R.logprobs)==null?void 0:b.refusal)??[]});const I=qe(this,gt,"m",ec).call(this,R);R.finish_reason&&(qe(this,gt,"m",ep).call(this,R),I.current_tool_call_index!=null&&qe(this,gt,"m",Qh).call(this,R,I.current_tool_call_index));for(const M of T.delta.tool_calls??[])I.current_tool_call_index!==M.index&&(qe(this,gt,"m",ep).call(this,R),I.current_tool_call_index!=null&&qe(this,gt,"m",Qh).call(this,R,I.current_tool_call_index)),I.current_tool_call_index=M.index;for(const M of T.delta.tool_calls??[]){const B=(S=R.message.tool_calls)==null?void 0:S[M.index];B!=null&&B.type&&((B==null?void 0:B.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(E=B.function)==null?void 0:E.name,index:M.index,arguments:B.function.arguments,parsed_arguments:B.function.parsed_arguments,arguments_delta:((A=M.function)==null?void 0:A.arguments)??""}):(B==null||B.type,void 0))}}},Qh=function(t,r){var u,l,d;if(qe(this,gt,"m",ec).call(this,t).done_tool_calls.has(r))return;const a=(u=t.message.tool_calls)==null?void 0:u[r];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const f=(d=(l=qe(this,Nr,"f"))==null?void 0:l.tools)==null?void 0:d.find(h=>h.type==="function"&&h.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:r,arguments:a.function.arguments,parsed_arguments:Au(f)?f.$parseRaw(a.function.arguments):f!=null&&f.function.strict?JSON.parse(a.function.arguments):null})}else a.type},ep=function(t){var s,a;const r=qe(this,gt,"m",ec).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;const u=qe(this,gt,"m",tp).call(this);this._emit("content.done",{content:t.message.content,parsed:u?u.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(s=t.logprobs)!=null&&s.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},tc=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");const t=qe(this,cs,"f");if(!t)throw new _e("request ended without sending any chunks");return Fi(this,cs,void 0,"f"),Fi(this,Ui,[],"f"),rL(t,qe(this,Nr,"f"))},tp=function(){var r;const t=(r=qe(this,Nr,"f"))==null?void 0:r.response_format;return uy(t)?t:null},F0=function(t){var r,s,a,u;let l=qe(this,cs,"f");const{choices:d,...f}=t;l?Object.assign(l,f):l=Fi(this,cs,{...f,choices:[]},"f");for(const{delta:h,finish_reason:m,index:y,logprobs:v=null,...w}of t.choices){let b=l.choices[y];if(b||(b=l.choices[y]={finish_reason:m,index:y,message:{},logprobs:v,...w}),v)if(!b.logprobs)b.logprobs=Object.assign({},v);else{const{content:M,refusal:B,...U}=v;Object.assign(b.logprobs,U),M&&((r=b.logprobs).content??(r.content=[]),b.logprobs.content.push(...M)),B&&((s=b.logprobs).refusal??(s.refusal=[]),b.logprobs.refusal.push(...B))}if(m&&(b.finish_reason=m,qe(this,Nr,"f")&&fA(qe(this,Nr,"f")))){if(m==="length")throw new ZT;if(m==="content_filter")throw new GT}if(Object.assign(b,w),!h)continue;const{content:S,refusal:E,function_call:A,role:T,tool_calls:R,...I}=h;if(Object.assign(b.message,I),E&&(b.message.refusal=(b.message.refusal||"")+E),T&&(b.message.role=T),A&&(b.message.function_call?(A.name&&(b.message.function_call.name=A.name),A.arguments&&((a=b.message.function_call).arguments??(a.arguments=""),b.message.function_call.arguments+=A.arguments)):b.message.function_call=A),S&&(b.message.content=(b.message.content||"")+S,!b.message.refusal&&qe(this,gt,"m",tp).call(this)&&(b.message.parsed=D0(b.message.content))),R){b.message.tool_calls||(b.message.tool_calls=[]);for(const{index:M,id:B,type:U,function:ie,...de}of R){const ve=(u=b.message.tool_calls)[M]??(u[M]={});Object.assign(ve,de),B&&(ve.id=B),U&&(ve.type=U),ie&&(ve.function??(ve.function={name:ie.name??"",arguments:""})),ie!=null&&ie.name&&(ve.function.name=ie.name),ie!=null&&ie.arguments&&(ve.function.arguments+=ie.arguments,Jj(qe(this,Nr,"f"),ve)&&(ve.function.parsed_arguments=D0(ve.function.arguments)))}}}return l},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new gr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function rL(n,e){const{id:t,choices:r,created:s,model:a,system_fingerprint:u,...l}=n,d={...l,id:t,choices:r.map(({message:f,finish_reason:h,index:m,logprobs:y,...v})=>{if(!h)throw new _e(`missing finish_reason for choice ${m}`);const{content:w=null,function_call:b,tool_calls:S,...E}=f,A=f.role;if(!A)throw new _e(`missing role for choice ${m}`);if(b){const{arguments:T,name:R}=b;if(T==null)throw new _e(`missing function_call.arguments for choice ${m}`);if(!R)throw new _e(`missing function_call.name for choice ${m}`);return{...v,message:{content:w,function_call:{arguments:T,name:R},role:A,refusal:f.refusal??null},finish_reason:h,index:m,logprobs:y}}return S?{...v,index:m,finish_reason:h,logprobs:y,message:{...E,role:A,content:w,refusal:f.refusal??null,tool_calls:S.map((T,R)=>{const{function:I,type:M,id:B,...U}=T,{arguments:ie,name:de,...ve}=I||{};if(B==null)throw new _e(`missing choices[${m}].tool_calls[${R}].id
${nc(n)}`);if(M==null)throw new _e(`missing choices[${m}].tool_calls[${R}].type
${nc(n)}`);if(de==null)throw new _e(`missing choices[${m}].tool_calls[${R}].function.name
${nc(n)}`);if(ie==null)throw new _e(`missing choices[${m}].tool_calls[${R}].function.arguments
${nc(n)}`);return{...U,id:B,type:M,function:{...ve,name:de,arguments:ie}}})}}:{...v,message:{...E,content:w,role:A,refusal:f.refusal??null},finish_reason:h,index:m,logprobs:y}}),created:s,model:a,object:"chat.completion",...u?{system_fingerprint:u}:{}};return Zj(d,e)}function nc(n){return JSON.stringify(n)}class aa extends eu{static fromReadableStream(e){const t=new aa(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){const s=new aa(null),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,r){const s=new aa(t),a={...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}}let CA=class extends Se{parse(e,t){return Xj(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(r=>ly(r,e))}runFunctions(e,t){return e.stream?aa.runFunctions(this._client,e,t):Qo.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?aa.runTools(this._client,e,t):Qo.runTools(this._client,e,t)}stream(e,t){return eu.createChatCompletion(this._client,e,t)}};class rg extends Se{constructor(){super(...arguments),this.completions=new CA(this._client)}}(function(n){n.Completions=CA})(rg||(rg={}));class kA extends Se{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class OA extends Se{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class vd extends Se{constructor(){super(...arguments),this.sessions=new kA(this._client),this.transcriptionSessions=new OA(this._client)}}vd.Sessions=kA;vd.TranscriptionSessions=OA;class cy extends Se{create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,dy,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class dy extends Nt{}cy.MessagesPage=dy;class fy extends Se{retrieve(e,t,r,s={},a){return ut(s)?this.retrieve(e,t,r,{},s):this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,r={},s){return ut(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,hy,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class hy extends Nt{}fy.RunStepsPage=hy;let Pu=class extends Se{constructor(){super(...arguments),this.steps=new fy(this._client)}create(e,t,r){const{include:s,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:a,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers},stream:t.stream??!1})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,py,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t,r);return await this.poll(e,s.id,r)}createAndStream(e,t,r){return Jn.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:u}=await this.retrieve(e,t,{...r,headers:{...r==null?void 0:r.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const d=u.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(l=f)}}await Eu(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,r){return Jn.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r,s){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:r.stream??!1})}async submitToolOutputsAndPoll(e,t,r,s){const a=await this.submitToolOutputs(e,t,r,s);return await this.poll(e,a.id,s)}submitToolOutputsStream(e,t,r,s){return Jn.createToolAssistantStream(e,t,this._client.beta.threads.runs,r,s)}};class py extends Nt{}Pu.RunsPage=py;Pu.Steps=fy;Pu.RunStepsPage=hy;class wa extends Se{constructor(){super(...arguments),this.runs=new Pu(this._client),this.messages=new cy(this._client)}create(e={},t){return ut(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.thread_id,r.id,t)}createAndRunStream(e,t){return Jn.createThreadAssistantStream(e,this._client.beta.threads,t)}}wa.Runs=Pu;wa.RunsPage=py;wa.Messages=cy;wa.MessagesPage=dy;class ba extends Se{constructor(){super(...arguments),this.realtime=new vd(this._client),this.chat=new rg(this._client),this.assistants=new ay(this._client),this.threads=new wa(this._client)}}ba.Realtime=vd;ba.Assistants=ay;ba.AssistantsPage=oy;ba.Threads=wa;class RA extends Se{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class IA extends Se{create(e,t){const r=!!e.encoding_format;let s=r?e.encoding_format:"base64";r&&vs("Request","User defined encoding_format:",e.encoding_format);const a=this._client.post("/embeddings",{body:{...e,encoding_format:s},...t});return r?a:(vs("response","Decoding base64 embeddings to float32 array"),a._thenUnwrap(u=>(u&&u.data&&u.data.forEach(l=>{const d=l.embedding;l.embedding=Hj(d)}),u)))}}class my extends Se{retrieve(e,t,r,s){return this._client.get(`/evals/${e}/runs/${t}/output_items/${r}`,s)}list(e,t,r={},s){return ut(r)?this.list(e,t,{},r):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,gy,{query:r,...s})}}class gy extends Nt{}my.OutputItemListResponsesPage=gy;class Cu extends Se{constructor(){super(...arguments),this.outputItems=new my(this._client)}create(e,t,r){return this._client.post(`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){return this._client.get(`/evals/${e}/runs/${t}`,r)}list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,yy,{query:t,...r})}del(e,t,r){return this._client.delete(`/evals/${e}/runs/${t}`,r)}cancel(e,t,r){return this._client.post(`/evals/${e}/runs/${t}`,r)}}class yy extends Nt{}Cu.RunListResponsesPage=yy;Cu.OutputItems=my;Cu.OutputItemListResponsesPage=gy;class ku extends Se{constructor(){super(...arguments),this.runs=new Cu(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,r){return this._client.post(`/evals/${e}`,{body:t,...r})}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/evals",vy,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class vy extends Nt{}ku.EvalListResponsesPage=vy;ku.Runs=Cu;ku.RunListResponsesPage=yy;let _y=class extends Se{create(e,t){return this._client.post("/files",da({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/files",wy,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let u=await this.retrieve(e);for(;!u.status||!s.has(u.status);)if(await Eu(t),u=await this.retrieve(e),Date.now()-a>r)throw new cd({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return u}};class wy extends Nt{}_y.FileObjectsPage=wy;class NA extends Se{}let jA=class extends Se{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class by extends Se{constructor(){super(...arguments),this.graders=new jA(this._client)}}by.Graders=jA;class xy extends Se{create(e,t,r){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Sy,{body:t,method:"post",...r})}retrieve(e,t={},r){return ut(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}del(e,t,r){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,r)}}class Sy extends pd{}xy.PermissionCreateResponsesPage=Sy;let _d=class extends Se{constructor(){super(...arguments),this.permissions=new xy(this._client)}};_d.Permissions=xy;_d.PermissionCreateResponsesPage=Sy;class Ey extends Se{list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Ty,{query:t,...r})}}class Ty extends Nt{}Ey.FineTuningJobCheckpointsPage=Ty;class xa extends Se{constructor(){super(...arguments),this.checkpoints=new Ey(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ay,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return ut(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Py,{query:t,...r})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Ay extends Nt{}class Py extends Nt{}xa.FineTuningJobsPage=Ay;xa.FineTuningJobEventsPage=Py;xa.Checkpoints=Ey;xa.FineTuningJobCheckpointsPage=Ty;class Is extends Se{constructor(){super(...arguments),this.methods=new NA(this._client),this.jobs=new xa(this._client),this.checkpoints=new _d(this._client),this.alpha=new by(this._client)}}Is.Methods=NA;Is.Jobs=xa;Is.FineTuningJobsPage=Ay;Is.FineTuningJobEventsPage=Py;Is.Checkpoints=_d;Is.Alpha=by;class LA extends Se{}class Cy extends Se{constructor(){super(...arguments),this.graderModels=new LA(this._client)}}Cy.GraderModels=LA;class $A extends Se{createVariation(e,t){return this._client.post("/images/variations",da({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",da({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class ky extends Se{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Oy,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Oy extends pd{}ky.ModelsPage=Oy;class MA extends Se{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function sL(n,e){return!e||!aL(e)?{...n,output_parsed:null,output:n.output.map(t=>t.type==="function_call"?{...t,parsed_arguments:null}:t.type==="message"?{...t,content:t.content.map(r=>({...r,parsed:null}))}:t)}:DA(n,e)}function DA(n,e){const t=n.output.map(s=>{if(s.type==="function_call")return{...s,parsed_arguments:lL(e,s)};if(s.type==="message"){const a=s.content.map(u=>u.type==="output_text"?{...u,parsed:iL(e,u.text)}:u);return{...s,content:a}}return s}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||FA(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const s of r.output)if(s.type==="message"){for(const a of s.content)if(a.type==="output_text"&&a.parsed!==null)return a.parsed}return null}}),r}function iL(n,e){var t,r,s,a;return((r=(t=n.text)==null?void 0:t.format)==null?void 0:r.type)!=="json_schema"?null:"$parseRaw"in((s=n.text)==null?void 0:s.format)?((a=n.text)==null?void 0:a.format).$parseRaw(e):JSON.parse(e)}function aL(n){var e;return!!uy((e=n.text)==null?void 0:e.format)}function oL(n){return(n==null?void 0:n.$brand)==="auto-parseable-tool"}function uL(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function lL(n,e){const t=uL(n.tools??[],e.name);return{...e,...e,parsed_arguments:oL(t)?t.$parseRaw(e.arguments):t!=null&&t.strict?JSON.parse(e.arguments):null}}function FA(n){const e=[];for(const t of n.output)if(t.type==="message")for(const r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}class UA extends Se{list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,dL,{query:t,...r})}}var Bi=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},ds=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Vi,rc,fs,sc,U0,B0,V0,z0;class Ry extends iy{constructor(e){super(),Vi.add(this),rc.set(this,void 0),fs.set(this,void 0),sc.set(this,void 0),Bi(this,rc,e,"f")}static createResponse(e,t,r){const s=new Ry(t);return s._run(()=>s._createResponse(e,t,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createResponse(e,t,r){var u;const s=r==null?void 0:r.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),ds(this,Vi,"m",U0).call(this);const a=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const l of a)ds(this,Vi,"m",B0).call(this,l);if((u=a.controller.signal)!=null&&u.aborted)throw new wn;return ds(this,Vi,"m",V0).call(this)}[(rc=new WeakMap,fs=new WeakMap,sc=new WeakMap,Vi=new WeakSet,U0=function(){this.ended||Bi(this,fs,void 0,"f")},B0=function(t){if(this.ended)return;const r=ds(this,Vi,"m",z0).call(this,t);switch(this._emit("event",t),t.type){case"response.output_text.delta":{const s=r.output[t.output_index];if(!s)throw new _e(`missing output at index ${t.output_index}`);if(s.type==="message"){const a=s.content[t.content_index];if(!a)throw new _e(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new _e(`expected content to be 'output_text', got ${a.type}`);this._emit("response.output_text.delta",{...t,snapshot:a.text})}break}case"response.function_call_arguments.delta":{const s=r.output[t.output_index];if(!s)throw new _e(`missing output at index ${t.output_index}`);s.type==="function_call"&&this._emit("response.function_call_arguments.delta",{...t,snapshot:s.arguments});break}default:this._emit(t.type,t);break}},V0=function(){if(this.ended)throw new _e("stream has ended, this shouldn't happen");const t=ds(this,fs,"f");if(!t)throw new _e("request ended without sending any events");Bi(this,fs,void 0,"f");const r=cL(t,ds(this,rc,"f"));return Bi(this,sc,r,"f"),r},z0=function(t){let r=ds(this,fs,"f");if(!r){if(t.type!=="response.created")throw new _e(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Bi(this,fs,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{const s=r.output[t.output_index];if(!s)throw new _e(`missing output at index ${t.output_index}`);s.type==="message"&&s.content.push(t.part);break}case"response.output_text.delta":{const s=r.output[t.output_index];if(!s)throw new _e(`missing output at index ${t.output_index}`);if(s.type==="message"){const a=s.content[t.content_index];if(!a)throw new _e(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new _e(`expected content to be 'output_text', got ${a.type}`);a.text+=t.delta}break}case"response.function_call_arguments.delta":{const s=r.output[t.output_index];if(!s)throw new _e(`missing output at index ${t.output_index}`);s.type==="function_call"&&(s.arguments+=t.delta);break}case"response.completed":{Bi(this,fs,t.response,"f");break}}return r},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{r=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{r=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((a,u)=>t.push({resolve:a,reject:u})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=ds(this,sc,"f");if(!e)throw new _e("stream ended without producing a ChatCompletion");return e}}function cL(n,e){return sL(n,e)}class Iy extends Se{constructor(){super(...arguments),this.inputItems=new UA(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(r=>("object"in r&&r.object==="response"&&FA(r),r))}retrieve(e,t={},r){return ut(t)?this.retrieve(e,{},t):this._client.get(`/responses/${e}`,{query:t,...r})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t==null?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(r=>DA(r,e))}stream(e,t){return Ry.createResponse(this._client,e,t)}}class dL extends Nt{}Iy.InputItems=UA;class BA extends Se{create(e,t,r){return this._client.post(`/uploads/${e}/parts`,da({body:t,...r}))}}class Ny extends Se{constructor(){super(...arguments),this.parts=new BA(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(`/uploads/${e}/complete`,{body:t,...r})}}Ny.Parts=BA;const fL=async n=>{const e=await Promise.allSettled(n),t=e.filter(s=>s.status==="rejected");if(t.length){for(const s of t)console.error(s.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const r=[];for(const s of e)s.status==="fulfilled"&&r.push(s.value);return r};class wd extends Se{create(e,t,r){return this._client.post(`/vector_stores/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}update(e,t,r,s){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},r){return ut(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,bd,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}del(e,t,r){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t,r);return await this.poll(e,s.id,r)}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...r,headers:s}).withResponse(),u=a.data;switch(u.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const d=a.response.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(l=f)}}await Eu(l);break;case"failed":case"completed":return u}}}async upload(e,t,r){const s=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:s.id},r)}async uploadAndPoll(e,t,r){const s=await this.upload(e,t,r);return await this.poll(e,s.id,r)}content(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,jy,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class bd extends Nt{}class jy extends pd{}wd.VectorStoreFilesPage=bd;wd.FileContentResponsesPage=jy;class VA extends Se{create(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}retrieve(e,t,r){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}cancel(e,t,r){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}async createAndPoll(e,t,r){const s=await this.create(e,t);return await this.poll(e,s.id,r)}listFiles(e,t,r={},s){return ut(r)?this.listFiles(e,t,{},r):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,bd,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,t,r){const s={...r==null?void 0:r.headers,"X-Stainless-Poll-Helper":"true"};for(r!=null&&r.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=r.pollIntervalMs.toString());;){const{data:a,response:u}=await this.retrieve(e,t,{...r,headers:s}).withResponse();switch(a.status){case"in_progress":let l=5e3;if(r!=null&&r.pollIntervalMs)l=r.pollIntervalMs;else{const d=u.headers.get("openai-poll-after-ms");if(d){const f=parseInt(d);isNaN(f)||(l=f)}}await Eu(l);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},s){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,u=Math.min(a,t.length),l=this._client,d=t.values(),f=[...r];async function h(y){for(let v of y){const w=await l.files.create({file:v,purpose:"assistants"},s);f.push(w.id)}}const m=Array(u).fill(d).map(h);return await fL(m),await this.createAndPoll(e,{file_ids:f})}}class Ns extends Se{constructor(){super(...arguments),this.files=new wd(this._client),this.fileBatches=new VA(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,r){return this._client.post(`/vector_stores/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}list(e={},t){return ut(e)?this.list({},e):this._client.getAPIList("/vector_stores",Ly,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}search(e,t,r){return this._client.getAPIList(`/vector_stores/${e}/search`,$y,{body:t,method:"post",...r,headers:{"OpenAI-Beta":"assistants=v2",...r==null?void 0:r.headers}})}}class Ly extends Nt{}class $y extends pd{}Ns.VectorStoresPage=Ly;Ns.VectorStoreSearchResponsesPage=$y;Ns.Files=wd;Ns.VectorStoreFilesPage=bd;Ns.FileContentResponsesPage=jy;Ns.FileBatches=VA;var zA;let Pe=class extends Ij{constructor({baseURL:e=Yl("OPENAI_BASE_URL"),apiKey:t=Yl("OPENAI_API_KEY"),organization:r=Yl("OPENAI_ORG_ID")??null,project:s=Yl("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new _e("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const u={apiKey:t,organization:r,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!u.dangerouslyAllowBrowser&&Vj())throw new _e(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:u.baseURL,timeout:u.timeout??6e5,httpAgent:u.httpAgent,maxRetries:u.maxRetries,fetch:u.fetch}),this.completions=new RA(this),this.chat=new yd(this),this.embeddings=new IA(this),this.files=new _y(this),this.images=new $A(this),this.audio=new Tu(this),this.moderations=new MA(this),this.models=new ky(this),this.fineTuning=new Is(this),this.graders=new Cy(this),this.vectorStores=new Ns(this),this.beta=new ba(this),this.batches=new ry(this),this.uploads=new Ny(this),this.responses=new Iy(this),this.evals=new ku(this),this._options=u,this.apiKey=t,this.organization=r,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return pj(e,{arrayFormat:"brackets"})}};zA=Pe;Pe.OpenAI=zA;Pe.DEFAULT_TIMEOUT=6e5;Pe.OpenAIError=_e;Pe.APIError=It;Pe.APIConnectionError=ld;Pe.APIConnectionTimeoutError=cd;Pe.APIUserAbortError=wn;Pe.NotFoundError=VT;Pe.ConflictError=zT;Pe.RateLimitError=qT;Pe.BadRequestError=FT;Pe.AuthenticationError=UT;Pe.InternalServerError=WT;Pe.PermissionDeniedError=BT;Pe.UnprocessableEntityError=HT;Pe.toFile=YT;Pe.fileFromPath=$T;Pe.Completions=RA;Pe.Chat=yd;Pe.ChatCompletionsPage=gd;Pe.Embeddings=IA;Pe.Files=_y;Pe.FileObjectsPage=wy;Pe.Images=$A;Pe.Audio=Tu;Pe.Moderations=MA;Pe.Models=ky;Pe.ModelsPage=Oy;Pe.FineTuning=Is;Pe.Graders=Cy;Pe.VectorStores=Ns;Pe.VectorStoresPage=Ly;Pe.VectorStoreSearchResponsesPage=$y;Pe.Beta=ba;Pe.Batches=ry;Pe.BatchesPage=sy;Pe.Uploads=Ny;Pe.Responses=Iy;Pe.Evals=ku;Pe.EvalListResponsesPage=vy;function H0(n,e=My){n=n.trim();const t=n.indexOf("```");if(t===-1)return e(n);let r=n.substring(t+3);r.startsWith(`json
`)?r=r.substring(5):r.startsWith("json")?r=r.substring(4):r.startsWith(`
`)&&(r=r.substring(1));const s=r.indexOf("```");let a=r;return s!==-1&&(a=r.substring(0,s)),e(a.trim())}function My(n){if(typeof n>"u")return null;try{return JSON.parse(n)}catch{}let e="";const t=[];let r=!1,s=!1;for(let a of n){if(r)a==='"'&&!s?r=!1:a===`
`&&!s?a="\\n":a==="\\"?s=!s:s=!1;else if(a==='"')r=!0,s=!1;else if(a==="{")t.push("}");else if(a==="[")t.push("]");else if(a==="}"||a==="]")if(t&&t[t.length-1]===a)t.pop();else return null;e+=a}r&&(e+='"');for(let a=t.length-1;a>=0;a-=1)e+=t[a];try{return JSON.parse(e)}catch{return null}}var np,q0;function hL(){return q0||(q0=1,np=function(n,e){if(typeof n!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,n.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}),np}var pL=hL();const mL=Er(pL);var ic={exports:{}},W0;function gL(){if(W0)return ic.exports;W0=1;const n=/[\p{Lu}]/u,e=/[\p{Ll}]/u,t=/^[\p{Lu}](?![\p{Lu}])/gu,r=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,a=new RegExp("^"+s.source),u=new RegExp(s.source+r.source,"gu"),l=new RegExp("\\d+"+r.source,"gu"),d=(y,v,w)=>{let b=!1,S=!1,E=!1;for(let A=0;A<y.length;A++){const T=y[A];b&&n.test(T)?(y=y.slice(0,A)+"-"+y.slice(A),b=!1,E=S,S=!0,A++):S&&E&&e.test(T)?(y=y.slice(0,A-1)+"-"+y.slice(A-1),E=S,S=!1,b=!0):(b=v(T)===T&&w(T)!==T,E=S,S=w(T)===T&&v(T)!==T)}return y},f=(y,v)=>(t.lastIndex=0,y.replace(t,w=>v(w))),h=(y,v)=>(u.lastIndex=0,l.lastIndex=0,y.replace(u,(w,b)=>v(b)).replace(l,w=>v(w))),m=(y,v)=>{if(!(typeof y=="string"||Array.isArray(y)))throw new TypeError("Expected the input to be `string | string[]`");if(v={pascalCase:!1,preserveConsecutiveUppercase:!1,...v},Array.isArray(y)?y=y.map(E=>E.trim()).filter(E=>E.length).join("-"):y=y.trim(),y.length===0)return"";const w=v.locale===!1?E=>E.toLowerCase():E=>E.toLocaleLowerCase(v.locale),b=v.locale===!1?E=>E.toUpperCase():E=>E.toLocaleUpperCase(v.locale);return y.length===1?v.pascalCase?b(y):w(y):(y!==w(y)&&(y=d(y,w,b)),y=y.replace(a,""),v.preserveConsecutiveUppercase?y=f(y,w):y=w(y),v.pascalCase&&(y=b(y.charAt(0))+y.slice(1)),h(y,b))};return ic.exports=m,ic.exports.default=m,ic.exports}gL();function yL(n,e){return(e==null?void 0:e[n])||mL(n)}function vL(n,e,t){const r={};for(const s in n)Object.hasOwn(n,s)&&(r[e(s,t)]=n[s]);return r}function Z0(n){return Array.isArray(n)?[...n]:{...n}}function _L(n,e){const t=Z0(n);for(const[r,s]of Object.entries(e)){const[a,...u]=r.split(".").reverse();let l=t;for(const d of u.reverse()){if(l[d]===void 0)break;l[d]=Z0(l[d]),l=l[d]}l[a]!==void 0&&(l[a]={lc:1,type:"secret",id:[s]})}return t}function HA(n){const e=Object.getPrototypeOf(n);return typeof n.lc_name=="function"&&(typeof e.lc_name!="function"||n.lc_name()!==e.lc_name())?n.lc_name():n.name}class oi{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,HA(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_serializable_keys!==void 0?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([r])=>{var s;return(s=this.lc_serializable_keys)==null?void 0:s.includes(r)})):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof oi||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((s,a)=>(s[a]=a in this?this[a]:this.lc_kwargs[a],s),{});for(let s=Object.getPrototypeOf(this);s;s=Object.getPrototypeOf(s))Object.assign(e,Reflect.get(s,"lc_aliases",this)),Object.assign(t,Reflect.get(s,"lc_secrets",this)),Object.assign(r,Reflect.get(s,"lc_attributes",this));return Object.keys(t).forEach(s=>{let a=this,u=r;const[l,...d]=s.split(".").reverse();for(const f of d.reverse()){if(!(f in a)||a[f]===void 0)return;(!(f in u)||u[f]===void 0)&&(typeof a[f]=="object"&&a[f]!=null?u[f]={}:Array.isArray(a[f])&&(u[f]=[])),a=a[f],u=u[f]}l in a&&a[l]!==void 0&&(u[l]=u[l]||a[l])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:vL(Object.keys(t).length?_L(r,t):r,yL,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function ui(n){return typeof n=="object"&&n!==null&&"type"in n&&typeof n.type=="string"&&"source_type"in n&&(n.source_type==="url"||n.source_type==="base64"||n.source_type==="text"||n.source_type==="id")}function wL(n){return ui(n)&&n.source_type==="url"&&"url"in n&&typeof n.url=="string"}function bL(n){return ui(n)&&n.source_type==="base64"&&"data"in n&&typeof n.data=="string"}function xL(n){if(ui(n)){if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url}};if(n.source_type==="base64"){if(!n.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${n.mime_type};base64,${n.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function G0(n){const e=n.split(";")[0].split("/");if(e.length!==2)throw new Error(`Invalid mime type: "${n}" - does not match type/subtype format.`);const t=e[0].trim(),r=e[1].trim();if(t===""||r==="")throw new Error(`Invalid mime type: "${n}" - type or subtype is empty.`);const s={};for(const a of n.split(";").slice(1)){const u=a.split("=");if(u.length!==2)throw new Error(`Invalid parameter syntax in mime type: "${n}".`);const l=u[0].trim(),d=u[1].trim();if(l==="")throw new Error(`Invalid parameter syntax in mime type: "${n}".`);s[l]=d}return{type:t,subtype:r,parameters:s}}function K0({dataUrl:n,asTypedArray:e=!1}){const t=n.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let r;if(t){r=t[1].toLowerCase();const s=e?Uint8Array.from(atob(t[2]),a=>a.charCodeAt(0)):t[2];return{mime_type:r,data:s}}}function qA(n,e){if(n.type==="text"){if(!e.fromStandardTextBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardTextBlock\` method.`);return e.fromStandardTextBlock(n)}if(n.type==="image"){if(!e.fromStandardImageBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardImageBlock\` method.`);return e.fromStandardImageBlock(n)}if(n.type==="audio"){if(!e.fromStandardAudioBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardAudioBlock\` method.`);return e.fromStandardAudioBlock(n)}if(n.type==="file"){if(!e.fromStandardFileBlock)throw new Error(`Converter for ${e.providerName} does not implement \`fromStandardFileBlock\` method.`);return e.fromStandardFileBlock(n)}throw new Error(`Unable to convert content block type '${n.type}' to provider-specific format: not recognized.`)}function Sa(n,e){return typeof n=="string"?n===""?e:typeof e=="string"?n+e:Array.isArray(e)&&e.some(t=>ui(t))?[{type:"text",source_type:"text",text:n},...e]:[{type:"text",text:n},...e]:Array.isArray(e)?xd(n,e)??[...n,...e]:e===""?n:Array.isArray(n)&&n.some(t=>ui(t))?[...n,{type:"file",source_type:"text",text:e}]:[...n,{type:"text",text:e}]}function SL(n,e){return n==="error"||e==="error"?"error":"success"}function EL(n,e){function t(r,s){if(typeof r!="object"||r===null||r===void 0)return r;if(s>=e)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(u=>t(u,s+1));const a={};for(const u of Object.keys(r))a[u]=t(r[u],s+1);return a}return JSON.stringify(t(n,0),null,2)}class Ea extends oi{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:Array.isArray(this.content)?this.content.map(e=>typeof e=="string"?e:e.type==="text"?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;const t=EL(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}function Jt(n,e){const t={...n};for(const[r,s]of Object.entries(e))if(t[r]==null)t[r]=s;else{if(s==null)continue;if(typeof t[r]!=typeof s||Array.isArray(t[r])!==Array.isArray(s))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if(typeof t[r]=="string"){if(r==="type")continue;t[r]+=s}else if(typeof t[r]=="object"&&!Array.isArray(t[r]))t[r]=Jt(t[r],s);else if(Array.isArray(t[r]))t[r]=xd(t[r],s);else{if(t[r]===s)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}}return t}function xd(n,e){if(!(n===void 0&&e===void 0)){if(n===void 0||e===void 0)return n||e;{const t=[...n];for(const r of e)if(typeof r=="object"&&"index"in r&&typeof r.index=="number"){const s=t.findIndex(a=>a.index===r.index);s!==-1?t[s]=Jt(t[s],r):t.push(r)}else{if(typeof r=="object"&&"text"in r&&r.text==="")continue;t.push(r)}return t}}}function TL(n,e){if(!n&&!e)throw new Error("Cannot merge two undefined objects.");if(!n||!e)return n||e;if(typeof n!=typeof e)throw new Error(`Cannot merge objects of different types.
Left ${typeof n}
Right ${typeof e}`);if(typeof n=="string"&&typeof e=="string")return n+e;if(Array.isArray(n)&&Array.isArray(e))return xd(n,e);if(typeof n=="object"&&typeof e=="object")return Jt(n,e);if(n===e)return n;throw new Error(`Can not merge objects of different types.
Left ${n}
Right ${e}`)}class Ta extends Ea{}function AL(n){return typeof n.role=="string"}function Sd(n){return typeof(n==null?void 0:n._getType)=="function"}function PL(n){return Sd(n)&&typeof n.concat=="function"}class CL extends Ea{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){typeof e=="string"&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class Dy extends Ta{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new Dy({content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),artifact:TL(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:SL(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function kL(n){const e=[],t=[];for(const r of n)if(r.function){const s=r.function.name;try{const a=JSON.parse(r.function.arguments),u={name:s||"",args:a||{},id:r.id};e.push(u)}catch{t.push({name:s,args:r.function.arguments,id:r.id,error:"Malformed args."})}}else continue;return[e,t]}class tu extends Ea{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){var s;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const a=(s=r.additional_kwargs)==null?void 0:s.tool_calls,u=r.tool_calls;a!=null&&a.length>0&&(u===void 0||u.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(a!=null&&u===void 0){const[l,d]=kL(a);r.tool_calls=l??[],r.invalid_tool_calls=d??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch{r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof r!="string"&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function _s(n){return n._getType()==="ai"}function J0(n){return n._getType()==="ai"}class Es extends Ta{constructor(e){let t;if(typeof e=="string")t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0};else{const r=[],s=[];for(const a of e.tool_call_chunks){let u={};try{if(u=My(a.args||"{}"),u===null||typeof u!="object"||Array.isArray(u))throw new Error("Malformed tool call chunk args.");r.push({name:a.name??"",args:u,id:a.id,type:"tool_call"})}catch{s.push({name:a.name,args:a.args,id:a.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:r,invalid_tool_calls:s,usage_metadata:e.usage_metadata!==void 0?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var r,s,a,u,l,d,f,h,m,y,v,w,b,S,E,A,T,R,I,M,B,U,ie,de,ve,We,Ze,Y,J,te,Z,D,z,V,k,$,re,he,pe,Ce;const t={content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){const je=xd(this.tool_call_chunks,e.tool_call_chunks);je!==void 0&&je.length>0&&(t.tool_call_chunks=je)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){const je={...(((s=(r=this.usage_metadata)==null?void 0:r.input_token_details)==null?void 0:s.audio)!==void 0||((u=(a=e.usage_metadata)==null?void 0:a.input_token_details)==null?void 0:u.audio)!==void 0)&&{audio:(((d=(l=this.usage_metadata)==null?void 0:l.input_token_details)==null?void 0:d.audio)??0)+(((h=(f=e.usage_metadata)==null?void 0:f.input_token_details)==null?void 0:h.audio)??0)},...(((y=(m=this.usage_metadata)==null?void 0:m.input_token_details)==null?void 0:y.cache_read)!==void 0||((w=(v=e.usage_metadata)==null?void 0:v.input_token_details)==null?void 0:w.cache_read)!==void 0)&&{cache_read:(((S=(b=this.usage_metadata)==null?void 0:b.input_token_details)==null?void 0:S.cache_read)??0)+(((A=(E=e.usage_metadata)==null?void 0:E.input_token_details)==null?void 0:A.cache_read)??0)},...(((R=(T=this.usage_metadata)==null?void 0:T.input_token_details)==null?void 0:R.cache_creation)!==void 0||((M=(I=e.usage_metadata)==null?void 0:I.input_token_details)==null?void 0:M.cache_creation)!==void 0)&&{cache_creation:(((U=(B=this.usage_metadata)==null?void 0:B.input_token_details)==null?void 0:U.cache_creation)??0)+(((de=(ie=e.usage_metadata)==null?void 0:ie.input_token_details)==null?void 0:de.cache_creation)??0)}},$e={...(((We=(ve=this.usage_metadata)==null?void 0:ve.output_token_details)==null?void 0:We.audio)!==void 0||((Y=(Ze=e.usage_metadata)==null?void 0:Ze.output_token_details)==null?void 0:Y.audio)!==void 0)&&{audio:(((te=(J=this.usage_metadata)==null?void 0:J.output_token_details)==null?void 0:te.audio)??0)+(((D=(Z=e.usage_metadata)==null?void 0:Z.output_token_details)==null?void 0:D.audio)??0)},...(((V=(z=this.usage_metadata)==null?void 0:z.output_token_details)==null?void 0:V.reasoning)!==void 0||(($=(k=e.usage_metadata)==null?void 0:k.output_token_details)==null?void 0:$.reasoning)!==void 0)&&{reasoning:(((he=(re=this.usage_metadata)==null?void 0:re.output_token_details)==null?void 0:he.reasoning)??0)+(((Ce=(pe=e.usage_metadata)==null?void 0:pe.output_token_details)==null?void 0:Ce.reasoning)??0)}},He=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},At=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},hi={input_tokens:He.input_tokens+At.input_tokens,output_tokens:He.output_tokens+At.output_tokens,total_tokens:He.total_tokens+At.total_tokens,...Object.keys(je).length>0&&{input_token_details:je},...Object.keys($e).length>0&&{output_token_details:$e}};t.usage_metadata=hi}return new Es(t)}}class Ou extends Ea{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Ou}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}}class Ed extends Ta{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Ed({content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Td extends Ta{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Td({content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Ru extends Ea{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}class Ad extends Ta{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new Ad({content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class sg extends Ea{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}}class nu extends Ta{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new nu({content:Sa(this.content,e.content),additional_kwargs:Jt(this.additional_kwargs,e.additional_kwargs),response_metadata:Jt(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function WA(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function ZA(n){return!!(n&&typeof n=="object"&&"type"in n&&n.type==="tool_call")}class OL extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function RL(n){return ZA(n)?n:typeof n.id=="string"&&n.type==="function"&&typeof n.function=="object"&&n.function!==null&&"arguments"in n.function&&typeof n.function.arguments=="string"&&"name"in n.function&&typeof n.function.name=="string"?{id:n.id,args:JSON.parse(n.function.arguments),name:n.function.name,type:"tool_call"}:n}function IL(n){return typeof n=="object"&&n!=null&&n.lc===1&&Array.isArray(n.id)&&n.kwargs!=null&&typeof n.kwargs=="object"}function rp(n){let e,t;if(IL(n)){const r=n.id.at(-1);r==="HumanMessage"||r==="HumanMessageChunk"?e="user":r==="AIMessage"||r==="AIMessageChunk"?e="assistant":r==="SystemMessage"||r==="SystemMessageChunk"?e="system":r==="FunctionMessage"||r==="FunctionMessageChunk"?e="function":r==="ToolMessage"||r==="ToolMessageChunk"?e="tool":e="unknown",t=n.kwargs}else{const{type:r,...s}=n;e=r,t=s}if(e==="human"||e==="user")return new Ru(t);if(e==="ai"||e==="assistant"){const{tool_calls:r,...s}=t;if(!Array.isArray(r))return new tu(t);const a=r.map(RL);return new tu({...s,tool_calls:a})}else{if(e==="system")return new sg(t);if(e==="developer")return new sg({...t,additional_kwargs:{...t.additional_kwargs,__openai_role__:"developer"}});if(e==="tool"&&"tool_call_id"in t)return new CL({...t,content:t.content,tool_call_id:t.tool_call_id,name:t.name});throw WA(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.

Received: ${JSON.stringify(n,null,2)}`),"MESSAGE_COERCION_FAILURE")}}function Ro(n){if(typeof n=="string")return new Ru(n);if(Sd(n))return n;if(Array.isArray(n)){const[e,t]=n;return rp({type:e,content:t})}else if(AL(n)){const{role:e,...t}=n;return rp({...t,type:e})}else return rp(n)}function GA(n,e="Human",t="AI"){const r=[];for(const s of n){let a;if(s._getType()==="human")a=e;else if(s._getType()==="ai")a=t;else if(s._getType()==="system")a="System";else if(s._getType()==="function")a="Function";else if(s._getType()==="tool")a="Tool";else if(s._getType()==="generic")a=s.role;else throw new Error(`Got unsupported message type: ${s._getType()}`);const u=s.name?`${s.name}, `:"",l=typeof s.content=="string"?s.content:JSON.stringify(s.content,null,2);r.push(`${a}: ${u}${l}`)}return r.join(`
`)}function NL(n){var t;const e=n._getType();if(e==="human")return new Ad({...n});if(e==="ai"){let r={...n};return"tool_calls"in r&&(r={...r,tool_call_chunks:(t=r.tool_calls)==null?void 0:t.map(s=>({...s,type:"tool_call_chunk",index:void 0,args:JSON.stringify(s.args)}))}),new Es({...r})}else{if(e==="system")return new nu({...n});if(e==="function")return new Td({...n});if(Ou.isInstance(n))return new Ed({...n});throw new Error("Unknown message type.")}}var Ne;(function(n){n.assertEqual=s=>s;function e(s){}n.assertIs=e;function t(s){throw new Error}n.assertNever=t,n.arrayToEnum=s=>{const a={};for(const u of s)a[u]=u;return a},n.getValidEnumValues=s=>{const a=n.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),u={};for(const l of a)u[l]=s[l];return n.objectValues(u)},n.objectValues=s=>n.objectKeys(s).map(function(a){return s[a]}),n.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&a.push(u);return a},n.find=(s,a)=>{for(const u of s)if(a(u))return u},n.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}n.joinValues=r,n.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(Ne||(Ne={}));var ig;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})(ig||(ig={}));const ne=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Dr=n=>{switch(typeof n){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return isNaN(n)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(n)?ne.array:n===null?ne.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ne.promise:typeof Map<"u"&&n instanceof Map?ne.map:typeof Set<"u"&&n instanceof Set?ne.set:typeof Date<"u"&&n instanceof Date?ne.date:ne.object;default:return ne.unknown}},K=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),jL=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class bn extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(a){return a.message},r={_errors:[]},s=a=>{for(const u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)r._errors.push(t(u));else{let l=r,d=0;for(;d<u.path.length;){const f=u.path[d];d===u.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(t(u))):l[f]=l[f]||{_errors:[]},l=l[f],d++}}};return s(this),r}static assert(e){if(!(e instanceof bn))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},r=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}bn.create=n=>new bn(n);const fa=(n,e)=>{let t;switch(n.code){case K.invalid_type:n.received===ne.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,Ne.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${Ne.joinValues(n.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Ne.joinValues(n.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${Ne.joinValues(n.options)}, received '${n.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:Ne.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case K.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case K.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,Ne.assertNever(n)}return{message:t}};let KA=fa;function LL(n){KA=n}function Fc(){return KA}const Uc=n=>{const{data:e,path:t,errorMaps:r,issueData:s}=n,a=[...t,...s.path||[]],u={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let l="";const d=r.filter(f=>!!f).slice().reverse();for(const f of d)l=f(u,{data:e,defaultError:l}).message;return{...s,path:a,message:l}},$L=[];function Q(n,e){const t=Fc(),r=Uc({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===fa?void 0:fa].filter(s=>!!s)});n.common.issues.push(r)}class zt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const s of t){if(s.status==="aborted")return be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const s of t){const a=await s.key,u=await s.value;r.push({key:a,value:u})}return zt.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const s of t){const{key:a,value:u}=s;if(a.status==="aborted"||u.status==="aborted")return be;a.status==="dirty"&&e.dirty(),u.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||s.alwaysSet)&&(r[a.value]=u.value)}return{status:e.value,value:r}}}const be=Object.freeze({status:"aborted"}),ea=n=>({status:"dirty",value:n}),Xt=n=>({status:"valid",value:n}),ag=n=>n.status==="aborted",og=n=>n.status==="dirty",li=n=>n.status==="valid",ru=n=>typeof Promise<"u"&&n instanceof Promise;function Bc(n,e,t,r){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)}function JA(n,e,t,r,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t}var ce;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ce||(ce={}));var Io,No;class xr{constructor(e,t,r,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const X0=(n,e)=>{if(li(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new bn(n.common.issues);return this._error=t,this._error}}};function Ae(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:r,description:s}=n;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(u,l)=>{var d,f;const{message:h}=n;return u.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(d=h??r)!==null&&d!==void 0?d:l.defaultError}:u.code!=="invalid_type"?{message:l.defaultError}:{message:(f=h??t)!==null&&f!==void 0?f:l.defaultError}},description:s}}class Re{get description(){return this._def.description}_getType(e){return Dr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Dr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zt,ctx:{common:e.parent.common,data:e.data,parsedType:Dr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(ru(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const s={common:{issues:[],async:(r=t==null?void 0:t.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dr(e)},a=this._parseSync({data:e,path:s.path,parent:s});return X0(s,a)}"~validate"(e){var t,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dr(e)};if(!this["~standard"].async)try{const a=this._parseSync({data:e,path:[],parent:s});return li(a)?{value:a.value}:{issues:s.common.issues}}catch(a){!((r=(t=a==null?void 0:a.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(a=>li(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dr(e)},s=this._parse({data:e,path:r.path,parent:r}),a=await(ru(s)?s:Promise.resolve(s));return X0(r,a)}refine(e,t){const r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{const u=e(s),l=()=>a.addIssue({code:K.custom,...r(s)});return typeof Promise<"u"&&u instanceof Promise?u.then(d=>d?!0:(l(),!1)):u?!0:(l(),!1)})}refinement(e,t){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(e){return new rr({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return er.create(this,this._def)}nullable(){return Cs.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qn.create(this)}promise(){return pa.create(this,this._def)}or(e){return ou.create([this,e],this._def)}and(e){return uu.create(this,e,this._def)}transform(e){return new rr({...Ae(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new hu({...Ae(this._def),innerType:this,defaultValue:t,typeName:F.ZodDefault})}brand(){return new Fy({typeName:F.ZodBranded,type:this,...Ae(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new pu({...Ae(this._def),innerType:this,catchValue:t,typeName:F.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Iu.create(this,e)}readonly(){return mu.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ML=/^c[^\s-]{8,}$/i,DL=/^[0-9a-z]+$/,FL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,UL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,BL=/^[a-z0-9_-]{21}$/i,VL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,HL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,qL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let sp;const WL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ZL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,GL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,KL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,JL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,XA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",YL=new RegExp(`^${XA}$`);function YA(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function QL(n){return new RegExp(`^${YA(n)}$`)}function QA(n){let e=`${XA}T${YA(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function e$(n,e){return!!((e==="v4"||!e)&&WL.test(n)||(e==="v6"||!e)&&GL.test(n))}function t$(n,e){if(!VL.test(n))return!1;try{const[t]=n.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function n$(n,e){return!!((e==="v4"||!e)&&ZL.test(n)||(e==="v6"||!e)&&KL.test(n))}class Xn extends Re{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){const a=this._getOrReturnCtx(e);return Q(a,{code:K.invalid_type,expected:ne.string,received:a.parsedType}),be}const r=new zt;let s;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const u=e.data.length>a.value,l=e.data.length<a.value;(u||l)&&(s=this._getOrReturnCtx(e,s),u?Q(s,{code:K.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Q(s,{code:K.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")HL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"email",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")sp||(sp=new RegExp(qL,"u")),sp.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"emoji",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")UL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"uuid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")BL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"nanoid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")ML.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")DL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cuid2",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")FL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ulid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Q(s,{validation:"url",code:K.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"regex",code:K.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?QA(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?YL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?QL(a).test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{code:K.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?zL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"duration",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?e$(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"ip",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?t$(e.data,a.alg)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"jwt",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?n$(e.data,a.version)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"cidr",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?JL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?XL.test(e.data)||(s=this._getOrReturnCtx(e,s),Q(s,{validation:"base64url",code:K.invalid_string,message:a.message}),r.dirty()):Ne.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(s=>e.test(s),{validation:t,code:K.invalid_string,...ce.errToObj(r)})}_addCheck(e){return new Xn({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(t=e==null?void 0:e.offset)!==null&&t!==void 0?t:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ce.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ce.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...ce.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new Xn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Xn.create=n=>{var e;return new Xn({checks:[],typeName:F.ZodString,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ae(n)})};function r$(n,e){const t=(n.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=t>r?t:r,a=parseInt(n.toFixed(s).replace(".","")),u=parseInt(e.toFixed(s).replace(".",""));return a%u/Math.pow(10,s)}class Ts extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){const a=this._getOrReturnCtx(e);return Q(a,{code:K.invalid_type,expected:ne.number,received:a.parsedType}),be}let r;const s=new zt;for(const a of this._def.checks)a.kind==="int"?Ne.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:K.invalid_type,expected:"integer",received:"float",message:a.message}),s.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),s.dirty()):a.kind==="multipleOf"?r$(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_finite,message:a.message}),s.dirty()):Ne.assertNever(a);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,r,s){return new Ts({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ce.toString(s)}]})}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ne.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ts.create=n=>new Ts({checks:[],typeName:F.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Ae(n)});class As extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ne.bigint)return this._getInvalidInput(e);let r;const s=new zt;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),s.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Q(r,{code:K.not_multiple_of,multipleOf:a.value,message:a.message}),s.dirty()):Ne.assertNever(a);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Q(t,{code:K.invalid_type,expected:ne.bigint,received:t.parsedType}),be}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,r,s){return new As({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ce.toString(s)}]})}_addCheck(e){return new As({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}As.create=n=>{var e;return new As({checks:[],typeName:F.ZodBigInt,coerce:(e=n==null?void 0:n.coerce)!==null&&e!==void 0?e:!1,...Ae(n)})};class su extends Re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.boolean,received:r.parsedType}),be}return Xt(e.data)}}su.create=n=>new su({typeName:F.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Ae(n)});class ci extends Re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){const a=this._getOrReturnCtx(e);return Q(a,{code:K.invalid_type,expected:ne.date,received:a.parsedType}),be}if(isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Q(a,{code:K.invalid_date}),be}const r=new zt;let s;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(s=this._getOrReturnCtx(e,s),Q(s,{code:K.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Ne.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ci({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}ci.create=n=>new ci({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:F.ZodDate,...Ae(n)});class Vc extends Re{_parse(e){if(this._getType(e)!==ne.symbol){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.symbol,received:r.parsedType}),be}return Xt(e.data)}}Vc.create=n=>new Vc({typeName:F.ZodSymbol,...Ae(n)});class iu extends Re{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.undefined,received:r.parsedType}),be}return Xt(e.data)}}iu.create=n=>new iu({typeName:F.ZodUndefined,...Ae(n)});class au extends Re{_parse(e){if(this._getType(e)!==ne.null){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.null,received:r.parsedType}),be}return Xt(e.data)}}au.create=n=>new au({typeName:F.ZodNull,...Ae(n)});class ha extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return Xt(e.data)}}ha.create=n=>new ha({typeName:F.ZodAny,...Ae(n)});class si extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Xt(e.data)}}si.create=n=>new si({typeName:F.ZodUnknown,...Ae(n)});class zr extends Re{_parse(e){const t=this._getOrReturnCtx(e);return Q(t,{code:K.invalid_type,expected:ne.never,received:t.parsedType}),be}}zr.create=n=>new zr({typeName:F.ZodNever,...Ae(n)});class zc extends Re{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.void,received:r.parsedType}),be}return Xt(e.data)}}zc.create=n=>new zc({typeName:F.ZodVoid,...Ae(n)});class Qn extends Re{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),s=this._def;if(t.parsedType!==ne.array)return Q(t,{code:K.invalid_type,expected:ne.array,received:t.parsedType}),be;if(s.exactLength!==null){const u=t.data.length>s.exactLength.value,l=t.data.length<s.exactLength.value;(u||l)&&(Q(t,{code:u?K.too_big:K.too_small,minimum:l?s.exactLength.value:void 0,maximum:u?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(Q(t,{code:K.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(Q(t,{code:K.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((u,l)=>s.type._parseAsync(new xr(t,u,t.path,l)))).then(u=>zt.mergeArray(r,u));const a=[...t.data].map((u,l)=>s.type._parseSync(new xr(t,u,t.path,l)));return zt.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new Qn({...this._def,minLength:{value:e,message:ce.toString(t)}})}max(e,t){return new Qn({...this._def,maxLength:{value:e,message:ce.toString(t)}})}length(e,t){return new Qn({...this._def,exactLength:{value:e,message:ce.toString(t)}})}nonempty(e){return this.min(1,e)}}Qn.create=(n,e)=>new Qn({type:n,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...Ae(e)});function Zi(n){if(n instanceof rt){const e={};for(const t in n.shape){const r=n.shape[t];e[t]=er.create(Zi(r))}return new rt({...n._def,shape:()=>e})}else return n instanceof Qn?new Qn({...n._def,type:Zi(n.element)}):n instanceof er?er.create(Zi(n.unwrap())):n instanceof Cs?Cs.create(Zi(n.unwrap())):n instanceof Sr?Sr.create(n.items.map(e=>Zi(e))):n}class rt extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Ne.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==ne.object){const f=this._getOrReturnCtx(e);return Q(f,{code:K.invalid_type,expected:ne.object,received:f.parsedType}),be}const{status:r,ctx:s}=this._processInputParams(e),{shape:a,keys:u}=this._getCached(),l=[];if(!(this._def.catchall instanceof zr&&this._def.unknownKeys==="strip"))for(const f in s.data)u.includes(f)||l.push(f);const d=[];for(const f of u){const h=a[f],m=s.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new xr(s,m,s.path,f)),alwaysSet:f in s.data})}if(this._def.catchall instanceof zr){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of l)d.push({key:{status:"valid",value:h},value:{status:"valid",value:s.data[h]}});else if(f==="strict")l.length>0&&(Q(s,{code:K.unrecognized_keys,keys:l}),r.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of l){const m=s.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new xr(s,m,s.path,h)),alwaysSet:h in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of d){const m=await h.key,y=await h.value;f.push({key:m,value:y,alwaysSet:h.alwaysSet})}return f}).then(f=>zt.mergeObjectSync(r,f)):zt.mergeObjectSync(r,d)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new rt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var s,a,u,l;const d=(u=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,t,r).message)!==null&&u!==void 0?u:r.defaultError;return t.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}})}strip(){return new rt({...this._def,unknownKeys:"strip"})}passthrough(){return new rt({...this._def,unknownKeys:"passthrough"})}extend(e){return new rt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:F.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rt({...this._def,catchall:e})}pick(e){const t={};return Ne.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new rt({...this._def,shape:()=>t})}omit(e){const t={};return Ne.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new rt({...this._def,shape:()=>t})}deepPartial(){return Zi(this)}partial(e){const t={};return Ne.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?t[r]=s:t[r]=s.optional()}),new rt({...this._def,shape:()=>t})}required(e){const t={};return Ne.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof er;)a=a._def.innerType;t[r]=a}}),new rt({...this._def,shape:()=>t})}keyof(){return e1(Ne.objectKeys(this.shape))}}rt.create=(n,e)=>new rt({shape:()=>n,unknownKeys:"strip",catchall:zr.create(),typeName:F.ZodObject,...Ae(e)});rt.strictCreate=(n,e)=>new rt({shape:()=>n,unknownKeys:"strict",catchall:zr.create(),typeName:F.ZodObject,...Ae(e)});rt.lazycreate=(n,e)=>new rt({shape:n,unknownKeys:"strip",catchall:zr.create(),typeName:F.ZodObject,...Ae(e)});class ou extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;function s(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return t.common.issues.push(...l.ctx.common.issues),l.result;const u=a.map(l=>new bn(l.ctx.common.issues));return Q(t,{code:K.invalid_union,unionErrors:u}),be}if(t.common.async)return Promise.all(r.map(async a=>{const u={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:u}),ctx:u}})).then(s);{let a;const u=[];for(const d of r){const f={...t,common:{...t.common,issues:[]},parent:null},h=d._parseSync({data:t.data,path:t.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;const l=u.map(d=>new bn(d));return Q(t,{code:K.invalid_union,unionErrors:l}),be}}get options(){return this._def.options}}ou.create=(n,e)=>new ou({options:n,typeName:F.ZodUnion,...Ae(e)});const Mr=n=>n instanceof cu?Mr(n.schema):n instanceof rr?Mr(n.innerType()):n instanceof du?[n.value]:n instanceof Ps?n.options:n instanceof fu?Ne.objectValues(n.enum):n instanceof hu?Mr(n._def.innerType):n instanceof iu?[void 0]:n instanceof au?[null]:n instanceof er?[void 0,...Mr(n.unwrap())]:n instanceof Cs?[null,...Mr(n.unwrap())]:n instanceof Fy||n instanceof mu?Mr(n.unwrap()):n instanceof pu?Mr(n._def.innerType):[];class Pd extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.object)return Q(t,{code:K.invalid_type,expected:ne.object,received:t.parsedType}),be;const r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Q(t,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const s=new Map;for(const a of t){const u=Mr(a.shape[e]);if(!u.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of u){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,a)}}return new Pd({typeName:F.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...Ae(r)})}}function ug(n,e){const t=Dr(n),r=Dr(e);if(n===e)return{valid:!0,data:n};if(t===ne.object&&r===ne.object){const s=Ne.objectKeys(e),a=Ne.objectKeys(n).filter(l=>s.indexOf(l)!==-1),u={...n,...e};for(const l of a){const d=ug(n[l],e[l]);if(!d.valid)return{valid:!1};u[l]=d.data}return{valid:!0,data:u}}else if(t===ne.array&&r===ne.array){if(n.length!==e.length)return{valid:!1};const s=[];for(let a=0;a<n.length;a++){const u=n[a],l=e[a],d=ug(u,l);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return t===ne.date&&r===ne.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class uu extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=(a,u)=>{if(ag(a)||ag(u))return be;const l=ug(a.value,u.value);return l.valid?((og(a)||og(u))&&t.dirty(),{status:t.value,value:l.data}):(Q(r,{code:K.invalid_intersection_types}),be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,u])=>s(a,u)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}uu.create=(n,e,t)=>new uu({left:n,right:e,typeName:F.ZodIntersection,...Ae(t)});class Sr extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.array)return Q(r,{code:K.invalid_type,expected:ne.array,received:r.parsedType}),be;if(r.data.length<this._def.items.length)return Q(r,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),be;!this._def.rest&&r.data.length>this._def.items.length&&(Q(r,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const a=[...r.data].map((u,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new xr(r,u,r.path,l)):null}).filter(u=>!!u);return r.common.async?Promise.all(a).then(u=>zt.mergeArray(t,u)):zt.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new Sr({...this._def,rest:e})}}Sr.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sr({items:n,typeName:F.ZodTuple,rest:null,...Ae(e)})};class lu extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.object)return Q(r,{code:K.invalid_type,expected:ne.object,received:r.parsedType}),be;const s=[],a=this._def.keyType,u=this._def.valueType;for(const l in r.data)s.push({key:a._parse(new xr(r,l,r.path,l)),value:u._parse(new xr(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?zt.mergeObjectAsync(t,s):zt.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof Re?new lu({keyType:e,valueType:t,typeName:F.ZodRecord,...Ae(r)}):new lu({keyType:Xn.create(),valueType:e,typeName:F.ZodRecord,...Ae(t)})}}class Hc extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.map)return Q(r,{code:K.invalid_type,expected:ne.map,received:r.parsedType}),be;const s=this._def.keyType,a=this._def.valueType,u=[...r.data.entries()].map(([l,d],f)=>({key:s._parse(new xr(r,l,r.path,[f,"key"])),value:a._parse(new xr(r,d,r.path,[f,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of u){const f=await d.key,h=await d.value;if(f.status==="aborted"||h.status==="aborted")return be;(f.status==="dirty"||h.status==="dirty")&&t.dirty(),l.set(f.value,h.value)}return{status:t.value,value:l}})}else{const l=new Map;for(const d of u){const f=d.key,h=d.value;if(f.status==="aborted"||h.status==="aborted")return be;(f.status==="dirty"||h.status==="dirty")&&t.dirty(),l.set(f.value,h.value)}return{status:t.value,value:l}}}}Hc.create=(n,e,t)=>new Hc({valueType:e,keyType:n,typeName:F.ZodMap,...Ae(t)});class di extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.set)return Q(r,{code:K.invalid_type,expected:ne.set,received:r.parsedType}),be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Q(r,{code:K.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Q(r,{code:K.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const a=this._def.valueType;function u(d){const f=new Set;for(const h of d){if(h.status==="aborted")return be;h.status==="dirty"&&t.dirty(),f.add(h.value)}return{status:t.value,value:f}}const l=[...r.data.values()].map((d,f)=>a._parse(new xr(r,d,r.path,f)));return r.common.async?Promise.all(l).then(d=>u(d)):u(l)}min(e,t){return new di({...this._def,minSize:{value:e,message:ce.toString(t)}})}max(e,t){return new di({...this._def,maxSize:{value:e,message:ce.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}di.create=(n,e)=>new di({valueType:n,minSize:null,maxSize:null,typeName:F.ZodSet,...Ae(e)});class oa extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.function)return Q(t,{code:K.invalid_type,expected:ne.function,received:t.parsedType}),be;function r(l,d){return Uc({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Fc(),fa].filter(f=>!!f),issueData:{code:K.invalid_arguments,argumentsError:d}})}function s(l,d){return Uc({data:l,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Fc(),fa].filter(f=>!!f),issueData:{code:K.invalid_return_type,returnTypeError:d}})}const a={errorMap:t.common.contextualErrorMap},u=t.data;if(this._def.returns instanceof pa){const l=this;return Xt(async function(...d){const f=new bn([]),h=await l._def.args.parseAsync(d,a).catch(v=>{throw f.addIssue(r(d,v)),f}),m=await Reflect.apply(u,this,h);return await l._def.returns._def.type.parseAsync(m,a).catch(v=>{throw f.addIssue(s(m,v)),f})})}else{const l=this;return Xt(function(...d){const f=l._def.args.safeParse(d,a);if(!f.success)throw new bn([r(d,f.error)]);const h=Reflect.apply(u,this,f.data),m=l._def.returns.safeParse(h,a);if(!m.success)throw new bn([s(h,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new oa({...this._def,args:Sr.create(e).rest(si.create())})}returns(e){return new oa({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new oa({args:e||Sr.create([]).rest(si.create()),returns:t||si.create(),typeName:F.ZodFunction,...Ae(r)})}}class cu extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}cu.create=(n,e)=>new cu({getter:n,typeName:F.ZodLazy,...Ae(e)});class du extends Re{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Q(t,{received:t.data,code:K.invalid_literal,expected:this._def.value}),be}return{status:"valid",value:e.data}}get value(){return this._def.value}}du.create=(n,e)=>new du({value:n,typeName:F.ZodLiteral,...Ae(e)});function e1(n,e){return new Ps({values:n,typeName:F.ZodEnum,...Ae(e)})}class Ps extends Re{constructor(){super(...arguments),Io.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),r=this._def.values;return Q(t,{expected:Ne.joinValues(r),received:t.parsedType,code:K.invalid_type}),be}if(Bc(this,Io)||JA(this,Io,new Set(this._def.values)),!Bc(this,Io).has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return Q(t,{received:t.data,code:K.invalid_enum_value,options:r}),be}return Xt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Ps.create(e,{...this._def,...t})}exclude(e,t=this._def){return Ps.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}}Io=new WeakMap;Ps.create=e1;class fu extends Re{constructor(){super(...arguments),No.set(this,void 0)}_parse(e){const t=Ne.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ne.string&&r.parsedType!==ne.number){const s=Ne.objectValues(t);return Q(r,{expected:Ne.joinValues(s),received:r.parsedType,code:K.invalid_type}),be}if(Bc(this,No)||JA(this,No,new Set(Ne.getValidEnumValues(this._def.values))),!Bc(this,No).has(e.data)){const s=Ne.objectValues(t);return Q(r,{received:r.data,code:K.invalid_enum_value,options:s}),be}return Xt(e.data)}get enum(){return this._def.values}}No=new WeakMap;fu.create=(n,e)=>new fu({values:n,typeName:F.ZodNativeEnum,...Ae(e)});class pa extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ne.promise&&t.common.async===!1)return Q(t,{code:K.invalid_type,expected:ne.promise,received:t.parsedType}),be;const r=t.parsedType===ne.promise?t.data:Promise.resolve(t.data);return Xt(r.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}pa.create=(n,e)=>new pa({type:n,typeName:F.ZodPromise,...Ae(e)});class rr extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),s=this._def.effect||null,a={addIssue:u=>{Q(r,u),u.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const u=s.transform(r.data,a);if(r.common.async)return Promise.resolve(u).then(async l=>{if(t.value==="aborted")return be;const d=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return d.status==="aborted"?be:d.status==="dirty"||t.value==="dirty"?ea(d.value):d});{if(t.value==="aborted")return be;const l=this._def.schema._parseSync({data:u,path:r.path,parent:r});return l.status==="aborted"?be:l.status==="dirty"||t.value==="dirty"?ea(l.value):l}}if(s.type==="refinement"){const u=l=>{const d=s.refinement(l,a);if(r.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?be:(l.status==="dirty"&&t.dirty(),u(l.value),{status:t.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?be:(l.status==="dirty"&&t.dirty(),u(l.value).then(()=>({status:t.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!li(u))return u;const l=s.transform(u.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>li(u)?Promise.resolve(s.transform(u.value,a)).then(l=>({status:t.value,value:l})):u);Ne.assertNever(s)}}rr.create=(n,e,t)=>new rr({schema:n,typeName:F.ZodEffects,effect:e,...Ae(t)});rr.createWithPreprocess=(n,e,t)=>new rr({schema:e,effect:{type:"preprocess",transform:n},typeName:F.ZodEffects,...Ae(t)});class er extends Re{_parse(e){return this._getType(e)===ne.undefined?Xt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}er.create=(n,e)=>new er({innerType:n,typeName:F.ZodOptional,...Ae(e)});class Cs extends Re{_parse(e){return this._getType(e)===ne.null?Xt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cs.create=(n,e)=>new Cs({innerType:n,typeName:F.ZodNullable,...Ae(e)});class hu extends Re{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}hu.create=(n,e)=>new hu({innerType:n,typeName:F.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ae(e)});class pu extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return ru(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new bn(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new bn(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}pu.create=(n,e)=>new pu({innerType:n,typeName:F.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ae(e)});class qc extends Re{_parse(e){if(this._getType(e)!==ne.nan){const r=this._getOrReturnCtx(e);return Q(r,{code:K.invalid_type,expected:ne.nan,received:r.parsedType}),be}return{status:"valid",value:e.data}}}qc.create=n=>new qc({typeName:F.ZodNaN,...Ae(n)});const s$=Symbol("zod_brand");class Fy extends Re{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Iu extends Re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?be:a.status==="dirty"?(t.dirty(),ea(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?be:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,t){return new Iu({in:e,out:t,typeName:F.ZodPipeline})}}class mu extends Re{_parse(e){const t=this._def.innerType._parse(e),r=s=>(li(s)&&(s.value=Object.freeze(s.value)),s);return ru(t)?t.then(s=>r(s)):r(t)}unwrap(){return this._def.innerType}}mu.create=(n,e)=>new mu({innerType:n,typeName:F.ZodReadonly,...Ae(e)});function Y0(n,e){const t=typeof n=="function"?n(e):typeof n=="string"?{message:n}:n;return typeof t=="string"?{message:t}:t}function t1(n,e={},t){return n?ha.create().superRefine((r,s)=>{var a,u;const l=n(r);if(l instanceof Promise)return l.then(d=>{var f,h;if(!d){const m=Y0(e,r),y=(h=(f=m.fatal)!==null&&f!==void 0?f:t)!==null&&h!==void 0?h:!0;s.addIssue({code:"custom",...m,fatal:y})}});if(!l){const d=Y0(e,r),f=(u=(a=d.fatal)!==null&&a!==void 0?a:t)!==null&&u!==void 0?u:!0;s.addIssue({code:"custom",...d,fatal:f})}}):ha.create()}const i$={object:rt.lazycreate};var F;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(F||(F={}));const a$=(n,e={message:`Input not instance of ${n.name}`})=>t1(t=>t instanceof n,e),n1=Xn.create,r1=Ts.create,o$=qc.create,u$=As.create,s1=su.create,l$=ci.create,c$=Vc.create,d$=iu.create,f$=au.create,h$=ha.create,p$=si.create,m$=zr.create,g$=zc.create,y$=Qn.create,v$=rt.create,_$=rt.strictCreate,w$=ou.create,b$=Pd.create,x$=uu.create,S$=Sr.create,E$=lu.create,T$=Hc.create,A$=di.create,P$=oa.create,C$=cu.create,k$=du.create,O$=Ps.create,R$=fu.create,I$=pa.create,Q0=rr.create,N$=er.create,j$=Cs.create,L$=rr.createWithPreprocess,$$=Iu.create,M$=()=>n1().optional(),D$=()=>r1().optional(),F$=()=>s1().optional(),U$={string:n=>Xn.create({...n,coerce:!0}),number:n=>Ts.create({...n,coerce:!0}),boolean:n=>su.create({...n,coerce:!0}),bigint:n=>As.create({...n,coerce:!0}),date:n=>ci.create({...n,coerce:!0})},B$=be;var ws=Object.freeze({__proto__:null,defaultErrorMap:fa,setErrorMap:LL,getErrorMap:Fc,makeIssue:Uc,EMPTY_PATH:$L,addIssueToContext:Q,ParseStatus:zt,INVALID:be,DIRTY:ea,OK:Xt,isAborted:ag,isDirty:og,isValid:li,isAsync:ru,get util(){return Ne},get objectUtil(){return ig},ZodParsedType:ne,getParsedType:Dr,ZodType:Re,datetimeRegex:QA,ZodString:Xn,ZodNumber:Ts,ZodBigInt:As,ZodBoolean:su,ZodDate:ci,ZodSymbol:Vc,ZodUndefined:iu,ZodNull:au,ZodAny:ha,ZodUnknown:si,ZodNever:zr,ZodVoid:zc,ZodArray:Qn,ZodObject:rt,ZodUnion:ou,ZodDiscriminatedUnion:Pd,ZodIntersection:uu,ZodTuple:Sr,ZodRecord:lu,ZodMap:Hc,ZodSet:di,ZodFunction:oa,ZodLazy:cu,ZodLiteral:du,ZodEnum:Ps,ZodNativeEnum:fu,ZodPromise:pa,ZodEffects:rr,ZodTransformer:rr,ZodOptional:er,ZodNullable:Cs,ZodDefault:hu,ZodCatch:pu,ZodNaN:qc,BRAND:s$,ZodBranded:Fy,ZodPipeline:Iu,ZodReadonly:mu,custom:t1,Schema:Re,ZodSchema:Re,late:i$,get ZodFirstPartyTypeKind(){return F},coerce:U$,any:h$,array:y$,bigint:u$,boolean:s1,date:l$,discriminatedUnion:b$,effect:Q0,enum:O$,function:P$,instanceof:a$,intersection:x$,lazy:C$,literal:k$,map:T$,nan:o$,nativeEnum:R$,never:m$,null:f$,nullable:j$,number:r1,object:v$,oboolean:F$,onumber:D$,optional:N$,ostring:M$,pipeline:$$,preprocess:L$,promise:I$,record:E$,set:A$,strictObject:_$,string:n1,symbol:c$,transformer:Q0,tuple:S$,undefined:d$,union:w$,unknown:p$,void:g$,NEVER:B$,ZodIssueCode:K,quotelessJson:jL,ZodError:bn}),vo={exports:{}},ip={},ap,ex;function V$(){if(ex)return ap;ex=1;function n(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return ap=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},r),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,s=0;s<this._errors.length;s++){var a=this._errors[s],u=a.message,l=(e[u]||0)+1;e[u]=l,l>=r&&(t=a,r=l)}return t},ap}var tx;function z$(){return tx||(tx=1,function(n){var e=V$();n.operation=function(t){var r=n.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},n.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in t)r[s]=t[s];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],u=0;u<r.retries;u++)a.push(this.createTimeout(u,r));return t&&t.forever&&!a.length&&a.push(this.createTimeout(u,r)),a.sort(function(l,d){return l-d}),a},n.createTimeout=function(t,r){var s=r.randomize?Math.random()+1:1,a=Math.round(s*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return a=Math.min(a,r.maxTimeout),a},n.wrap=function(t,r,s){if(r instanceof Array&&(s=r,r=null),!s){s=[];for(var a in t)typeof t[a]=="function"&&s.push(a)}for(var u=0;u<s.length;u++){var l=s[u],d=t[l];t[l]=(function(h){var m=n.operation(r),y=Array.prototype.slice.call(arguments,1),v=y.pop();y.push(function(w){m.retry(w)||(w&&(arguments[0]=m.mainError()),v.apply(this,arguments))}),m.attempt(function(){h.apply(t,y)})}).bind(t,d),t[l].options=r}}}(ip)),ip}var op,nx;function H$(){return nx||(nx=1,op=z$()),op}var rx;function q$(){if(rx)return vo.exports;rx=1;const n=H$(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(l){super(),l instanceof Error?(this.originalError=l,{message:l}=l):(this.originalError=new Error(l),this.originalError.stack=this.stack),this.name="AbortError",this.message=l}}const r=(u,l,d)=>{const f=d.retries-(l-1);return u.attemptNumber=l,u.retriesLeft=f,u},s=u=>e.includes(u),a=(u,l)=>new Promise((d,f)=>{l={onFailedAttempt:()=>{},retries:10,...l};const h=n.operation(l);h.attempt(async m=>{try{d(await u(m))}catch(y){if(!(y instanceof Error)){f(new TypeError(`Non-error was thrown: "${y}". You should only throw errors.`));return}if(y instanceof t)h.stop(),f(y.originalError);else if(y instanceof TypeError&&!s(y.message))h.stop(),f(y);else{r(y,m,l);try{await l.onFailedAttempt(y)}catch(v){f(v);return}h.retry(y)||f(h.mainError())}}})});return vo.exports=a,vo.exports.default=a,vo.exports.AbortError=t,vo.exports}var W$=q$();const Wc=Er(W$),Z$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function Bo(n){return typeof n=="string"&&Z$.test(n)}var kt=[];for(var up=0;up<256;++up)kt.push((up+256).toString(16).slice(1));function G$(n,e=0){return(kt[n[e+0]]+kt[n[e+1]]+kt[n[e+2]]+kt[n[e+3]]+"-"+kt[n[e+4]]+kt[n[e+5]]+"-"+kt[n[e+6]]+kt[n[e+7]]+"-"+kt[n[e+8]]+kt[n[e+9]]+"-"+kt[n[e+10]]+kt[n[e+11]]+kt[n[e+12]]+kt[n[e+13]]+kt[n[e+14]]+kt[n[e+15]]).toLowerCase()}var ac,K$=new Uint8Array(16);function J$(){if(!ac&&(ac=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ac))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ac(K$)}var X$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const sx={randomUUID:X$};function Gt(n,e,t){if(sx.randomUUID&&!n)return sx.randomUUID();n=n||{};var r=n.random||(n.rng||J$)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,G$(r)}var oc={},lp={exports:{}},ix;function Y$(){return ix||(ix=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function s(d,f,h){this.fn=d,this.context=f,this.once=h||!1}function a(d,f,h,m,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new s(h,m||d,y),w=t?t+f:f;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],v]:d._events[w].push(v):(d._events[w]=v,d._eventsCount++),d}function u(d,f){--d._eventsCount===0?d._events=new r:delete d._events[f]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var f=[],h,m;if(this._eventsCount===0)return f;for(m in h=this._events)e.call(h,m)&&f.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(h)):f},l.prototype.listeners=function(f){var h=t?t+f:f,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,v=m.length,w=new Array(v);y<v;y++)w[y]=m[y].fn;return w},l.prototype.listenerCount=function(f){var h=t?t+f:f,m=this._events[h];return m?m.fn?1:m.length:0},l.prototype.emit=function(f,h,m,y,v,w){var b=t?t+f:f;if(!this._events[b])return!1;var S=this._events[b],E=arguments.length,A,T;if(S.fn){switch(S.once&&this.removeListener(f,S.fn,void 0,!0),E){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,m),!0;case 4:return S.fn.call(S.context,h,m,y),!0;case 5:return S.fn.call(S.context,h,m,y,v),!0;case 6:return S.fn.call(S.context,h,m,y,v,w),!0}for(T=1,A=new Array(E-1);T<E;T++)A[T-1]=arguments[T];S.fn.apply(S.context,A)}else{var R=S.length,I;for(T=0;T<R;T++)switch(S[T].once&&this.removeListener(f,S[T].fn,void 0,!0),E){case 1:S[T].fn.call(S[T].context);break;case 2:S[T].fn.call(S[T].context,h);break;case 3:S[T].fn.call(S[T].context,h,m);break;case 4:S[T].fn.call(S[T].context,h,m,y);break;default:if(!A)for(I=1,A=new Array(E-1);I<E;I++)A[I-1]=arguments[I];S[T].fn.apply(S[T].context,A)}}return!0},l.prototype.on=function(f,h,m){return a(this,f,h,m,!1)},l.prototype.once=function(f,h,m){return a(this,f,h,m,!0)},l.prototype.removeListener=function(f,h,m,y){var v=t?t+f:f;if(!this._events[v])return this;if(!h)return u(this,v),this;var w=this._events[v];if(w.fn)w.fn===h&&(!y||w.once)&&(!m||w.context===m)&&u(this,v);else{for(var b=0,S=[],E=w.length;b<E;b++)(w[b].fn!==h||y&&!w[b].once||m&&w[b].context!==m)&&S.push(w[b]);S.length?this._events[v]=S.length===1?S[0]:S:u(this,v)}return this},l.prototype.removeAllListeners=function(f){var h;return f?(h=t?t+f:f,this._events[h]&&u(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,n.exports=l}(lp)),lp.exports}var _o={exports:{}},cp,ax;function Q$(){return ax||(ax=1,cp=(n,e)=>(e=e||(()=>{}),n.then(t=>new Promise(r=>{r(e())}).then(()=>t),t=>new Promise(r=>{r(e())}).then(()=>{throw t})))),cp}var ox;function e2(){if(ox)return _o.exports;ox=1;const n=Q$();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const t=(r,s,a)=>new Promise((u,l)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){u(r);return}const d=setTimeout(()=>{if(typeof a=="function"){try{u(a())}catch(m){l(m)}return}const f=typeof a=="string"?a:`Promise timed out after ${s} milliseconds`,h=a instanceof Error?a:new e(f);typeof r.cancel=="function"&&r.cancel(),l(h)},s);n(r.then(u,l),()=>{clearTimeout(d)})});return _o.exports=t,_o.exports.default=t,_o.exports.TimeoutError=e,_o.exports}var uc={},lc={},ux;function t2(){if(ux)return lc;ux=1,Object.defineProperty(lc,"__esModule",{value:!0});function n(e,t,r){let s=0,a=e.length;for(;a>0;){const u=a/2|0;let l=s+u;r(e[l],t)<=0?(s=++l,a-=u+1):a=u}return s}return lc.default=n,lc}var lx;function n2(){if(lx)return uc;lx=1,Object.defineProperty(uc,"__esModule",{value:!0});const n=t2();class e{constructor(){this._queue=[]}enqueue(r,s){s=Object.assign({priority:0},s);const a={priority:s.priority,run:r};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(a);return}const u=n.default(this._queue,a,(l,d)=>d.priority-l.priority);this._queue.splice(u,0,a)}dequeue(){const r=this._queue.shift();return r==null?void 0:r.run}filter(r){return this._queue.filter(s=>s.priority===r.priority).map(s=>s.run)}get size(){return this._queue.length}}return uc.default=e,uc}var cx;function r2(){if(cx)return oc;cx=1,Object.defineProperty(oc,"__esModule",{value:!0});const n=Y$(),e=e2(),t=n2(),r=()=>{},s=new e.TimeoutError;class a extends n{constructor(l){var d,f,h,m;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,l=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},l),!(typeof l.intervalCap=="number"&&l.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(f=(d=l.intervalCap)===null||d===void 0?void 0:d.toString())!==null&&f!==void 0?f:""}\` (${typeof l.intervalCap})`);if(l.interval===void 0||!(Number.isFinite(l.interval)&&l.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(m=(h=l.interval)===null||h===void 0?void 0:h.toString())!==null&&m!==void 0?m:""}\` (${typeof l.interval})`);this._carryoverConcurrencyCount=l.carryoverConcurrencyCount,this._isIntervalIgnored=l.intervalCap===1/0||l.interval===0,this._intervalCap=l.intervalCap,this._interval=l.interval,this._queue=new l.queueClass,this._queueClass=l.queueClass,this.concurrency=l.concurrency,this._timeout=l.timeout,this._throwOnTimeout=l.throwOnTimeout===!0,this._isPaused=l.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const l=Date.now();if(this._intervalId===void 0){const d=this._intervalEnd-l;if(d<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},d)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const l=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const d=this._queue.dequeue();return d?(this.emit("active"),d(),l&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(l){if(!(typeof l=="number"&&l>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${l}\` (${typeof l})`);this._concurrency=l,this._processQueue()}async add(l,d={}){return new Promise((f,h)=>{const m=async()=>{this._pendingCount++,this._intervalCount++;try{const y=this._timeout===void 0&&d.timeout===void 0?l():e.default(Promise.resolve(l()),d.timeout===void 0?this._timeout:d.timeout,()=>{(d.throwOnTimeout===void 0?this._throwOnTimeout:d.throwOnTimeout)&&h(s)});f(await y)}catch(y){h(y)}this._next()};this._queue.enqueue(m,d),this._tryToStartAnother(),this.emit("add")})}async addAll(l,d){return Promise.all(l.map(async f=>this.add(f,d)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(l=>{const d=this._resolveEmpty;this._resolveEmpty=()=>{d(),l()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(l=>{const d=this._resolveIdle;this._resolveIdle=()=>{d(),l()}})}get size(){return this._queue.size}sizeBy(l){return this._queue.filter(l).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(l){this._timeout=l}}return oc.default=a,oc}var s2=r2();const Ur=Er(s2),i2=(...n)=>fetch(...n),a2=Symbol.for("ls:fetch_implementation"),fe=n=>async(...e)=>{if(n||mr("DEBUG")==="true"){const[r,s]=e;console.log(` ${(s==null?void 0:s.method)||"GET"} ${r}`)}const t=await(globalThis[a2]??i2)(...e);return(n||mr("DEBUG")==="true")&&console.log(` ${t.status} ${t.statusText} ${t.url}`),t},o2=[400,401,403,404,405,406,407,408],u2=[409];let dx=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,"default"in Ur?this.queue=new Ur.default({concurrency:this.maxConcurrency}):this.queue=new Ur({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>Wc(()=>e(...t).catch(s=>{throw s instanceof Error?s:new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;const a=s==null?void 0:s.response,u=a==null?void 0:a.status;if(u){if(o2.includes(+u))throw s;if(u2.includes(+u))return;r&&await r(a)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((s,a)=>{var u;(u=e.signal)==null||u.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fe(this.debug)(...e).then(t=>t.ok?t:Promise.reject(t)))}};function fx(n){return typeof(n==null?void 0:n._getType)=="function"}function hx(n){const e={type:n._getType(),data:{content:n.content}};return n!=null&&n.additional_kwargs&&Object.keys(n.additional_kwargs).length>0&&(e.data.additional_kwargs={...n.additional_kwargs}),e}function Te(n,e){if(!Bo(n)){const t=e!==void 0?`Invalid UUID for ${e}: ${n}`:`Invalid UUID: ${n}`;throw new Error(t)}return n}const px={};function i1(n){px[n]||(console.warn(n),px[n]=!0)}var cc={exports:{}},dp,mx;function Cd(){if(mx)return dp;mx=1;const n="2.0.0",e=256,t=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=e-6;return dp={MAX_LENGTH:e,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},dp}var fp,gx;function kd(){if(gx)return fp;gx=1;var n={};return fp=typeof process=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{},fp}var yx;function Nu(){return yx||(yx=1,function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=Cd(),a=kd();e=n.exports={};const u=e.re=[],l=e.safeRe=[],d=e.src=[],f=e.safeSrc=[],h=e.t={};let m=0;const y="[a-zA-Z0-9-]",v=[["\\s",1],["\\d",s],[y,r]],w=S=>{for(const[E,A]of v)S=S.split(`${E}*`).join(`${E}{0,${A}}`).split(`${E}+`).join(`${E}{1,${A}}`);return S},b=(S,E,A)=>{const T=w(E),R=m++;a(S,R,E),h[S]=R,d[R]=E,f[R]=T,u[R]=new RegExp(E,A?"g":void 0),l[R]=new RegExp(T,A?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),b("MAINVERSION",`(${d[h.NUMERICIDENTIFIER]})\\.(${d[h.NUMERICIDENTIFIER]})\\.(${d[h.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${d[h.NUMERICIDENTIFIERLOOSE]})\\.(${d[h.NUMERICIDENTIFIERLOOSE]})\\.(${d[h.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${d[h.NONNUMERICIDENTIFIER]}|${d[h.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${d[h.NONNUMERICIDENTIFIER]}|${d[h.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${d[h.PRERELEASEIDENTIFIER]}(?:\\.${d[h.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${d[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[h.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${y}+`),b("BUILD",`(?:\\+(${d[h.BUILDIDENTIFIER]}(?:\\.${d[h.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${d[h.MAINVERSION]}${d[h.PRERELEASE]}?${d[h.BUILD]}?`),b("FULL",`^${d[h.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${d[h.MAINVERSIONLOOSE]}${d[h.PRERELEASELOOSE]}?${d[h.BUILD]}?`),b("LOOSE",`^${d[h.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${d[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${d[h.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${d[h.XRANGEIDENTIFIER]})(?:\\.(${d[h.XRANGEIDENTIFIER]})(?:\\.(${d[h.XRANGEIDENTIFIER]})(?:${d[h.PRERELEASE]})?${d[h.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${d[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[h.XRANGEIDENTIFIERLOOSE]})(?:${d[h.PRERELEASELOOSE]})?${d[h.BUILD]}?)?)?`),b("XRANGE",`^${d[h.GTLT]}\\s*${d[h.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${d[h.GTLT]}\\s*${d[h.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),b("COERCE",`${d[h.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",d[h.COERCEPLAIN]+`(?:${d[h.PRERELEASE]})?(?:${d[h.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",d[h.COERCE],!0),b("COERCERTLFULL",d[h.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${d[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",b("TILDE",`^${d[h.LONETILDE]}${d[h.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${d[h.LONETILDE]}${d[h.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${d[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",b("CARET",`^${d[h.LONECARET]}${d[h.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${d[h.LONECARET]}${d[h.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${d[h.GTLT]}\\s*(${d[h.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${d[h.GTLT]}\\s*(${d[h.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${d[h.GTLT]}\\s*(${d[h.LOOSEPLAIN]}|${d[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${d[h.XRANGEPLAIN]})\\s+-\\s+(${d[h.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${d[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[h.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(cc,cc.exports)),cc.exports}var hp,vx;function Uy(){if(vx)return hp;vx=1;const n=Object.freeze({loose:!0}),e=Object.freeze({});return hp=r=>r?typeof r!="object"?n:r:e,hp}var pp,_x;function a1(){if(_x)return pp;_x=1;const n=/^[0-9]+$/,e=(r,s)=>{const a=n.test(r),u=n.test(s);return a&&u&&(r=+r,s=+s),r===s?0:a&&!u?-1:u&&!a?1:r<s?-1:1};return pp={compareIdentifiers:e,rcompareIdentifiers:(r,s)=>e(s,r)},pp}var mp,wx;function Yt(){if(wx)return mp;wx=1;const n=kd(),{MAX_LENGTH:e,MAX_SAFE_INTEGER:t}=Cd(),{safeRe:r,t:s}=Nu(),a=Uy(),{compareIdentifiers:u}=a1();class l{constructor(f,h){if(h=a(h),f instanceof l){if(f.loose===!!h.loose&&f.includePrerelease===!!h.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>e)throw new TypeError(`version is longer than ${e} characters`);n("SemVer",f,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const m=f.trim().match(h.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>t||this.major<0)throw new TypeError("Invalid major version");if(this.minor>t||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>t||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const v=+y;if(v>=0&&v<t)return v}return y}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(n("SemVer.compare",this.version,this.options,f),!(f instanceof l)){if(typeof f=="string"&&f===this.version)return 0;f=new l(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof l||(f=new l(f,this.options)),u(this.major,f.major)||u(this.minor,f.minor)||u(this.patch,f.patch)}comparePre(f){if(f instanceof l||(f=new l(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let h=0;do{const m=this.prerelease[h],y=f.prerelease[h];if(n("prerelease compare",h,m,y),m===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(m===void 0)return-1;if(m===y)continue;return u(m,y)}while(++h)}compareBuild(f){f instanceof l||(f=new l(f,this.options));let h=0;do{const m=this.build[h],y=f.build[h];if(n("build compare",h,m,y),m===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(m===void 0)return-1;if(m===y)continue;return u(m,y)}while(++h)}inc(f,h,m){if(f.startsWith("pre")){if(!h&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const y=`-${h}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!y||y[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,m),this.inc("pre",h,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,m),this.inc("pre",h,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(h===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(h){let v=[h,y];m===!1&&(v=[h]),u(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return mp=l,mp}var gp,bx;function Aa(){if(bx)return gp;bx=1;const n=Yt();return gp=(t,r,s=!1)=>{if(t instanceof n)return t;try{return new n(t,r)}catch(a){if(!s)return null;throw a}},gp}var yp,xx;function l2(){if(xx)return yp;xx=1;const n=Aa();return yp=(t,r)=>{const s=n(t,r);return s?s.version:null},yp}var vp,Sx;function c2(){if(Sx)return vp;Sx=1;const n=Aa();return vp=(t,r)=>{const s=n(t.trim().replace(/^[=v]+/,""),r);return s?s.version:null},vp}var _p,Ex;function d2(){if(Ex)return _p;Ex=1;const n=Yt();return _p=(t,r,s,a,u)=>{typeof s=="string"&&(u=a,a=s,s=void 0);try{return new n(t instanceof n?t.version:t,s).inc(r,a,u).version}catch{return null}},_p}var wp,Tx;function f2(){if(Tx)return wp;Tx=1;const n=Aa();return wp=(t,r)=>{const s=n(t,null,!0),a=n(r,null,!0),u=s.compare(a);if(u===0)return null;const l=u>0,d=l?s:a,f=l?a:s,h=!!d.prerelease.length;if(!!f.prerelease.length&&!h){if(!f.patch&&!f.minor)return"major";if(f.compareMain(d)===0)return f.minor&&!f.patch?"minor":"patch"}const y=h?"pre":"";return s.major!==a.major?y+"major":s.minor!==a.minor?y+"minor":s.patch!==a.patch?y+"patch":"prerelease"},wp}var bp,Ax;function h2(){if(Ax)return bp;Ax=1;const n=Yt();return bp=(t,r)=>new n(t,r).major,bp}var xp,Px;function p2(){if(Px)return xp;Px=1;const n=Yt();return xp=(t,r)=>new n(t,r).minor,xp}var Sp,Cx;function m2(){if(Cx)return Sp;Cx=1;const n=Yt();return Sp=(t,r)=>new n(t,r).patch,Sp}var Ep,kx;function g2(){if(kx)return Ep;kx=1;const n=Aa();return Ep=(t,r)=>{const s=n(t,r);return s&&s.prerelease.length?s.prerelease:null},Ep}var Tp,Ox;function ir(){if(Ox)return Tp;Ox=1;const n=Yt();return Tp=(t,r,s)=>new n(t,s).compare(new n(r,s)),Tp}var Ap,Rx;function y2(){if(Rx)return Ap;Rx=1;const n=ir();return Ap=(t,r,s)=>n(r,t,s),Ap}var Pp,Ix;function v2(){if(Ix)return Pp;Ix=1;const n=ir();return Pp=(t,r)=>n(t,r,!0),Pp}var Cp,Nx;function By(){if(Nx)return Cp;Nx=1;const n=Yt();return Cp=(t,r,s)=>{const a=new n(t,s),u=new n(r,s);return a.compare(u)||a.compareBuild(u)},Cp}var kp,jx;function _2(){if(jx)return kp;jx=1;const n=By();return kp=(t,r)=>t.sort((s,a)=>n(s,a,r)),kp}var Op,Lx;function w2(){if(Lx)return Op;Lx=1;const n=By();return Op=(t,r)=>t.sort((s,a)=>n(a,s,r)),Op}var Rp,$x;function Od(){if($x)return Rp;$x=1;const n=ir();return Rp=(t,r,s)=>n(t,r,s)>0,Rp}var Ip,Mx;function Vy(){if(Mx)return Ip;Mx=1;const n=ir();return Ip=(t,r,s)=>n(t,r,s)<0,Ip}var Np,Dx;function o1(){if(Dx)return Np;Dx=1;const n=ir();return Np=(t,r,s)=>n(t,r,s)===0,Np}var jp,Fx;function u1(){if(Fx)return jp;Fx=1;const n=ir();return jp=(t,r,s)=>n(t,r,s)!==0,jp}var Lp,Ux;function zy(){if(Ux)return Lp;Ux=1;const n=ir();return Lp=(t,r,s)=>n(t,r,s)>=0,Lp}var $p,Bx;function Hy(){if(Bx)return $p;Bx=1;const n=ir();return $p=(t,r,s)=>n(t,r,s)<=0,$p}var Mp,Vx;function l1(){if(Vx)return Mp;Vx=1;const n=o1(),e=u1(),t=Od(),r=zy(),s=Vy(),a=Hy();return Mp=(l,d,f,h)=>{switch(d){case"===":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l===f;case"!==":return typeof l=="object"&&(l=l.version),typeof f=="object"&&(f=f.version),l!==f;case"":case"=":case"==":return n(l,f,h);case"!=":return e(l,f,h);case">":return t(l,f,h);case">=":return r(l,f,h);case"<":return s(l,f,h);case"<=":return a(l,f,h);default:throw new TypeError(`Invalid operator: ${d}`)}},Mp}var Dp,zx;function b2(){if(zx)return Dp;zx=1;const n=Yt(),e=Aa(),{safeRe:t,t:r}=Nu();return Dp=(a,u)=>{if(a instanceof n)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;u=u||{};let l=null;if(!u.rtl)l=a.match(u.includePrerelease?t[r.COERCEFULL]:t[r.COERCE]);else{const v=u.includePrerelease?t[r.COERCERTLFULL]:t[r.COERCERTL];let w;for(;(w=v.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||w.index+w[0].length!==l.index+l[0].length)&&(l=w),v.lastIndex=w.index+w[1].length+w[2].length;v.lastIndex=-1}if(l===null)return null;const d=l[2],f=l[3]||"0",h=l[4]||"0",m=u.includePrerelease&&l[5]?`-${l[5]}`:"",y=u.includePrerelease&&l[6]?`+${l[6]}`:"";return e(`${d}.${f}.${h}${m}${y}`,u)},Dp}var Fp,Hx;function x2(){if(Hx)return Fp;Hx=1;class n{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(t,r)}return this}}return Fp=n,Fp}var Up,qx;function ar(){if(qx)return Up;qx=1;const n=/\s+/g;class e{constructor(J,te){if(te=s(te),J instanceof e)return J.loose===!!te.loose&&J.includePrerelease===!!te.includePrerelease?J:new e(J.raw,te);if(J instanceof a)return this.raw=J.value,this.set=[[J]],this.formatted=void 0,this;if(this.options=te,this.loose=!!te.loose,this.includePrerelease=!!te.includePrerelease,this.raw=J.trim().replace(n," "),this.set=this.raw.split("||").map(Z=>this.parseRange(Z.trim())).filter(Z=>Z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Z=this.set[0];if(this.set=this.set.filter(D=>!b(D[0])),this.set.length===0)this.set=[Z];else if(this.set.length>1){for(const D of this.set)if(D.length===1&&S(D[0])){this.set=[D];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let J=0;J<this.set.length;J++){J>0&&(this.formatted+="||");const te=this.set[J];for(let Z=0;Z<te.length;Z++)Z>0&&(this.formatted+=" "),this.formatted+=te[Z].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(J){const Z=((this.options.includePrerelease&&v)|(this.options.loose&&w))+":"+J,D=r.get(Z);if(D)return D;const z=this.options.loose,V=z?d[f.HYPHENRANGELOOSE]:d[f.HYPHENRANGE];J=J.replace(V,We(this.options.includePrerelease)),u("hyphen replace",J),J=J.replace(d[f.COMPARATORTRIM],h),u("comparator trim",J),J=J.replace(d[f.TILDETRIM],m),u("tilde trim",J),J=J.replace(d[f.CARETTRIM],y),u("caret trim",J);let k=J.split(" ").map(pe=>A(pe,this.options)).join(" ").split(/\s+/).map(pe=>ve(pe,this.options));z&&(k=k.filter(pe=>(u("loose invalid filter",pe,this.options),!!pe.match(d[f.COMPARATORLOOSE])))),u("range list",k);const $=new Map,re=k.map(pe=>new a(pe,this.options));for(const pe of re){if(b(pe))return[pe];$.set(pe.value,pe)}$.size>1&&$.has("")&&$.delete("");const he=[...$.values()];return r.set(Z,he),he}intersects(J,te){if(!(J instanceof e))throw new TypeError("a Range is required");return this.set.some(Z=>E(Z,te)&&J.set.some(D=>E(D,te)&&Z.every(z=>D.every(V=>z.intersects(V,te)))))}test(J){if(!J)return!1;if(typeof J=="string")try{J=new l(J,this.options)}catch{return!1}for(let te=0;te<this.set.length;te++)if(Ze(this.set[te],J,this.options))return!0;return!1}}Up=e;const t=x2(),r=new t,s=Uy(),a=Rd(),u=kd(),l=Yt(),{safeRe:d,t:f,comparatorTrimReplace:h,tildeTrimReplace:m,caretTrimReplace:y}=Nu(),{FLAG_INCLUDE_PRERELEASE:v,FLAG_LOOSE:w}=Cd(),b=Y=>Y.value==="<0.0.0-0",S=Y=>Y.value==="",E=(Y,J)=>{let te=!0;const Z=Y.slice();let D=Z.pop();for(;te&&Z.length;)te=Z.every(z=>D.intersects(z,J)),D=Z.pop();return te},A=(Y,J)=>(u("comp",Y,J),Y=M(Y,J),u("caret",Y),Y=R(Y,J),u("tildes",Y),Y=U(Y,J),u("xrange",Y),Y=de(Y,J),u("stars",Y),Y),T=Y=>!Y||Y.toLowerCase()==="x"||Y==="*",R=(Y,J)=>Y.trim().split(/\s+/).map(te=>I(te,J)).join(" "),I=(Y,J)=>{const te=J.loose?d[f.TILDELOOSE]:d[f.TILDE];return Y.replace(te,(Z,D,z,V,k)=>{u("tilde",Y,Z,D,z,V,k);let $;return T(D)?$="":T(z)?$=`>=${D}.0.0 <${+D+1}.0.0-0`:T(V)?$=`>=${D}.${z}.0 <${D}.${+z+1}.0-0`:k?(u("replaceTilde pr",k),$=`>=${D}.${z}.${V}-${k} <${D}.${+z+1}.0-0`):$=`>=${D}.${z}.${V} <${D}.${+z+1}.0-0`,u("tilde return",$),$})},M=(Y,J)=>Y.trim().split(/\s+/).map(te=>B(te,J)).join(" "),B=(Y,J)=>{u("caret",Y,J);const te=J.loose?d[f.CARETLOOSE]:d[f.CARET],Z=J.includePrerelease?"-0":"";return Y.replace(te,(D,z,V,k,$)=>{u("caret",Y,D,z,V,k,$);let re;return T(z)?re="":T(V)?re=`>=${z}.0.0${Z} <${+z+1}.0.0-0`:T(k)?z==="0"?re=`>=${z}.${V}.0${Z} <${z}.${+V+1}.0-0`:re=`>=${z}.${V}.0${Z} <${+z+1}.0.0-0`:$?(u("replaceCaret pr",$),z==="0"?V==="0"?re=`>=${z}.${V}.${k}-${$} <${z}.${V}.${+k+1}-0`:re=`>=${z}.${V}.${k}-${$} <${z}.${+V+1}.0-0`:re=`>=${z}.${V}.${k}-${$} <${+z+1}.0.0-0`):(u("no pr"),z==="0"?V==="0"?re=`>=${z}.${V}.${k}${Z} <${z}.${V}.${+k+1}-0`:re=`>=${z}.${V}.${k}${Z} <${z}.${+V+1}.0-0`:re=`>=${z}.${V}.${k} <${+z+1}.0.0-0`),u("caret return",re),re})},U=(Y,J)=>(u("replaceXRanges",Y,J),Y.split(/\s+/).map(te=>ie(te,J)).join(" ")),ie=(Y,J)=>{Y=Y.trim();const te=J.loose?d[f.XRANGELOOSE]:d[f.XRANGE];return Y.replace(te,(Z,D,z,V,k,$)=>{u("xRange",Y,Z,D,z,V,k,$);const re=T(z),he=re||T(V),pe=he||T(k),Ce=pe;return D==="="&&Ce&&(D=""),$=J.includePrerelease?"-0":"",re?D===">"||D==="<"?Z="<0.0.0-0":Z="*":D&&Ce?(he&&(V=0),k=0,D===">"?(D=">=",he?(z=+z+1,V=0,k=0):(V=+V+1,k=0)):D==="<="&&(D="<",he?z=+z+1:V=+V+1),D==="<"&&($="-0"),Z=`${D+z}.${V}.${k}${$}`):he?Z=`>=${z}.0.0${$} <${+z+1}.0.0-0`:pe&&(Z=`>=${z}.${V}.0${$} <${z}.${+V+1}.0-0`),u("xRange return",Z),Z})},de=(Y,J)=>(u("replaceStars",Y,J),Y.trim().replace(d[f.STAR],"")),ve=(Y,J)=>(u("replaceGTE0",Y,J),Y.trim().replace(d[J.includePrerelease?f.GTE0PRE:f.GTE0],"")),We=Y=>(J,te,Z,D,z,V,k,$,re,he,pe,Ce)=>(T(Z)?te="":T(D)?te=`>=${Z}.0.0${Y?"-0":""}`:T(z)?te=`>=${Z}.${D}.0${Y?"-0":""}`:V?te=`>=${te}`:te=`>=${te}${Y?"-0":""}`,T(re)?$="":T(he)?$=`<${+re+1}.0.0-0`:T(pe)?$=`<${re}.${+he+1}.0-0`:Ce?$=`<=${re}.${he}.${pe}-${Ce}`:Y?$=`<${re}.${he}.${+pe+1}-0`:$=`<=${$}`,`${te} ${$}`.trim()),Ze=(Y,J,te)=>{for(let Z=0;Z<Y.length;Z++)if(!Y[Z].test(J))return!1;if(J.prerelease.length&&!te.includePrerelease){for(let Z=0;Z<Y.length;Z++)if(u(Y[Z].semver),Y[Z].semver!==a.ANY&&Y[Z].semver.prerelease.length>0){const D=Y[Z].semver;if(D.major===J.major&&D.minor===J.minor&&D.patch===J.patch)return!0}return!1}return!0};return Up}var Bp,Wx;function Rd(){if(Wx)return Bp;Wx=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(h,m){if(m=t(m),h instanceof e){if(h.loose===!!m.loose)return h;h=h.value}h=h.trim().split(/\s+/).join(" "),u("comparator",h,m),this.options=m,this.loose=!!m.loose,this.parse(h),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(h){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],y=h.match(m);if(!y)throw new TypeError(`Invalid comparator: ${h}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new l(y[2],this.options.loose):this.semver=n}toString(){return this.value}test(h){if(u("Comparator.test",h,this.options.loose),this.semver===n||h===n)return!0;if(typeof h=="string")try{h=new l(h,this.options)}catch{return!1}return a(h,this.operator,this.semver,this.options)}intersects(h,m){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(h.value,m).test(this.value):h.operator===""?h.value===""?!0:new d(this.value,m).test(h.semver):(m=t(m),m.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||a(this.semver,"<",h.semver,m)&&this.operator.startsWith(">")&&h.operator.startsWith("<")||a(this.semver,">",h.semver,m)&&this.operator.startsWith("<")&&h.operator.startsWith(">")))}}Bp=e;const t=Uy(),{safeRe:r,t:s}=Nu(),a=l1(),u=kd(),l=Yt(),d=ar();return Bp}var Vp,Zx;function Id(){if(Zx)return Vp;Zx=1;const n=ar();return Vp=(t,r,s)=>{try{r=new n(r,s)}catch{return!1}return r.test(t)},Vp}var zp,Gx;function S2(){if(Gx)return zp;Gx=1;const n=ar();return zp=(t,r)=>new n(t,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),zp}var Hp,Kx;function E2(){if(Kx)return Hp;Kx=1;const n=Yt(),e=ar();return Hp=(r,s,a)=>{let u=null,l=null,d=null;try{d=new e(s,a)}catch{return null}return r.forEach(f=>{d.test(f)&&(!u||l.compare(f)===-1)&&(u=f,l=new n(u,a))}),u},Hp}var qp,Jx;function T2(){if(Jx)return qp;Jx=1;const n=Yt(),e=ar();return qp=(r,s,a)=>{let u=null,l=null,d=null;try{d=new e(s,a)}catch{return null}return r.forEach(f=>{d.test(f)&&(!u||l.compare(f)===1)&&(u=f,l=new n(u,a))}),u},qp}var Wp,Xx;function A2(){if(Xx)return Wp;Xx=1;const n=Yt(),e=ar(),t=Od();return Wp=(s,a)=>{s=new e(s,a);let u=new n("0.0.0");if(s.test(u)||(u=new n("0.0.0-0"),s.test(u)))return u;u=null;for(let l=0;l<s.set.length;++l){const d=s.set[l];let f=null;d.forEach(h=>{const m=new n(h.semver.version);switch(h.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!f||t(m,f))&&(f=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${h.operator}`)}}),f&&(!u||t(u,f))&&(u=f)}return u&&s.test(u)?u:null},Wp}var Zp,Yx;function P2(){if(Yx)return Zp;Yx=1;const n=ar();return Zp=(t,r)=>{try{return new n(t,r).range||"*"}catch{return null}},Zp}var Gp,Qx;function qy(){if(Qx)return Gp;Qx=1;const n=Yt(),e=Rd(),{ANY:t}=e,r=ar(),s=Id(),a=Od(),u=Vy(),l=Hy(),d=zy();return Gp=(h,m,y,v)=>{h=new n(h,v),m=new r(m,v);let w,b,S,E,A;switch(y){case">":w=a,b=l,S=u,E=">",A=">=";break;case"<":w=u,b=d,S=a,E="<",A="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(h,m,v))return!1;for(let T=0;T<m.set.length;++T){const R=m.set[T];let I=null,M=null;if(R.forEach(B=>{B.semver===t&&(B=new e(">=0.0.0")),I=I||B,M=M||B,w(B.semver,I.semver,v)?I=B:S(B.semver,M.semver,v)&&(M=B)}),I.operator===E||I.operator===A||(!M.operator||M.operator===E)&&b(h,M.semver))return!1;if(M.operator===A&&S(h,M.semver))return!1}return!0},Gp}var Kp,eS;function C2(){if(eS)return Kp;eS=1;const n=qy();return Kp=(t,r,s)=>n(t,r,">",s),Kp}var Jp,tS;function k2(){if(tS)return Jp;tS=1;const n=qy();return Jp=(t,r,s)=>n(t,r,"<",s),Jp}var Xp,nS;function O2(){if(nS)return Xp;nS=1;const n=ar();return Xp=(t,r,s)=>(t=new n(t,s),r=new n(r,s),t.intersects(r,s)),Xp}var Yp,rS;function R2(){if(rS)return Yp;rS=1;const n=Id(),e=ir();return Yp=(t,r,s)=>{const a=[];let u=null,l=null;const d=t.sort((y,v)=>e(y,v,s));for(const y of d)n(y,r,s)?(l=y,u||(u=y)):(l&&a.push([u,l]),l=null,u=null);u&&a.push([u,null]);const f=[];for(const[y,v]of a)y===v?f.push(y):!v&&y===d[0]?f.push("*"):v?y===d[0]?f.push(`<=${v}`):f.push(`${y} - ${v}`):f.push(`>=${y}`);const h=f.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return h.length<m.length?h:r},Yp}var Qp,sS;function I2(){if(sS)return Qp;sS=1;const n=ar(),e=Rd(),{ANY:t}=e,r=Id(),s=ir(),a=(m,y,v={})=>{if(m===y)return!0;m=new n(m,v),y=new n(y,v);let w=!1;e:for(const b of m.set){for(const S of y.set){const E=d(b,S,v);if(w=w||E!==null,E)continue e}if(w)return!1}return!0},u=[new e(">=0.0.0-0")],l=[new e(">=0.0.0")],d=(m,y,v)=>{if(m===y)return!0;if(m.length===1&&m[0].semver===t){if(y.length===1&&y[0].semver===t)return!0;v.includePrerelease?m=u:m=l}if(y.length===1&&y[0].semver===t){if(v.includePrerelease)return!0;y=l}const w=new Set;let b,S;for(const U of m)U.operator===">"||U.operator===">="?b=f(b,U,v):U.operator==="<"||U.operator==="<="?S=h(S,U,v):w.add(U.semver);if(w.size>1)return null;let E;if(b&&S){if(E=s(b.semver,S.semver,v),E>0)return null;if(E===0&&(b.operator!==">="||S.operator!=="<="))return null}for(const U of w){if(b&&!r(U,String(b),v)||S&&!r(U,String(S),v))return null;for(const ie of y)if(!r(U,String(ie),v))return!1;return!0}let A,T,R,I,M=S&&!v.includePrerelease&&S.semver.prerelease.length?S.semver:!1,B=b&&!v.includePrerelease&&b.semver.prerelease.length?b.semver:!1;M&&M.prerelease.length===1&&S.operator==="<"&&M.prerelease[0]===0&&(M=!1);for(const U of y){if(I=I||U.operator===">"||U.operator===">=",R=R||U.operator==="<"||U.operator==="<=",b){if(B&&U.semver.prerelease&&U.semver.prerelease.length&&U.semver.major===B.major&&U.semver.minor===B.minor&&U.semver.patch===B.patch&&(B=!1),U.operator===">"||U.operator===">="){if(A=f(b,U,v),A===U&&A!==b)return!1}else if(b.operator===">="&&!r(b.semver,String(U),v))return!1}if(S){if(M&&U.semver.prerelease&&U.semver.prerelease.length&&U.semver.major===M.major&&U.semver.minor===M.minor&&U.semver.patch===M.patch&&(M=!1),U.operator==="<"||U.operator==="<="){if(T=h(S,U,v),T===U&&T!==S)return!1}else if(S.operator==="<="&&!r(S.semver,String(U),v))return!1}if(!U.operator&&(S||b)&&E!==0)return!1}return!(b&&R&&!S&&E!==0||S&&I&&!b&&E!==0||B||M)},f=(m,y,v)=>{if(!m)return y;const w=s(m.semver,y.semver,v);return w>0?m:w<0||y.operator===">"&&m.operator===">="?y:m},h=(m,y,v)=>{if(!m)return y;const w=s(m.semver,y.semver,v);return w<0?m:w>0||y.operator==="<"&&m.operator==="<="?y:m};return Qp=a,Qp}var em,iS;function N2(){if(iS)return em;iS=1;const n=Nu(),e=Cd(),t=Yt(),r=a1(),s=Aa(),a=l2(),u=c2(),l=d2(),d=f2(),f=h2(),h=p2(),m=m2(),y=g2(),v=ir(),w=y2(),b=v2(),S=By(),E=_2(),A=w2(),T=Od(),R=Vy(),I=o1(),M=u1(),B=zy(),U=Hy(),ie=l1(),de=b2(),ve=Rd(),We=ar(),Ze=Id(),Y=S2(),J=E2(),te=T2(),Z=A2(),D=P2(),z=qy(),V=C2(),k=k2(),$=O2(),re=R2(),he=I2();return em={parse:s,valid:a,clean:u,inc:l,diff:d,major:f,minor:h,patch:m,prerelease:y,compare:v,rcompare:w,compareLoose:b,compareBuild:S,sort:E,rsort:A,gt:T,lt:R,eq:I,neq:M,gte:B,lte:U,cmp:ie,coerce:de,Comparator:ve,Range:We,satisfies:Ze,toComparators:Y,maxSatisfying:J,minSatisfying:te,minVersion:Z,validRange:D,outside:z,gtr:V,ltr:k,intersects:$,simplifyRange:re,subset:he,SemVer:t,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:e.SEMVER_SPEC_VERSION,RELEASE_TYPES:e.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},em}N2();function hs(n){if(!n||n.split("/").length>2||n.startsWith("/")||n.endsWith("/")||n.split(":").length>2)throw new Error(`Invalid identifier format: ${n}`);const[e,t]=n.split(":"),r=t||"latest";if(e.includes("/")){const[s,a]=e.split("/",2);if(!s||!a)throw new Error(`Invalid identifier format: ${n}`);return[s,a,r]}else{if(!e)throw new Error(`Invalid identifier format: ${n}`);return["-",e,r]}}class j2 extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function ke(n,e,t){let r;if(n.ok){t&&(r=await n.text());return}r=await n.text();const s=`Failed to ${e}. Received status [${n.status}]: ${n.statusText}. Server response: ${r}`;if(n.status===409)throw new j2(s);const a=new Error(s);throw a.status=n.status,a}var aS="[...]",L2={result:"[Circular]"},Zc=[],ta=[];const $2=new TextEncoder;function M2(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function dc(n){return $2.encode(n)}function yn(n,e,t,r){var s;try{const a=JSON.stringify(n,e,t);return dc(a)}catch(a){if(!((s=a.message)!=null&&s.includes("Converting circular structure to JSON")))return console.warn("[WARNING]: LangSmith received unserializable value."),dc("[Unserializable]");console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance."),typeof r>"u"&&(r=M2()),lg(n,"",0,[],void 0,0,r);let u;try{ta.length===0?u=JSON.stringify(n,e,t):u=JSON.stringify(n,D2(e),t)}catch{return dc("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Zc.length!==0;){const l=Zc.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return dc(u)}}function tm(n,e,t,r){var s=Object.getOwnPropertyDescriptor(r,t);s.get!==void 0?s.configurable?(Object.defineProperty(r,t,{value:n}),Zc.push([r,t,e,s])):ta.push([e,t,n]):(r[t]=n,Zc.push([r,t,e]))}function lg(n,e,t,r,s,a,u){a+=1;var l;if(typeof n=="object"&&n!==null){for(l=0;l<r.length;l++)if(r[l]===n){tm(L2,n,e,s);return}if(typeof u.depthLimit<"u"&&a>u.depthLimit){tm(aS,n,e,s);return}if(typeof u.edgesLimit<"u"&&t+1>u.edgesLimit){tm(aS,n,e,s);return}if(r.push(n),Array.isArray(n))for(l=0;l<n.length;l++)lg(n[l],l,l,r,n,a,u);else{var d=Object.keys(n);for(l=0;l<d.length;l++){var f=d[l];lg(n[f],f,l,r,n,a,u)}}r.pop()}}function D2(n){return n=typeof n<"u"?n:function(e,t){return t},function(e,t){if(ta.length>0)for(var r=0;r<ta.length;r++){var s=ta[r];if(s[1]===e&&s[0]===t){t=s[2],ta.splice(r,1);break}}return n.call(this,e,t)}}function oS(n){const e=f1(),t=X2(),r=n.extra??{},s=r.metadata;return n.extra={...r,runtime:{...e,...r==null?void 0:r.runtime},metadata:{...t,...t.revision_id||n.revision_id?{revision_id:n.revision_id??t.revision_id}:{},...s}},n}const F2=n=>{const e=(n==null?void 0:n.toString())??mr("TRACING_SAMPLING_RATE");if(e===void 0)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t},U2=n=>{const t=n.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"};async function B2(n){const e=[];for await(const t of n)e.push(t);return e}function nm(n){if(n!==void 0)return n.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const V2=async n=>{if((n==null?void 0:n.status)===429){const e=parseInt(n.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(t=>setTimeout(t,e)),!0}return!1};function uS(n){return typeof n=="number"?Number(n.toFixed(4)):n}class z2{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(a=>{t=a}),s=yn(e.item).length;return this.items.push({action:e.action,payload:e.item,itemPromiseResolve:t,itemPromise:r,size:s}),this.sizeBytes+=s,r}pop(e){var s;if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(((s=this.peek())==null?void 0:s.size)??0)<e&&this.items.length>0;){const a=this.items.shift();a&&(t.push(a),r+=a.size,this.sizeBytes-=a.size)}if(t.length===0&&this.items.length>0){const a=this.items.shift();t.push(a),r+=a.size,this.sizeBytes-=a.size}return[t.map(a=>({action:a.action,item:a.payload})),()=>t.forEach(a=>a.itemPromiseResolve())]}}const H2=20971520,q2=2500;class gu{constructor(e={}){var r;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new z2}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:bs("LANGSMITH_TRACING_BACKGROUND")==="false"}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:bs("LANGSMITH_DEBUG")==="true"});const t=gu.getDefaultClientConfig();if(this.tracingSampleRate=F2(e.tracingSamplingRate),this.apiUrl=nm(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=nm(e.apiKey??t.apiKey),this.webUrl=nm(e.webUrl??t.webUrl),(r=this.webUrl)!=null&&r.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new dx({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new dx({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:V2,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode}static getDefaultClientConfig(){const e=mr("API_KEY"),t=mr("ENDPOINT")??"https://api.smith.langchain.com",r=mr("HIDE_INPUTS")==="true",s=mr("HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:r,hideOutputs:s}}getHostUrl(){return this.webUrl?this.webUrl:U2(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${c1}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}async processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return t.inputs!==void 0&&(t.inputs=await this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=(t==null?void 0:t.toString())??"",s=`${this.apiUrl}${e}?${r}`,a=await this.caller.call(fe(this.debug),s,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(a,`Failed to fetch ${e}`),a}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let s=Number(t.get("offset"))||0;const a=Number(t.get("limit"))||100;for(;;){t.set("offset",String(s)),t.set("limit",String(a));const u=`${this.apiUrl}${e}?${t}`,l=await this.caller.call(fe(this.debug),u,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(l,`Failed to fetch ${e}`);const d=r?r(await l.json()):await l.json();if(d.length===0||(yield d,d.length<a))break;s+=d.length}}async*_getCursorPaginatedList(e,t=null,r="POST",s="runs"){const a=t?{...t}:{};for(;;){const l=await(await this.caller.call(fe(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(a)})).json();if(!l||!l[s])break;yield l[s];const d=l.cursors;if(!d||!d.next)break;a.cursor=d.next}}_shouldSample(){return this.tracingSampleRate===void 0?!0:Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(this.tracingSampleRate===void 0)return e;if(t){const r=[];for(const s of e)this.filteredPostUuids.has(s.id)?this.filteredPostUuids.delete(s.id):r.push(s);return r}else{const r=[];for(const s of e){const a=s.trace_id??s.id;this.filteredPostUuids.has(a)||(s.id===a?this._shouldSample()?r.push(s):this.filteredPostUuids.add(a):r.push(s))}return r}}async _getBatchSizeLimitBytes(){var t;const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??((t=e.batch_ingest_config)==null?void 0:t.size_limit_bytes)??H2}async _getMultiPartSupport(){var t;return((t=(await this._ensureServerInfo()).instance_flags)==null?void 0:t.dataset_examples_multipart_enabled)??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[r,s]=this.autoBatchQueue.pop(e);if(!r.length){s();break}const a=this._processBatch(r,s).catch(console.error);t.push(a)}return Promise.all(t)}async _processBatch(e,t){var r;if(!e.length){t();return}try{const s={runCreates:e.filter(u=>u.action==="create").map(u=>u.item),runUpdates:e.filter(u=>u.action==="update").map(u=>u.item)},a=await this._ensureServerInfo();(r=a==null?void 0:a.batch_ingest_config)!=null&&r.use_multipart_endpoint?await this.multipartIngestRuns(s):await this.batchIngestRuns(s)}finally{t()}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,e.action==="create"&&(e.item=oS(e.item));const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await this.caller.call(fe(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(q2),...this.fetchOptions});await ke(e,"get server info");const t=await e.json();return this.debug&&console.log(`
=== LangSmith Server Configuration ===
`+JSON.stringify(t,null,2)+`
`),t}async _ensureServerInfo(){return this._getServerInfoPromise===void 0&&(this._getServerInfoPromise=(async()=>{if(this._serverInfo===void 0)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(this._serverInfo===void 0&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const s=await this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){this.processRunOperation({action:"create",item:s}).catch(console.error);return}const a=oS(s),u=await this.caller.call(fe(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:yn(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(u,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;let r=await Promise.all((e==null?void 0:e.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]),s=await Promise.all((t==null?void 0:t.map(l=>this.prepareRunCreateOrUpdateInputs(l)))??[]);if(r.length>0&&s.length>0){const l=r.reduce((f,h)=>(h.id&&(f[h.id]=h),f),{}),d=[];for(const f of s)f.id!==void 0&&l[f.id]?l[f.id]={...l[f.id],...f}:d.push(f);r=Object.values(l),s=d}const a={post:r,patch:s};if(!a.post.length&&!a.patch.length)return;const u={post:[],patch:[]};for(const l of["post","patch"]){const d=l,f=a[d].reverse();let h=f.pop();for(;h!==void 0;)u[d].push(h),h=f.pop()}(u.post.length>0||u.patch.length>0)&&await this._postBatchIngestRuns(yn(u))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(fe(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;const r={};let s=[];for(const h of e??[]){const m=await this.prepareRunCreateOrUpdateInputs(h);m.id!==void 0&&m.attachments!==void 0&&(r[m.id]=m.attachments),delete m.attachments,s.push(m)}let a=[];for(const h of t??[])a.push(await this.prepareRunCreateOrUpdateInputs(h));if(s.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(a.find(h=>h.trace_id===void 0||h.dotted_order===void 0)!==void 0)throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(s.length>0&&a.length>0){const h=s.reduce((y,v)=>(v.id&&(y[v.id]=v),y),{}),m=[];for(const y of a)y.id!==void 0&&h[y.id]?h[y.id]={...h[y.id],...y}:m.push(y);s=Object.values(h),a=m}if(s.length===0&&a.length===0)return;const d=[],f=[];for(const[h,m]of[["post",s],["patch",a]])for(const y of m){const{inputs:v,outputs:w,events:b,attachments:S,...E}=y,A={inputs:v,outputs:w,events:b},T=yn(E);f.push({name:`${h}.${E.id}`,payload:new Blob([T],{type:`application/json; length=${T.length}`})});for(const[R,I]of Object.entries(A)){if(I===void 0)continue;const M=yn(I);f.push({name:`${h}.${E.id}.${R}`,payload:new Blob([M],{type:`application/json; length=${M.length}`})})}if(E.id!==void 0){const R=r[E.id];if(R){delete r[E.id];for(const[I,M]of Object.entries(R)){let B,U;if(Array.isArray(M)?[B,U]=M:(B=M.mimeType,U=M.data),I.includes(".")){console.warn(`Skipping attachment '${I}' for run ${E.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`);continue}f.push({name:`attachment.${E.id}.${I}`,payload:new Blob([U],{type:`${B}; length=${U.byteLength}`})})}}}d.push(`trace=${E.trace_id},id=${E.id}`)}await this._sendMultipartRequest(f,d.join("; "))}async _sendMultipartRequest(e,t){try{const r="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),s=[];for(const d of e)s.push(new Blob([`--${r}\r
`])),s.push(new Blob([`Content-Disposition: form-data; name="${d.name}"\r
`,`Content-Type: ${d.payload.type}\r
\r
`])),s.push(d.payload),s.push(new Blob([`\r
`]));s.push(new Blob([`--${r}--\r
`]));const u=await new Blob(s).arrayBuffer(),l=await this.batchIngestCaller.call(fe(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${r}`},body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(l,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}

Context: ${t}`)}}async updateRun(e,t){Te(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const r={...t,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&r.trace_id!==void 0&&r.dotted_order!==void 0){if(t.end_time!==void 0&&r.parent_run_id===void 0&&this.blockOnRootRunFinalization&&!this.manualFlushMode){await this.processRunOperation({action:"update",item:r}).catch(console.error);return}else this.processRunOperation({action:"update",item:r}).catch(console.error);return}const s={...this.headers,"Content-Type":"application/json"},a=await this.caller.call(fe(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:s,body:yn(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(a,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){Te(e);let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(t!==void 0){let s;t.session_id?s=t.session_id:r!=null&&r.projectName?s=(await this.readProject({projectName:r==null?void 0:r.projectName})).id:r!=null&&r.projectId?s=r==null?void 0:r.projectId:s=(await this.readProject({projectName:mr("PROJECT")||"default"})).id;const a=await this._getTenantId();return`${this.getHostUrl()}/o/${a}/projects/p/${s}/r/${t.id}?poll=true`}else if(e!==void 0){const s=await this.readRun(e);if(!s.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${s.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await B2(this.listRuns({id:e.child_run_ids})),r={},s={};t.sort((a,u)=>((a==null?void 0:a.dotted_order)??"").localeCompare((u==null?void 0:u.dotted_order)??""));for(const a of t){if(a.parent_run_id===null||a.parent_run_id===void 0)throw new Error(`Child run ${a.id} has no parent`);a.parent_run_id in r||(r[a.parent_run_id]=[]),r[a.parent_run_id].push(a),s[a.id]=a}e.child_runs=r[e.id]||[];for(const a in r)a!==e.id&&(s[a].child_runs=r[a]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:s,traceId:a,referenceExampleId:u,startTime:l,executionOrder:d,isRoot:f,runType:h,error:m,id:y,query:v,filter:w,traceFilter:b,treeFilter:S,limit:E,select:A,order:T}=e;let R=[];if(t&&(R=Array.isArray(t)?t:[t]),r){const U=Array.isArray(r)?r:[r],ie=await Promise.all(U.map(de=>this.readProject({projectName:de}).then(ve=>ve.id)));R.push(...ie)}const I=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],M={session:R.length?R:null,run_type:h,reference_example:u,query:v,filter:w,trace_filter:b,tree_filter:S,execution_order:d,parent_run:s,start_time:l?l.toISOString():null,error:m,id:y,limit:E,trace:a,select:A||I,is_root:f,order:T};let B=0;for await(const U of this._getCursorPaginatedList("/runs/query",M))if(E){if(B>=E)break;if(U.length+B>E){yield*U.slice(0,E-B);break}B+=U.length,yield*U}else yield*U}async*listGroupRuns(e){const{projectId:t,projectName:r,groupBy:s,filter:a,startTime:u,endTime:l,limit:d,offset:f}=e,m={session_id:t||(await this.readProject({projectName:r})).id,group_by:s,filter:a,start_time:u?u.toISOString():null,end_time:l?l.toISOString():null,limit:Number(d)||100};let y=Number(f)||0;const v="/runs/group",w=`${this.apiUrl}${v}`;for(;;){const b={...m,offset:y},S=Object.fromEntries(Object.entries(b).filter(([I,M])=>M!==void 0)),E=await this.caller.call(fe(),w,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(S),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(E,`Failed to fetch ${v}`);const A=await E.json(),{groups:T,total:R}=A;if(T.length===0)break;for(const I of T)yield I;if(y+=T.length,y>=R)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:s,projectNames:a,projectIds:u,referenceExampleIds:l,startTime:d,endTime:f,error:h,query:m,filter:y,traceFilter:v,treeFilter:w,isRoot:b,dataSourceType:S}){let E=u||[];a&&(E=[...u||[],...await Promise.all(a.map(M=>this.readProject({projectName:M}).then(B=>B.id)))]);const T=Object.fromEntries(Object.entries({id:e,trace:t,parent_run:r,run_type:s,session:E,reference_example:l,start_time:d,end_time:f,error:h,query:m,filter:y,trace_filter:v,tree_filter:w,is_root:b,data_source_type:S}).filter(([M,B])=>B!==void 0));return await(await this.caller.call(fe(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(T),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||Gt()};Te(e);const a=await(await this.caller.call(fe(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(a===null||!("share_token"in a))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${a.share_token}/r`}async unshareRun(e){Te(e);const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(t,"unshare run",!0)}async readRunSharedLink(e){Te(e);const r=await(await this.caller.call(fe(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(r===null||!("share_token"in r)))return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(t!==void 0)for(const u of t)r.append("id",u);return Te(e),await(await this.caller.call(fe(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),Te(e);const s=await(await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};Te(e);const a=await(await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return a.url=`${this.getHostUrl()}/public/${a.share_token}/d`,a}async unshareDataset(e){Te(e);const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(t,"unshare dataset",!0)}async readSharedDataset(e){return Te(e),await(await this.caller.call(fe(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,t){const r={};t!=null&&t.exampleIds&&(r.id=t.exampleIds);const s=new URLSearchParams;Object.entries(r).forEach(([l,d])=>{Array.isArray(d)?d.forEach(f=>s.append(l,f)):s.append(l,d)});const a=await this.caller.call(fe(this.debug),`${this.apiUrl}/public/${e}/examples?${s.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),u=await a.json();if(!a.ok)throw"detail"in u?new Error(`Failed to list shared examples.
Status: ${a.status}
Message: ${u.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${a.status} ${a.statusText}`);return u.map(l=>({...l,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:s=!1,projectExtra:a=null,referenceDatasetId:u=null}){const l=s?"?upsert=true":"",d=`${this.apiUrl}/sessions${l}`,f=a||{};r&&(f.metadata=r);const h={name:e,extra:f,description:t};u!==null&&(h.reference_dataset_id=u);const m=await this.caller.call(fe(this.debug),d,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(m,"create project"),await m.json()}async updateProject(e,{name:t=null,description:r=null,metadata:s=null,projectExtra:a=null,endTime:u=null}){const l=`${this.apiUrl}/sessions/${e}`;let d=a;s&&(d={...d||{},metadata:s});const f={name:t,extra:d,description:r,end_time:u?new Date(u).toISOString():null},h=await this.caller.call(fe(this.debug),l,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(h,"update project"),await h.json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const s=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),r+=`/${e}`;else if(t!==void 0)s.append("name",t);else throw new Error("Must provide projectName or projectId");const a=await this.caller.call(fe(this.debug),`${this.apiUrl}${r}?${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const u=await a.json();return a.ok?Array.isArray(u)?u.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let s="/sessions";const a=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Te(e),s+=`/${e}`;else if(t!==void 0)a.append("name",t);else throw new Error("Must provide projectName or projectId");r!==void 0&&a.append("include_stats",r.toString());const u=await this._get(s,a);let l;if(Array.isArray(u)){if(u.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);l=u[0]}else l=u;return l}async getProjectUrl({projectId:e,projectName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(e===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/datasets/${r.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:s,referenceDatasetName:a,referenceFree:u,metadata:l}={}){const d=new URLSearchParams;if(e!==void 0)for(const f of e)d.append("id",f);if(t!==void 0&&d.append("name",t),r!==void 0&&d.append("name_contains",r),s!==void 0)d.append("reference_dataset",s);else if(a!==void 0){const f=await this.readDataset({datasetName:a});d.append("reference_dataset",f.id)}u!==void 0&&d.append("reference_free",u.toString()),l!==void 0&&d.append("metadata",JSON.stringify(l));for await(const f of this._getPaginated("/sessions",d))yield*f}async deleteProject({projectId:e,projectName:t}){let r;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?r=(await this.readProject({projectName:t})).id:r=e,Te(r);const s=await this.caller.call(fe(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(s,`delete session ${r} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:s,description:a,dataType:u,name:l}){const d=`${this.apiUrl}/datasets/upload`,f=new FormData;f.append("file",e,t),r.forEach(y=>{f.append("input_keys",y)}),s.forEach(y=>{f.append("output_keys",y)}),a&&f.append("description",a),u&&f.append("data_type",u),l&&f.append("name",l);const h=await this.caller.call(fe(this.debug),d,{method:"POST",headers:this.headers,body:f,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(h,"upload CSV"),await h.json()}async createDataset(e,{description:t,dataType:r,inputsSchema:s,outputsSchema:a,metadata:u}={}){const l={name:e,description:t,extra:u?{metadata:u}:void 0};r&&(l.data_type=r),s&&(l.inputs_schema_definition=s),a&&(l.outputs_schema_definition=a);const d=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(d,"create dataset"),await d.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const s=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Te(e),r+=`/${e}`;else if(t!==void 0)s.append("name",t);else throw new Error("Must provide datasetName or datasetId");const a=await this._get(r,s);let u;if(Array.isArray(a)){if(a.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);u=a[0]}else u=a;return u}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:s}){let a=e;if(a===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(a!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");a===void 0&&(a=(await this.readDataset({datasetName:t})).id);const u=new URLSearchParams({from_version:typeof r=="string"?r:r.toISOString(),to_version:typeof s=="string"?s:s.toISOString()});return await this._get(`/datasets/${a}/versions/diff`,u)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){const r="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide either datasetName or datasetId");return(await(await this._getResponse(`${r}/${e}/openai_ft`)).text()).trim().split(`
`).map(l=>JSON.parse(l))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:s,datasetNameContains:a,metadata:u}={}){const l="/datasets",d=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(r!==void 0)for(const f of r)d.append("id",f);s!==void 0&&d.append("name",s),a!==void 0&&d.append("name_contains",a),u!==void 0&&d.append("metadata",JSON.stringify(u));for await(const f of this._getPaginated(l,d))yield*f}async updateDataset(e){const{datasetId:t,datasetName:r,...s}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const a=t??(await this.readDataset({datasetName:r})).id;Te(a);const u=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${a}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(u,"update dataset"),await u.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:r,asOf:s,tag:a}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const u=t??(await this.readDataset({datasetName:r})).id;Te(u);const l=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${u}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:typeof s=="string"?s:s.toISOString(),tag:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(l,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",s=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(s=(await this.readDataset({datasetName:t})).id),s!==void 0)Te(s),r+=`/${s}`;else throw new Error("Must provide datasetName or datasetId");const a=await this.caller.call(fe(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(a,`delete ${r}`),await a.json()}async indexDataset({datasetId:e,datasetName:t,tag:r}){let s=e;if(!s&&!t)throw new Error("Must provide either datasetName or datasetId");if(s&&t)throw new Error("Must provide either datasetName or datasetId, not both");s||(s=(await this.readDataset({datasetName:t})).id),Te(s);const a={tag:r},u=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${s}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(u,"index dataset"),await u.json()}async similarExamples(e,t,r,{filter:s}={}){const a={limit:r,inputs:e};s!==void 0&&(a.filter=s),Te(t);const u=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(u,"fetch similar examples"),(await u.json()).examples}async createExample(e,t,r){var h;if(lS(e)&&(t!==void 0||r!==void 0))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let s=t?r==null?void 0:r.datasetId:e.dataset_id;const a=t?r==null?void 0:r.datasetName:e.dataset_name;if(s===void 0&&a===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&a!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:a})).id);const u=(t?r==null?void 0:r.createdAt:e.created_at)||new Date;let l;lS(e)?l=e:l={inputs:e,outputs:t,created_at:u==null?void 0:u.toISOString(),id:r==null?void 0:r.exampleId,metadata:r==null?void 0:r.metadata,split:r==null?void 0:r.split,source_run_id:r==null?void 0:r.sourceRunId,use_source_run_io:r==null?void 0:r.useSourceRunIO,use_source_run_attachments:r==null?void 0:r.useSourceRunAttachments,attachments:r==null?void 0:r.attachments};const d=await this._uploadExamplesMultipart(s,[l]);return await this.readExample(((h=d.example_ids)==null?void 0:h[0])??Gt())}async createExamples(e){if(Array.isArray(e)){if(e.length===0)return[];const A=e;let T=A[0].dataset_id;const R=A[0].dataset_name;if(T===void 0&&R===void 0)throw new Error("Must provide either datasetName or datasetId");if(T!==void 0&&R!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");T===void 0&&(T=(await this.readDataset({datasetName:R})).id);const I=await this._uploadExamplesMultipart(T,A);return await Promise.all(I.example_ids.map(B=>this.readExample(B)))}const{inputs:t,outputs:r,metadata:s,splits:a,sourceRunIds:u,useSourceRunIOs:l,useSourceRunAttachments:d,attachments:f,exampleIds:h,datasetId:m,datasetName:y}=e;if(t===void 0)throw new Error("Must provide inputs when using legacy parameters");let v=m;const w=y;if(v===void 0&&w===void 0)throw new Error("Must provide either datasetName or datasetId");if(v!==void 0&&w!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");v===void 0&&(v=(await this.readDataset({datasetName:w})).id);const b=t.map((A,T)=>({dataset_id:v,inputs:A,outputs:r==null?void 0:r[T],metadata:s==null?void 0:s[T],split:a==null?void 0:a[T],id:h==null?void 0:h[T],attachments:f==null?void 0:f[T],source_run_id:u==null?void 0:u[T],use_source_run_io:l==null?void 0:l[T],use_source_run_attachments:d==null?void 0:d[T]})),S=await this._uploadExamplesMultipart(v,b);return await Promise.all(S.example_ids.map(A=>this.readExample(A)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const s=e.map(u=>fx(u)?hx(u):u),a=fx(t)?hx(t):t;return this.createExample({input:s},{output:a},r)}async readExample(e){Te(e);const t=`/examples/${e}`,r=await this._get(t),{attachment_urls:s,...a}=r,u=a;return s&&(u.attachments=Object.entries(s).reduce((l,[d,f])=>(l[d.slice(11)]={presigned_url:f.presigned_url,mime_type:f.mime_type},l),{})),u}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:s,splits:a,inlineS3Urls:u,metadata:l,limit:d,offset:f,filter:h,includeAttachments:m}={}){let y;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)y=e;else if(t!==void 0)y=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const v=new URLSearchParams({dataset:y}),w=s?typeof s=="string"?s:s==null?void 0:s.toISOString():void 0;w&&v.append("as_of",w);const b=u??!0;if(v.append("inline_s3_urls",b.toString()),r!==void 0)for(const E of r)v.append("id",E);if(a!==void 0)for(const E of a)v.append("splits",E);if(l!==void 0){const E=JSON.stringify(l);v.append("metadata",E)}d!==void 0&&v.append("limit",d.toString()),f!==void 0&&v.append("offset",f.toString()),h!==void 0&&v.append("filter",h),m===!0&&["attachment_urls","outputs","metadata"].forEach(E=>v.append("select",E));let S=0;for await(const E of this._getPaginated("/examples",v)){for(const A of E){const{attachment_urls:T,...R}=A,I=R;T&&(I.attachments=Object.entries(T).reduce((M,[B,U])=>(M[B.slice(11)]={presigned_url:U.presigned_url,mime_type:U.mime_type||void 0},M),{})),yield I,S++}if(d!==void 0&&S>=d)break}}async deleteExample(e){Te(e);const t=`/examples/${e}`,r=await this.caller.call(fe(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(r,`delete ${t}`),await r.json()}async updateExample(e,t){let r;t?r=e:r=e.id,Te(r);let s;t?s={id:r,...t}:s=e;let a;return s.dataset_id!==void 0?a=s.dataset_id:a=(await this.readExample(r)).dataset_id,this._updateExamplesMultipart(a,[s])}async updateExamples(e){let t;return e[0].dataset_id===void 0?t=(await this.readExample(e[0].id)).dataset_id:t=e[0].dataset_id,this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:s}){let a;if(e?a=e:a=(await this.readDataset({datasetName:t})).id,Te(a),r&&s||!r&&!s)throw new Error("Exactly one of asOf and tag must be specified.");const u=new URLSearchParams;r!==void 0&&u.append("as_of",typeof r=="string"?r:r.toISOString()),s!==void 0&&u.append("tag",s);const l=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${a}/version?${u.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(l,"read dataset version"),await l.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let s;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?s=(await this.readDataset({datasetName:t})).id:s=e,Te(s);const a=new URLSearchParams,u=r?typeof r=="string"?r:r==null?void 0:r.toISOString():void 0;return u&&a.append("as_of",u),await this._get(`/datasets/${s}/splits`,a)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:s,remove:a=!1}){let u;if(e===void 0&&t===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?u=(await this.readDataset({datasetName:t})).id:u=e,Te(u);const l={split_name:r,examples:s.map(f=>(Te(f),f)),remove:a},d=await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/${u}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(d,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:s,referenceExample:a}={loadChildRuns:!1}){i1("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let u;if(typeof e=="string")u=await this.readRun(e,{loadChildRuns:s});else if(typeof e=="object"&&"id"in e)u=e;else throw new Error(`Invalid run type: ${typeof e}`);u.reference_example_id!==null&&u.reference_example_id!==void 0&&(a=await this.readExample(u.reference_example_id));const l=await t.evaluateRun(u,a),[d,f]=await this._logEvaluationFeedback(l,u,r);return f[0]}async createFeedback(e,t,{score:r,value:s,correction:a,comment:u,sourceInfo:l,feedbackSourceType:d="api",sourceRunId:f,feedbackId:h,feedbackConfig:m,projectId:y,comparativeExperimentId:v}){var A;if(!e&&!y)throw new Error("One of runId or projectId must be provided");if(e&&y)throw new Error("Only one of runId or projectId can be provided");const w={type:d??"api",metadata:l??{}};f!==void 0&&(w==null?void 0:w.metadata)!==void 0&&!w.metadata.__run&&(w.metadata.__run={run_id:f}),(w==null?void 0:w.metadata)!==void 0&&((A=w.metadata.__run)==null?void 0:A.run_id)!==void 0&&Te(w.metadata.__run.run_id);const b={id:h??Gt(),run_id:e,key:t,score:uS(r),value:s,correction:a,comment:u,feedback_source:w,comparative_experiment_id:v,feedbackConfig:m,session_id:y},S=`${this.apiUrl}/feedback`,E=await this.caller.call(fe(this.debug),S,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(E,"create feedback",!0),b}async updateFeedback(e,{score:t,value:r,correction:s,comment:a}){const u={};t!=null&&(u.score=uS(t)),r!=null&&(u.value=r),s!=null&&(u.correction=s),a!=null&&(u.comment=a),Te(e);const l=await this.caller.call(fe(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(l,"update feedback",!0)}async readFeedback(e){Te(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){Te(e);const t=`/feedback/${e}`,r=await this.caller.call(fe(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(r,`delete ${t}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const s=new URLSearchParams;if(e&&s.append("run",e.join(",")),t)for(const a of t)s.append("key",a);if(r)for(const a of r)s.append("source",a);for await(const a of this._getPaginated("/feedback",s))yield*a}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:s}={}){const a={run_id:e,feedback_key:t,feedback_config:s};return r?typeof r=="string"?a.expires_at=r:(r!=null&&r.hours||r!=null&&r.minutes||r!=null&&r.days)&&(a.expires_in=r):a.expires_in={hours:3},await(await this.caller.call(fe(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:s,description:a,metadata:u,id:l}){var h;if(t.length===0)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),!r==null)throw new Error("A reference dataset is required");const d={id:l,name:e,experiment_ids:t,reference_dataset_id:r,description:a,created_at:(h=s??new Date)==null?void 0:h.toISOString(),extra:{}};return u&&(d.extra.metadata=u),await(await this.caller.call(fe(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Te(e);const t=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",t))yield*r}_selectEvalResults(e){let t;return"results"in e?t=e.results:Array.isArray(e)?t=e:t=[e],t}async _logEvaluationFeedback(e,t,r){const s=this._selectEvalResults(e),a=[];for(const u of s){let l=r||{};u.evaluatorInfo&&(l={...u.evaluatorInfo,...l});let d=null;u.targetRunId?d=u.targetRunId:t&&(d=t.id),a.push(await this.createFeedback(d,u.key,{score:u.score,value:u.value,comment:u.comment,correction:u.correction,sourceInfo:l,sourceRunId:u.sourceRunId,feedbackConfig:u.feedbackConfig,feedbackSourceType:"model"}))}return[s,a]}async logEvaluationFeedback(e,t,r){const[s]=await this._logEvaluationFeedback(e,t,r);return s}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:s,limit:a}=e,u=new URLSearchParams;t&&t.forEach((d,f)=>{Te(d,`queueIds[${f}]`),u.append("ids",d)}),r&&u.append("name",r),s&&u.append("name_contains",s),u.append("limit",(a!==void 0?Math.min(a,100):100).toString());let l=0;for await(const d of this._getPaginated("/annotation-queues",u))if(yield*d,l++,a!==void 0&&l>=a)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:s,rubricInstructions:a}=e,u={name:t,description:r,id:s||Gt(),rubric_instructions:a},l=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(u).filter(([f,h])=>h!==void 0))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(l,"create annotation queue"),await l.json()}async readAnnotationQueue(e){const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(t,"read annotation queue"),await t.json()}async updateAnnotationQueue(e,t){const{name:r,description:s,rubricInstructions:a}=t,u=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:s,rubric_instructions:a}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(u,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const r=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((s,a)=>Te(s,`runIds[${a}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${Te(e,"queueId")}/run`,s=await this.caller.call(fe(this.debug),`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(s,"get run from annotation queue"),await s.json()}async deleteRunFromAnnotationQueue(e,t){const r=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/runs/${Te(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/annotation-queues/${Te(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return e=="-"||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${r.tenant_handle}

      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(fe(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(!t.ok){const s=typeof r.detail=="string"?r.detail:JSON.stringify(r.detail),a=new Error(`Error ${t.status}: ${t.statusText}
${s}`);throw a.statusCode=t.status,a}if(r.commits.length!==0)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,s,a]=hs(e),u=await this.caller.call(fe(this.debug),`${this.apiUrl}/likes/${r}/${s}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(u,`${t?"like":"unlike"} prompt`),await u.json()}async _getPromptUrl(e){const[t,r,s]=hs(e);if(await this._currentTenantIsOwner(t)){const a=await this._getSettings();return s!=="latest"?`${this.getHostUrl()}/prompts/${r}/${s.substring(0,8)}?organizationId=${a.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${a.id}`}else return s!=="latest"?`${this.getHostUrl()}/hub/${t}/${r}/${s.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,r=>r.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",(e==null?void 0:e.sortField)??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&t.append("is_public",e.isPublic.toString()),e!=null&&e.query&&t.append("query",e.query);for await(const r of this._getPaginated("/repos",t,s=>s.repos))yield*r}async getPrompt(e){const[t,r,s]=hs(e),a=await this.caller.call(fe(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(a.status===404)return null;await ke(a,"get prompt");const u=await a.json();return u.repo?u.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t!=null&&t.isPublic&&!r.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);const[s,a,u]=hs(e);if(!await this._currentTenantIsOwner(s))throw await this._ownerConflictError("create a prompt",s);const l={repo_handle:a,...(t==null?void 0:t.description)&&{description:t.description},...(t==null?void 0:t.readme)&&{readme:t.readme},...(t==null?void 0:t.tags)&&{tags:t.tags},is_public:!!(t!=null&&t.isPublic)},d=await this.caller.call(fe(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(d,"create prompt");const{repo:f}=await d.json();return f}async createCommit(e,t,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[s,a,u]=hs(e),l=(r==null?void 0:r.parentCommitHash)==="latest"||!(r!=null&&r.parentCommitHash)?await this._getLatestCommitHash(`${s}/${a}`):r==null?void 0:r.parentCommitHash,d={manifest:JSON.parse(JSON.stringify(t)),parent_commit:l},f=await this.caller.call(fe(this.debug),`${this.apiUrl}/commits/${s}/${a}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(d),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(f,"create commit");const h=await f.json();return this._getPromptUrl(`${s}/${a}${h.commit_hash?`:${h.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){var l;if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const d of t){const f=d.id,h={...d.metadata&&{metadata:d.metadata},...d.split&&{split:d.split}},m=yn(h),y=new Blob([m],{type:"application/json"});if(r.append(f,y),d.inputs){const v=yn(d.inputs),w=new Blob([v],{type:"application/json"});r.append(`${f}.inputs`,w)}if(d.outputs){const v=yn(d.outputs),w=new Blob([v],{type:"application/json"});r.append(`${f}.outputs`,w)}if(d.attachments)for(const[v,w]of Object.entries(d.attachments)){let b,S;Array.isArray(w)?[b,S]=w:(b=w.mimeType,S=w.data);const E=new Blob([S],{type:`${b}; length=${S.byteLength}`});r.append(`${f}.attachment.${v}`,E)}if(d.attachments_operations){const v=yn(d.attachments_operations),w=new Blob([v],{type:"application/json"});r.append(`${f}.attachments_operations`,w)}}const s=e??((l=t[0])==null?void 0:l.dataset_id);return await(await this.caller.call(fe(this.debug),`${this.apiUrl}/v1/platform/datasets/${s}/examples`,{method:"PATCH",headers:this.headers,body:r})).json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!await this._getMultiPartSupport())throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const u of t){const l=(u.id??Gt()).toString(),d={created_at:u.created_at,...u.metadata&&{metadata:u.metadata},...u.split&&{split:u.split},...u.source_run_id&&{source_run_id:u.source_run_id},...u.use_source_run_io&&{use_source_run_io:u.use_source_run_io},...u.use_source_run_attachments&&{use_source_run_attachments:u.use_source_run_attachments}},f=yn(d),h=new Blob([f],{type:"application/json"});if(r.append(l,h),u.inputs){const m=yn(u.inputs),y=new Blob([m],{type:"application/json"});r.append(`${l}.inputs`,y)}if(u.outputs){const m=yn(u.outputs),y=new Blob([m],{type:"application/json"});r.append(`${l}.outputs`,y)}if(u.attachments)for(const[m,y]of Object.entries(u.attachments)){let v,w;Array.isArray(y)?[v,w]=y:(v=y.mimeType,w=y.data);const b=new Blob([w],{type:`${v}; length=${w.byteLength}`});r.append(`${l}.attachment.${m}`,b)}}const s=await this.caller.call(fe(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r});return await ke(s,"upload examples"),await s.json()}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,s]=hs(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("update a prompt",r);const a={};if((t==null?void 0:t.description)!==void 0&&(a.description=t.description),(t==null?void 0:t.readme)!==void 0&&(a.readme=t.readme),(t==null?void 0:t.tags)!==void 0&&(a.tags=t.tags),(t==null?void 0:t.isPublic)!==void 0&&(a.is_public=t.isPublic),(t==null?void 0:t.isArchived)!==void 0&&(a.is_archived=t.isArchived),Object.keys(a).length===0)throw new Error("No valid update options provided");const u=await this.caller.call(fe(this.debug),`${this.apiUrl}/repos/${r}/${s}`,{method:"PATCH",body:JSON.stringify(a),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await ke(u,"update prompt"),u.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,r,s]=hs(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);return await(await this.caller.call(fe(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,t){const[r,s,a]=hs(e),u=await this.caller.call(fe(this.debug),`${this.apiUrl}/commits/${r}/${s}/${a}${t!=null&&t.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await ke(u,"pull prompt commit");const l=await u.json();return{owner:r,repo:s,commit_hash:l.commit_hash,manifest:l.manifest,examples:l.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t==null?void 0:t.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){return await this.promptExists(e)?t&&Object.keys(t).some(s=>s!=="object")&&await this.updatePrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}):await this.createPrompt(e,{description:t==null?void 0:t.description,readme:t==null?void 0:t.readme,tags:t==null?void 0:t.tags,isPublic:t==null?void 0:t.isPublic}),t!=null&&t.object?await this.createCommit(e,t==null?void 0:t.object,{parentCommitHash:t==null?void 0:t.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:s}=t,[a,u]=this.parseTokenOrUrl(e,r),l=new gu({apiUrl:a,apiKey:"placeholder"}),d=await l.readSharedDataset(u),f=s||d.name;try{if(await this.hasDataset({datasetId:f})){console.log(`Dataset ${f} already exists in your tenant. Skipping.`);return}}catch{}const h=await l.listSharedExamples(u),m=await this.createDataset(f,{description:d.description,dataType:d.data_type||"kv",inputsSchema:d.inputs_schema_definition??void 0,outputsSchema:d.outputs_schema_definition??void 0});try{await this.createExamples({inputs:h.map(y=>y.inputs),outputs:h.flatMap(y=>y.outputs?[y.outputs]:[]),datasetId:m.id})}catch(y){throw console.error(`An error occurred while creating dataset ${f}. You should delete it manually.`),y}}parseTokenOrUrl(e,t,r=2,s="dataset"){try{return Te(e),[t,e]}catch{}try{const u=new URL(e).pathname.split("/").filter(l=>l!=="");if(u.length>=r){const l=u[u.length-r];return[t,l]}else throw new Error(`Invalid public ${s} URL: ${e}`)}catch{throw new Error(`Invalid public ${s} URL or token: ${e}`)}}awaitPendingTraceBatches(){return this.manualFlushMode?(console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve()):Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()])}}function lS(n){return"dataset_id"in n||"dataset_name"in n}const c1="0.3.28";var Vo={};let jr;const W2=()=>typeof window<"u"&&typeof window.document<"u",Z2=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",G2=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),d1=()=>typeof Deno<"u",K2=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!d1(),J2=()=>jr||(W2()?jr="browser":K2()?jr="node":Z2()?jr="webworker":G2()?jr="jsdom":d1()?jr="deno":jr="other",jr);let rm;function f1(){if(rm===void 0){const n=J2(),e=Q2();rm={library:"langsmith",runtime:n,sdk:"langsmith-js",sdk_version:c1,...e}}return rm}function X2(){const n=Y2()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[r,s]of Object.entries(n))(r.startsWith("LANGCHAIN_")||r.startsWith("LANGSMITH_"))&&typeof s=="string"&&!t.includes(r)&&!r.toLowerCase().includes("key")&&!r.toLowerCase().includes("secret")&&!r.toLowerCase().includes("token")&&(r==="LANGCHAIN_REVISION_ID"?e.revision_id=s:e[r]=s);return e}function Y2(){try{return typeof process<"u"&&Vo?Object.entries(Vo).reduce((n,[e,t])=>(n[e]=String(t),n),{}):void 0}catch{return}}function bs(n){try{return typeof process<"u"?Vo==null?void 0:Vo[n]:void 0}catch{return}}function mr(n){return bs(`LANGSMITH_${n}`)||bs(`LANGCHAIN_${n}`)}let sm;function Q2(){if(sm!==void 0)return sm;const n=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const t of n){const r=bs(t);r!==void 0&&(e[t]=r)}return sm=e,e}const eM=n=>!!["TRACING_V2","TRACING"].find(t=>mr(t)==="true"),im=Symbol.for("lc:context_variables");function tM(n){return n.replace(/[-:.]/g,"")}function nM(n,e,t=1){const r=t.toFixed(0).slice(0,3).padStart(3,"0");return tM(`${new Date(n).toISOString().slice(0,-1)}${r}Z`)+e}class Gc{constructor(e,t,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r}static fromHeader(e){const t=e.split(",");let r={},s=[],a;for(const u of t){const[l,d]=u.split("="),f=decodeURIComponent(d);l==="langsmith-metadata"?r=JSON.parse(f):l==="langsmith-tags"?s=f.split(","):l==="langsmith-project"&&(a=f)}return new Gc(r,s,a)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class _n{constructor(e){var l;if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),h1(e)){Object.assign(this,{...e});return}const t=_n.getDefaultConfig(),{metadata:r,...s}=e,a=s.client??_n.getSharedClient(),u={...r,...(l=s==null?void 0:s.extra)==null?void 0:l.metadata};if(s.extra={...s.extra,metadata:u},Object.assign(this,{...t,...s,client:a}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const d=nM(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+d:this.dotted_order=d}}static getDefaultConfig(){return{id:Gt(),run_type:"chain",project_name:mr("PROJECT")??bs("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:bs("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:bs("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return _n.sharedClient||(_n.sharedClient=new gu),_n.sharedClient}createChild(e){var d,f,h,m,y,v;const t=this.child_execution_order+1,r=new _n({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});im in this&&(r[im]=this[im]);const s=Symbol.for("lc:child_config"),a=((d=e.extra)==null?void 0:d[s])??this.extra[s];if(sM(a)){const w={...a},b=rM(w.callbacks)?(h=(f=w.callbacks).copy)==null?void 0:h.call(f):void 0;b&&(Object.assign(b,{_parentRunId:r.id}),(v=(y=(m=b.handlers)==null?void 0:m.find(p1))==null?void 0:y.updateFromRunTree)==null||v.call(y,r),w.callbacks=b),r.extra[s]=w}const u=new Set;let l=this;for(;l!=null&&!u.has(l.id);)u.add(l.id),l.child_execution_order=Math.max(l.child_execution_order,t),l=l.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),s){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,s&&Object.keys(s).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...s}}:{metadata:s})}_convertToCreate(e,t,r=!0){var d;const s=e.extra??{};if(s.runtime||(s.runtime={}),t)for(const[f,h]of Object.entries(t))s.runtime[f]||(s.runtime[f]=h);let a,u;return r?(u=(d=e.parent_run)==null?void 0:d.id,a=[]):(a=e.child_runs.map(f=>this._convertToCreate(f,t,r)),u=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:s,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:a,parent_run_id:u,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments}}async postRun(e=!0){try{const t=f1(),r=await this._convertToCreate(this,t,!0);if(await this.client.createRun(r),!e){i1("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const s of this.child_runs)await s.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){var e;try{const t={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(e=this.parent_run)==null?void 0:e.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,t)}catch(t){console.error(`Error in patchRun for run ${this.id}`,t)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),typeof e=="string"?this.events.push({name:"event",time:new Date().toISOString(),message:e}):this.events.push({...e,time:e.time??new Date().toISOString()})}static fromRunnableConfig(e,t){var f,h,m,y;const r=e==null?void 0:e.callbacks;let s,a,u,l=eM();if(r){const v=((f=r==null?void 0:r.getParentRunId)==null?void 0:f.call(r))??"",w=(h=r==null?void 0:r.handlers)==null?void 0:h.find(b=>(b==null?void 0:b.name)=="langchain_tracer");s=(m=w==null?void 0:w.getRun)==null?void 0:m.call(w,v),a=w==null?void 0:w.projectName,u=w==null?void 0:w.client,l=l||!!w}return s?new _n({name:s.name,id:s.id,trace_id:s.trace_id,dotted_order:s.dotted_order,client:u,tracingEnabled:l,project_name:a,tags:[...new Set(((s==null?void 0:s.tags)??[]).concat((e==null?void 0:e.tags)??[]))],extra:{metadata:{...(y=s==null?void 0:s.extra)==null?void 0:y.metadata,...e==null?void 0:e.metadata}}}).createChild(t):new _n({...t,client:u,tracingEnabled:l,project_name:a})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){var f;const r="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,s=r["langsmith-trace"];if(!s||typeof s!="string")return;const a=s.trim(),u=a.split(".").map(h=>{const[m,y]=h.split("Z");return{strTime:m,time:Date.parse(m+"Z"),uuid:y}}),l=u[0].uuid,d={...t,name:(t==null?void 0:t.name)??"parent",run_type:(t==null?void 0:t.run_type)??"chain",start_time:(t==null?void 0:t.start_time)??Date.now(),id:(f=u.at(-1))==null?void 0:f.uuid,trace_id:l,dotted_order:a};if(r.baggage&&typeof r.baggage=="string"){const h=Gc.fromHeader(r.baggage);d.metadata=h.metadata,d.tags=h.tags,d.project_name=h.project_name}return new _n(d)}toHeaders(e){var r;const t={"langsmith-trace":this.dotted_order,baggage:new Gc((r=this.extra)==null?void 0:r.metadata,this.tags,this.project_name).toHeader()};if(e)for(const[s,a]of Object.entries(t))e.set(s,a);return t}}Object.defineProperty(_n,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});function h1(n){return n!==void 0&&typeof n.createChild=="function"&&typeof n.postRun=="function"}function p1(n){return typeof n=="object"&&n!=null&&typeof n.name=="string"&&n.name==="langchain_tracer"}function cS(n){return Array.isArray(n)&&n.some(e=>p1(e))}function rM(n){return typeof n=="object"&&n!=null&&Array.isArray(n.handlers)}function sM(n){var e;return n!==void 0&&typeof n.callbacks=="object"&&(cS((e=n.callbacks)==null?void 0:e.handlers)||cS(n.callbacks))}let iM=class{getStore(){}run(e,t){return t()}};const am=Symbol.for("ls:tracing_async_local_storage"),aM=new iM;let oM=class{getInstance(){return globalThis[am]??aM}initializeGlobalInstance(e){globalThis[am]===void 0&&(globalThis[am]=e)}};const uM=new oM,lM=()=>{const n=uM.getInstance().getStore();if(!h1(n))throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function and that tracing is enabled."].join(`
`));return n};function Wy(n){return typeof n=="function"&&"langsmith:traceable"in n}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const cM=Object.prototype.hasOwnProperty;function cg(n,e){return cM.call(n,e)}function dg(n){if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=""+r;return t}if(Object.keys)return Object.keys(n);let e=[];for(let t in n)cg(n,t)&&e.push(t);return e}function yr(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function fg(n){let e=0;const t=n.length;let r;for(;e<t;){if(r=n.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function zi(n){return n.indexOf("/")===-1&&n.indexOf("~")===-1?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function dM(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function hg(n){if(n===void 0)return!0;if(n){if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(hg(n[t]))return!0}else if(typeof n=="object"){const t=dg(n),r=t.length;for(var e=0;e<r;e++)if(hg(n[t[e]]))return!0}}return!1}function dS(n,e){const t=[n];for(const r in e){const s=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof s<"u"&&t.push(`${r}: ${s}`)}return t.join(`
`)}class fM extends Error{constructor(e,t,r,s,a){super(dS(e,{name:t,index:r,operation:s,tree:a})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.setPrototypeOf(this,new.target.prototype),this.message=dS(e,{name:t,index:r,operation:s,tree:a})}}const ht=fM,na={add:function(n,e,t){return n[e]=this.value,{newDocument:t}},remove:function(n,e,t){var r=n[e];return delete n[e],{newDocument:t,removed:r}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:function(n,e,t){let r=pg(t,this.path);r&&(r=yr(r));const s=zo(t,{op:"remove",path:this.from}).removed;return zo(t,{op:"add",path:this.path,value:s}),{newDocument:t,removed:r}},copy:function(n,e,t){const r=pg(t,this.from);return zo(t,{op:"add",path:this.path,value:yr(r)}),{newDocument:t}},test:function(n,e,t){return{newDocument:t,test:Jc(n[e],this.value)}},_get:function(n,e,t){return this.value=n[e],{newDocument:t}}};var hM={add:function(n,e,t){return fg(e)?n.splice(e,0,this.value):n[e]=this.value,{newDocument:t,index:e}},remove:function(n,e,t){var r=n.splice(e,1);return{newDocument:t,removed:r[0]}},replace:function(n,e,t){var r=n[e];return n[e]=this.value,{newDocument:t,removed:r}},move:na.move,copy:na.copy,test:na.test,_get:na._get};function pg(n,e){if(e=="")return n;var t={op:"_get",path:e};return zo(n,t),t.value}function zo(n,e,t=!1,r=!0,s=!0,a=0){if(t&&(typeof t=="function"?t(e,0,n,e.path):mg(e,0)),e.path===""){let u={newDocument:n};if(e.op==="add")return u.newDocument=e.value,u;if(e.op==="replace")return u.newDocument=e.value,u.removed=n,u;if(e.op==="move"||e.op==="copy")return u.newDocument=pg(n,e.from),e.op==="move"&&(u.removed=n),u;if(e.op==="test"){if(u.test=Jc(n,e.value),u.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",a,e,n);return u.newDocument=n,u}else{if(e.op==="remove")return u.removed=n,u.newDocument=null,u;if(e.op==="_get")return e.value=n,u;if(t)throw new ht("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,e,n);return u}}else{r||(n=yr(n));const l=(e.path||"").split("/");let d=n,f=1,h=l.length,m,y,v;for(typeof t=="function"?v=t:v=mg;;){if(y=l[f],y&&y.indexOf("~")!=-1&&(y=dM(y)),s&&(y=="__proto__"||y=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&m===void 0&&(d[y]===void 0?m=l.slice(0,f).join("/"):f==h-1&&(m=e.path),m!==void 0&&v(e,0,n,m)),f++,Array.isArray(d)){if(y==="-")y=d.length;else{if(t&&!fg(y))throw new ht("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,e,n);fg(y)&&(y=~~y)}if(f>=h){if(t&&e.op==="add"&&y>d.length)throw new ht("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,e,n);const w=hM[e.op].call(e,d,y,n);if(w.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",a,e,n);return w}}else if(f>=h){const w=na[e.op].call(e,d,y,n);if(w.test===!1)throw new ht("Test operation failed","TEST_OPERATION_FAILED",a,e,n);return w}if(d=d[y],t&&f<h&&(!d||typeof d!="object"))throw new ht("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,e,n)}}}function Kc(n,e,t,r=!0,s=!0){if(t&&!Array.isArray(e))throw new ht("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(n=yr(n));const a=new Array(e.length);for(let u=0,l=e.length;u<l;u++)a[u]=zo(n,e[u],t,!0,s,u),n=a[u].newDocument;return a.newDocument=n,a}function mg(n,e,t,r){if(typeof n!="object"||n===null||Array.isArray(n))throw new ht("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,n,t);if(na[n.op]){if(typeof n.path!="string")throw new ht("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,n,t);if(n.path.indexOf("/")!==0&&n.path.length>0)throw new ht('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,n,t);if((n.op==="move"||n.op==="copy")&&typeof n.from!="string")throw new ht("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&n.value===void 0)throw new ht("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,n,t);if((n.op==="add"||n.op==="replace"||n.op==="test")&&hg(n.value))throw new ht("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,n,t);if(t){if(n.op=="add"){var s=n.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new ht("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,n,t)}else if(n.op==="replace"||n.op==="remove"||n.op==="_get"){if(n.path!==r)throw new ht("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,n,t)}else if(n.op==="move"||n.op==="copy"){var u={op:"_get",path:n.from,value:void 0},l=pM([u],t);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new ht("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,n,t)}}}else throw new ht("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,n,t)}function pM(n,e,t){try{if(!Array.isArray(n))throw new ht("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Kc(yr(e),yr(n),t||!0);else{t=t||mg;for(var r=0;r<n.length;r++)t(n[r],r,e,void 0)}}catch(s){if(s instanceof ht)return s;throw s}}function Jc(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){var t=Array.isArray(n),r=Array.isArray(e),s,a,u;if(t&&r){if(a=n.length,a!=e.length)return!1;for(s=a;s--!==0;)if(!Jc(n[s],e[s]))return!1;return!0}if(t!=r)return!1;var l=Object.keys(n);if(a=l.length,a!==Object.keys(e).length)return!1;for(s=a;s--!==0;)if(!e.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(u=l[s],!Jc(n[u],e[u]))return!1;return!0}return n!==n&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function m1(n,e,t,r,s){if(e!==n){typeof e.toJSON=="function"&&(e=e.toJSON());for(var a=dg(e),u=dg(n),l=!1,d=u.length-1;d>=0;d--){var f=u[d],h=n[f];if(cg(e,f)&&!(e[f]===void 0&&h!==void 0&&Array.isArray(e)===!1)){var m=e[f];typeof h=="object"&&h!=null&&typeof m=="object"&&m!=null&&Array.isArray(h)===Array.isArray(m)?m1(h,m,t,r+"/"+zi(f),s):h!==m&&(s&&t.push({op:"test",path:r+"/"+zi(f),value:yr(h)}),t.push({op:"replace",path:r+"/"+zi(f),value:yr(m)}))}else Array.isArray(n)===Array.isArray(e)?(s&&t.push({op:"test",path:r+"/"+zi(f),value:yr(h)}),t.push({op:"remove",path:r+"/"+zi(f)}),l=!0):(s&&t.push({op:"test",path:r,value:n}),t.push({op:"replace",path:r,value:e}))}if(!(!l&&a.length==u.length))for(var d=0;d<a.length;d++){var f=a[d];!cg(n,f)&&e[f]!==void 0&&t.push({op:"add",path:r+"/"+zi(f),value:yr(e[f])})}}}function mM(n,e,t=!1){var r=[];return m1(n,e,r,"",t),r}var om={};const gM=()=>typeof window<"u"&&typeof window.document<"u",yM=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",vM=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),Zy=()=>typeof Deno<"u",_M=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!Zy(),wM=()=>{let n;return gM()?n="browser":_M()?n="node":yM()?n="webworker":vM()?n="jsdom":Zy()?n="deno":n="other",n};let um;async function bM(){return um===void 0&&(um={library:"langchain-js",runtime:wM()}),um}function br(n){try{return typeof process<"u"?om==null?void 0:om[n]:Zy()?Deno==null?void 0:Deno.env.get(n):void 0}catch{return}}class xM{}function SM(n){return"lc_prefer_streaming"in n&&n.lc_prefer_streaming}class ju extends xM{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,HA(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:br("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return oi.prototype.toJSON.call(this)}toJSONNotImplemented(){return oi.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends ju{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Gt()}),Object.assign(this,e)}}return new t}}const EM=n=>{const e=n;return e!==void 0&&typeof e.copy=="function"&&typeof e.name=="string"&&typeof e.awaitHandlers=="boolean"};function lm(n,e){return n&&!Array.isArray(n)&&typeof n=="object"?n:{[e]:n}}function TM(n){return n.replace(/[-:.]/g,"")}function AM(n,e,t){const r=t.toFixed(0).slice(0,3).padStart(3,"0");return TM(`${new Date(n).toISOString().slice(0,-1)}${r}Z`)+e}function wo(n){return typeof n._addRunToRunMap=="function"}class Lu extends ju{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=AM(e.start_time,e.id,e.execution_order),r={...e};if(r.parent_run_id!==void 0){const s=this.runMap.get(r.parent_run_id);s&&(this._addChildRun(s,r),s.child_execution_order=Math.max(s.child_execution_order,r.child_execution_order),r.trace_id=s.trace_id,s.dotted_order!==void 0&&(r.dotted_order=[s.dotted_order,t].join(".")))}else r.trace_id=r.id,r.dotted_order=t;return this.runMap.set(r.id,r),r}async _endTrace(e){var r;const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((r=this.onRunUpdate)==null?void 0:r.call(this,e))}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,s,a,u,l,d){const f=this._getExecutionOrder(s),h=Date.now(),m=l?{...a,metadata:l}:a,y={id:r,name:d??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{prompts:t},execution_order:f,child_runs:[],child_execution_order:f,run_type:"llm",extra:m??{},tags:u||[]};return this._addRunToRunMap(y)}async handleLLMStart(e,t,r,s,a,u,l,d){var h,m;const f=this.runMap.get(r)??this._createRunForLLMStart(e,t,r,s,a,u,l,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onLLMStart)==null?void 0:m.call(this,f)),f}_createRunForChatModelStart(e,t,r,s,a,u,l,d){const f=this._getExecutionOrder(s),h=Date.now(),m=l?{...a,metadata:l}:a,y={id:r,name:d??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:{messages:t},execution_order:f,child_runs:[],child_execution_order:f,run_type:"llm",extra:m??{},tags:u||[]};return this._addRunToRunMap(y)}async handleChatModelStart(e,t,r,s,a,u,l,d){var h,m;const f=this.runMap.get(r)??this._createRunForChatModelStart(e,t,r,s,a,u,l,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onLLMStart)==null?void 0:m.call(this,f)),f}async handleLLMEnd(e,t,r,s,a){var l;const u=this.runMap.get(t);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.outputs=e,u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...a},await((l=this.onLLMEnd)==null?void 0:l.call(this,u)),await this._endTrace(u),u}async handleLLMError(e,t,r,s,a){var l;const u=this.runMap.get(t);if(!u||(u==null?void 0:u.run_type)!=="llm")throw new Error("No LLM run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),u.extra={...u.extra,...a},await((l=this.onLLMError)==null?void 0:l.call(this,u)),await this._endTrace(u),u}_createRunForChainStart(e,t,r,s,a,u,l,d){const f=this._getExecutionOrder(s),h=Date.now(),m={id:r,name:d??e.id[e.id.length-1],parent_run_id:s,start_time:h,serialized:e,events:[{name:"start",time:new Date(h).toISOString()}],inputs:t,execution_order:f,child_execution_order:f,run_type:l??"chain",child_runs:[],extra:u?{metadata:u}:{},tags:a||[]};return this._addRunToRunMap(m)}async handleChainStart(e,t,r,s,a,u,l,d){var h,m;const f=this.runMap.get(r)??this._createRunForChainStart(e,t,r,s,a,u,l,d);return await((h=this.onRunCreate)==null?void 0:h.call(this,f)),await((m=this.onChainStart)==null?void 0:m.call(this,f)),f}async handleChainEnd(e,t,r,s,a){var l;const u=this.runMap.get(t);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.outputs=lm(e,"output"),u.events.push({name:"end",time:new Date(u.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(u.inputs=lm(a.inputs,"input")),await((l=this.onChainEnd)==null?void 0:l.call(this,u)),await this._endTrace(u),u}async handleChainError(e,t,r,s,a){var l;const u=this.runMap.get(t);if(!u)throw new Error("No chain run to end.");return u.end_time=Date.now(),u.error=this.stringifyError(e),u.events.push({name:"error",time:new Date(u.end_time).toISOString()}),(a==null?void 0:a.inputs)!==void 0&&(u.inputs=lm(a.inputs,"input")),await((l=this.onChainError)==null?void 0:l.call(this,u)),await this._endTrace(u),u}_createRunForToolStart(e,t,r,s,a,u,l){const d=this._getExecutionOrder(s),f=Date.now(),h={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{input:t},execution_order:d,child_execution_order:d,run_type:"tool",child_runs:[],extra:u?{metadata:u}:{},tags:a||[]};return this._addRunToRunMap(h)}async handleToolStart(e,t,r,s,a,u,l){var f,h;const d=this.runMap.get(r)??this._createRunForToolStart(e,t,r,s,a,u,l);return await((f=this.onRunCreate)==null?void 0:f.call(this,d)),await((h=this.onToolStart)==null?void 0:h.call(this,d)),d}async handleToolEnd(e,t){var s;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onToolEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleToolError(e,t){var s;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="tool")throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onToolError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleAgentAction(e,t){var a;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="chain")return;const s=r;s.actions=s.actions||[],s.actions.push(e),s.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((a=this.onAgentAction)==null?void 0:a.call(this,r))}async handleAgentEnd(e,t){var s;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentEnd)==null?void 0:s.call(this,r)))}_createRunForRetrieverStart(e,t,r,s,a,u,l){const d=this._getExecutionOrder(s),f=Date.now(),h={id:r,name:l??e.id[e.id.length-1],parent_run_id:s,start_time:f,serialized:e,events:[{name:"start",time:new Date(f).toISOString()}],inputs:{query:t},execution_order:d,child_execution_order:d,run_type:"retriever",child_runs:[],extra:u?{metadata:u}:{},tags:a||[]};return this._addRunToRunMap(h)}async handleRetrieverStart(e,t,r,s,a,u,l){var f,h;const d=this.runMap.get(r)??this._createRunForRetrieverStart(e,t,r,s,a,u,l);return await((f=this.onRunCreate)==null?void 0:f.call(this,d)),await((h=this.onRetrieverStart)==null?void 0:h.call(this,d)),d}async handleRetrieverEnd(e,t){var s;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverEnd)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleRetrieverError(e,t){var s;const r=this.runMap.get(t);if(!r||(r==null?void 0:r.run_type)!=="retriever")throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await((s=this.onRetrieverError)==null?void 0:s.call(this,r)),await this._endTrace(r),r}async handleText(e,t){var s;const r=this.runMap.get(t);!r||(r==null?void 0:r.run_type)!=="chain"||(r.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((s=this.onText)==null?void 0:s.call(this,r)))}async handleLLMNewToken(e,t,r,s,a,u){var d;const l=this.runMap.get(r);if(!l||(l==null?void 0:l.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return l.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:u==null?void 0:u.chunk}}),await((d=this.onLLMNewToken)==null?void 0:d.call(this,l,e,{chunk:u==null?void 0:u.chunk})),l}}var Ac={exports:{}};Ac.exports;var fS;function PM(){return fS||(fS=1,function(n){const t=(a=0)=>u=>`\x1B[${38+a};5;${u}m`,r=(a=0)=>(u,l,d)=>`\x1B[${38+a};2;${u};${l};${d}m`;function s(){const a=new Map,u={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};u.color.gray=u.color.blackBright,u.bgColor.bgGray=u.bgColor.bgBlackBright,u.color.grey=u.color.blackBright,u.bgColor.bgGrey=u.bgColor.bgBlackBright;for(const[l,d]of Object.entries(u)){for(const[f,h]of Object.entries(d))u[f]={open:`\x1B[${h[0]}m`,close:`\x1B[${h[1]}m`},d[f]=u[f],a.set(h[0],h[1]);Object.defineProperty(u,l,{value:d,enumerable:!1})}return Object.defineProperty(u,"codes",{value:a,enumerable:!1}),u.color.close="\x1B[39m",u.bgColor.close="\x1B[49m",u.color.ansi256=t(),u.color.ansi16m=r(),u.bgColor.ansi256=t(10),u.bgColor.ansi16m=r(10),Object.defineProperties(u,{rgbToAnsi256:{value:(l,d,f)=>l===d&&d===f?l<8?16:l>248?231:Math.round((l-8)/247*24)+232:16+36*Math.round(l/255*5)+6*Math.round(d/255*5)+Math.round(f/255*5),enumerable:!1},hexToRgb:{value:l=>{const d=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(l.toString(16));if(!d)return[0,0,0];let{colorString:f}=d.groups;f.length===3&&(f=f.split("").map(m=>m+m).join(""));const h=Number.parseInt(f,16);return[h>>16&255,h>>8&255,h&255]},enumerable:!1},hexToAnsi256:{value:l=>u.rgbToAnsi256(...u.hexToRgb(l)),enumerable:!1}}),u}Object.defineProperty(n,"exports",{enumerable:!0,get:s})}(Ac)),Ac.exports}var CM=PM();const g1=Er(CM);function Wt(n,e){return`${n.open}${e}${n.close}`}function On(n,e){try{return JSON.stringify(n,null,2)}catch{return e}}function hS(n){return typeof n=="string"?n.trim():n==null?n:On(n,n.toString())}function ps(n){if(!n.end_time)return"";const e=n.end_time-n.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:an}=g1;class pS extends Lu{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const s=this.runMap.get(r.parent_run_id);if(s)t.push(s),r=s;else break}return t}getBreadcrumbs(e){const r=[...this.getParents(e).reverse(),e].map((s,a,u)=>{const l=`${s.execution_order}:${s.run_type}:${s.name}`;return a===u.length-1?Wt(g1.bold,l):l}).join(" > ");return Wt(an.grey,r)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.green,"[chain/start]")} [${t}] Entering Chain run with input: ${On(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.cyan,"[chain/end]")} [${t}] [${ps(e)}] Exiting Chain run with output: ${On(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.red,"[chain/error]")} [${t}] [${ps(e)}] Chain run errored with error: ${On(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(s=>s.trim())}:e.inputs;console.log(`${Wt(an.green,"[llm/start]")} [${t}] Entering LLM run with input: ${On(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.cyan,"[llm/end]")} [${t}] [${ps(e)}] Exiting LLM run with output: ${On(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.red,"[llm/error]")} [${t}] [${ps(e)}] LLM run errored with error: ${On(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.green,"[tool/start]")} [${t}] Entering Tool run with input: "${hS(e.inputs.input)}"`)}onToolEnd(e){var r;const t=this.getBreadcrumbs(e);console.log(`${Wt(an.cyan,"[tool/end]")} [${t}] [${ps(e)}] Exiting Tool run with output: "${hS((r=e.outputs)==null?void 0:r.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.red,"[tool/error]")} [${t}] [${ps(e)}] Tool run errored with error: ${On(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${On(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.cyan,"[retriever/end]")} [${t}] [${ps(e)}] Exiting Retriever run with output: ${On(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${Wt(an.red,"[retriever/error]")} [${t}] [${ps(e)}] Retriever run errored with error: ${On(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${Wt(an.blue,"[agent/action]")} [${r}] Agent selected action: ${On(t.actions[t.actions.length-1],"[action]")}`)}}let cm;const kM=()=>{if(cm===void 0){const n=br("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"?{blockOnRootRunFinalization:!0}:{};cm=new gu(n)}return cm};class Ho extends Lu{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:s}=e;this.projectName=r??br("LANGCHAIN_PROJECT")??br("LANGCHAIN_SESSION"),this.exampleId=t,this.client=s??kM();const a=Ho.getTraceableRunTree();a&&this.updateFromRunTree(a)}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await bM()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id,extra:e.extra,session_name:this.projectName};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let t=e;const r=new Set;for(;t.parent_run&&!(r.has(t.id)||(r.add(t.id),!t.parent_run));)t=t.parent_run;r.clear();const s=[t];for(;s.length>0;){const a=s.shift();!a||r.has(a.id)||(r.add(a.id),this.runMap.set(a.id,a),a.child_runs&&s.push(...a.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const t={},r=[];for(const[s,a]of this.runMap){const u=new _n({...a,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[s]=u,r.push([s,a.dotted_order])}r.sort((s,a)=>!s[1]||!a[1]?0:s[1].localeCompare(a[1]));for(const[s]of r){const a=this.runMap.get(s),u=t[s];if(!(!a||!u)&&a.parent_run_id){const l=t[a.parent_run_id];l&&(l.child_runs.push(u),u.parent_run=l)}}return t[e]}static getTraceableRunTree(){try{return lM()}catch{return}}}const y1=Symbol.for("ls:tracing_async_local_storage"),Pc=Symbol.for("lc:context_variables"),OM=n=>{globalThis[y1]=n},yu=()=>globalThis[y1];let qo;function RM(){const n="default"in Ur?Ur.default:Ur;return new n({autoStart:!0,concurrency:1})}function IM(){return typeof qo>"u"&&(qo=RM()),qo}async function vt(n,e){if(e===!0){const t=yu();t!==void 0?await t.run(void 0,async()=>n()):await n()}else qo=IM(),qo.add(async()=>{const t=yu();t!==void 0?await t.run(void 0,async()=>n()):await n()})}const NM=n=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(t=>br(t)==="true");function v1(n){var r;const e=yu();if(e===void 0)return;const t=e.getStore();return(r=t==null?void 0:t[Pc])==null?void 0:r[n]}const jM=Symbol("lc:configure_hooks"),LM=()=>v1(jM)||[];class $M{setHandler(e){return this.setHandlers([e])}}class Nd{constructor(e,t,r,s,a,u,l,d){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:u}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:l}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:d})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;try{await((r=t.handleText)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${s}`),t.raiseError)throw s}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;try{await((l=u.handleCustomEvent)==null?void 0:l.call(u,e,t,this.runId,this.tags,this.metadata))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleCustomEvent: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}}class MM extends Nd{getChild(e){const t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw s}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreRetriever)try{await((r=t.handleRetrieverError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${s}`),t.raiseError)throw e}},t.awaitHandlers)))}}class mS extends Nd{async handleLLMNewToken(e,t,r,s,a,u){await Promise.all(this.handlers.map(l=>vt(async()=>{var d;if(!l.ignoreLLM)try{await((d=l.handleLLMNewToken)==null?void 0:d.call(l,e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,u))}catch(f){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleLLMNewToken: ${f}`),l.raiseError)throw f}},l.awaitHandlers)))}async handleLLMError(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;if(!u.ignoreLLM)try{await((l=u.handleLLMError)==null?void 0:l.call(u,e,this.runId,this._parentRunId,this.tags,a))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMError: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}async handleLLMEnd(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;if(!u.ignoreLLM)try{await((l=u.handleLLMEnd)==null?void 0:l.call(u,e,this.runId,this._parentRunId,this.tags,a))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleLLMEnd: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}}class DM extends Nd{getChild(e){const t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;if(!u.ignoreChain)try{await((l=u.handleChainError)==null?void 0:l.call(u,e,this.runId,this._parentRunId,this.tags,a))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainError: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}async handleChainEnd(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;if(!u.ignoreChain)try{await((l=u.handleChainEnd)==null?void 0:l.call(u,e,this.runId,this._parentRunId,this.tags,a))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleChainEnd: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentAction)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${s}`),t.raiseError)throw s}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleAgentEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${s}`),t.raiseError)throw s}},t.awaitHandlers)))}}class FM extends Nd{getChild(e){const t=new cn(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolError)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${s}`),t.raiseError)throw s}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>vt(async()=>{var r;if(!t.ignoreAgent)try{await((r=t.handleToolEnd)==null?void 0:r.call(t,e,this.runId,this._parentRunId,this.tags))}catch(s){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${s}`),t.raiseError)throw s}},t.awaitHandlers)))}}class cn extends $M{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(t==null?void 0:t.handlers)??this.handlers,this.inheritableHandlers=(t==null?void 0:t.inheritableHandlers)??this.inheritableHandlers,this.tags=(t==null?void 0:t.tags)??this.tags,this.inheritableTags=(t==null?void 0:t.inheritableTags)??this.inheritableTags,this.metadata=(t==null?void 0:t.metadata)??this.metadata,this.inheritableMetadata=(t==null?void 0:t.inheritableMetadata)??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,s=void 0,a=void 0,u=void 0,l=void 0,d=void 0){return Promise.all(t.map(async(f,h)=>{const m=h===0&&r?r:Gt();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return wo(y)&&y._createRunForLLMStart(e,[f],m,this._parentRunId,a,this.tags,this.metadata,d),vt(async()=>{var v;try{await((v=y.handleLLMStart)==null?void 0:v.call(y,e,[f],m,this._parentRunId,a,this.tags,this.metadata,d))}catch(w){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${w}`),y.raiseError)throw w}},y.awaitHandlers)})),new mS(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,s=void 0,a=void 0,u=void 0,l=void 0,d=void 0){return Promise.all(t.map(async(f,h)=>{const m=h===0&&r?r:Gt();return await Promise.all(this.handlers.map(y=>{if(!y.ignoreLLM)return wo(y)&&y._createRunForChatModelStart(e,[f],m,this._parentRunId,a,this.tags,this.metadata,d),vt(async()=>{var v,w;try{if(y.handleChatModelStart)await((v=y.handleChatModelStart)==null?void 0:v.call(y,e,[f],m,this._parentRunId,a,this.tags,this.metadata,d));else if(y.handleLLMStart){const b=GA(f);await((w=y.handleLLMStart)==null?void 0:w.call(y,e,[b],m,this._parentRunId,a,this.tags,this.metadata,d))}}catch(b){if((y.raiseError?console.error:console.warn)(`Error in handler ${y.constructor.name}, handleLLMStart: ${b}`),y.raiseError)throw b}},y.awaitHandlers)})),new mS(m,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=Gt(),s=void 0,a=void 0,u=void 0,l=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreChain)return wo(d)&&d._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,s,l),vt(async()=>{var f;try{await((f=d.handleChainStart)==null?void 0:f.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,s,l))}catch(h){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleChainStart: ${h}`),d.raiseError)throw h}},d.awaitHandlers)})),new DM(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=Gt(),s=void 0,a=void 0,u=void 0,l=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreAgent)return wo(d)&&d._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,l),vt(async()=>{var f;try{await((f=d.handleToolStart)==null?void 0:f.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleToolStart: ${h}`),d.raiseError)throw h}},d.awaitHandlers)})),new FM(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=Gt(),s=void 0,a=void 0,u=void 0,l=void 0){return await Promise.all(this.handlers.map(d=>{if(!d.ignoreRetriever)return wo(d)&&d._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,l),vt(async()=>{var f;try{await((f=d.handleRetrieverStart)==null?void 0:f.call(d,e,t,r,this._parentRunId,this.tags,this.metadata,l))}catch(h){if((d.raiseError?console.error:console.warn)(`Error in handler ${d.constructor.name}, handleRetrieverStart: ${h}`),d.raiseError)throw h}},d.awaitHandlers)})),new MM(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,s,a){await Promise.all(this.handlers.map(u=>vt(async()=>{var l;if(!u.ignoreCustomEvent)try{await((l=u.handleCustomEvent)==null?void 0:l.call(u,e,t,r,this.tags,this.metadata))}catch(d){if((u.raiseError?console.error:console.warn)(`Error in handler ${u.constructor.name}, handleCustomEvent: ${d}`),u.raiseError)throw d}},u.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new cn(this._parentRunId);for(const s of this.handlers){const a=this.inheritableHandlers.includes(s);r.addHandler(s,a)}for(const s of this.tags){const a=this.inheritableTags.includes(s);r.addTags([s],a)}for(const s of Object.keys(this.metadata)){const a=Object.keys(this.inheritableMetadata).includes(s);r.addMetadata({[s]:this.metadata[s]},a)}for(const s of e)r.handlers.filter(a=>a.name==="console_callback_handler").some(a=>a.name===s.name)||r.addHandler(s,t);return r}static fromHandlers(e){class t extends ju{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Gt()}),Object.assign(this,e)}}const r=new this;return r.addHandler(new t),r}static configure(e,t,r,s,a,u,l){return this._configureSync(e,t,r,s,a,u,l)}static _configureSync(e,t,r,s,a,u,l){var y,v;let d;(e||t)&&(Array.isArray(e)||!e?(d=new cn,d.setHandlers((e==null?void 0:e.map(Xc))??[],!0)):d=e,d=d.copy(Array.isArray(t)?t.map(Xc):t==null?void 0:t.handlers,!1));const f=br("LANGCHAIN_VERBOSE")==="true"||(l==null?void 0:l.verbose),h=((y=Ho.getTraceableRunTree())==null?void 0:y.tracingEnabled)||NM(),m=h||(br("LANGCHAIN_TRACING")??!1);if(f||m){if(d||(d=new cn),f&&!d.handlers.some(w=>w.name===pS.prototype.name)){const w=new pS;d.addHandler(w,!0)}if(m&&!d.handlers.some(w=>w.name==="langchain_tracer")&&h){const w=new Ho;d.addHandler(w,!0),d._parentRunId=((v=Ho.getTraceableRunTree())==null?void 0:v.id)??d._parentRunId}}for(const{contextVar:w,inheritable:b=!0,handlerClass:S,envVar:E}of LM()){const A=E&&br(E)==="true"&&S;let T;const R=w!==void 0?v1(w):void 0;R&&EM(R)?T=R:A&&(T=new S({})),T!==void 0&&(d||(d=new cn),d.handlers.some(I=>I.name===T.name)||d.addHandler(T,b))}return(r||s)&&d&&(d.addTags(r??[]),d.addTags(s??[],!1)),(a||u)&&d&&(d.addMetadata(a??{}),d.addMetadata(u??{},!1)),d}}function Xc(n){return"name"in n?n:ju.fromMethods(n)}class UM{getStore(){}run(e,t){return t()}enterWith(e){}}const BM=new UM,gS=Symbol.for("lc:child_config");class VM{getInstance(){return yu()??BM}getRunnableConfig(){var t,r;return(r=(t=this.getInstance().getStore())==null?void 0:t.extra)==null?void 0:r[gS]}runWithConfig(e,t,r){var h;const s=cn._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),a=this.getInstance(),u=a.getStore(),l=s==null?void 0:s.getParentRunId(),d=(h=s==null?void 0:s.handlers)==null?void 0:h.find(m=>(m==null?void 0:m.name)==="langchain_tracer");let f;return d&&l?f=d.convertToRunTree(l):r||(f=new _n({name:"<runnable_lambda>",tracingEnabled:!1})),f&&(f.extra={...f.extra,[gS]:e}),u!==void 0&&u[Pc]!==void 0&&(f===void 0&&(f={}),f[Pc]=u[Pc]),a.run(f,t)}initializeGlobalInstance(e){yu()===void 0&&OM(e)}}const ks=new VM,dm=25;async function tr(n){return cn._configureSync(n==null?void 0:n.callbacks,void 0,n==null?void 0:n.tags,void 0,n==null?void 0:n.metadata)}function yS(...n){const e={};for(const t of n.filter(r=>!!r))for(const r of Object.keys(t))if(r==="metadata")e[r]={...e[r],...t[r]};else if(r==="tags"){const s=e[r]??[];e[r]=[...new Set(s.concat(t[r]??[]))]}else if(r==="configurable")e[r]={...e[r],...t[r]};else if(r==="timeout")e.timeout===void 0?e.timeout=t.timeout:t.timeout!==void 0&&(e.timeout=Math.min(e.timeout,t.timeout));else if(r==="signal")e.signal===void 0?e.signal=t.signal:t.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,t.signal]):e.signal=t.signal);else if(r==="callbacks"){const s=e.callbacks,a=t.callbacks;if(Array.isArray(a))if(!s)e.callbacks=a;else if(Array.isArray(s))e.callbacks=s.concat(a);else{const u=s.copy();for(const l of a)u.addHandler(Xc(l),!0);e.callbacks=u}else if(a)if(!s)e.callbacks=a;else if(Array.isArray(s)){const u=a.copy();for(const l of s)u.addHandler(Xc(l),!0);e.callbacks=u}else e.callbacks=new cn(a._parentRunId,{handlers:s.handlers.concat(a.handlers),inheritableHandlers:s.inheritableHandlers.concat(a.inheritableHandlers),tags:Array.from(new Set(s.tags.concat(a.tags))),inheritableTags:Array.from(new Set(s.inheritableTags.concat(a.inheritableTags))),metadata:{...s.metadata,...a.metadata}})}else{const s=r;e[s]=t[s]??e[s]}return e}const zM=new Set(["string","number","boolean"]);function Fe(n){var r;const e=ks.getRunnableConfig();let t={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){const{runId:s,runName:a,...u}=e;t=Object.entries(u).reduce((l,[d,f])=>(f!==void 0&&(l[d]=f),l),t)}if(n&&(t=Object.entries(n).reduce((s,[a,u])=>(u!==void 0&&(s[a]=u),s),t)),t!=null&&t.configurable)for(const s of Object.keys(t.configurable))zM.has(typeof t.configurable[s])&&!((r=t.metadata)!=null&&r[s])&&(t.metadata||(t.metadata={}),t.metadata[s]=t.configurable[s]);if(t.timeout!==void 0){if(t.timeout<=0)throw new Error("Timeout must be a positive number");const s=AbortSignal.timeout(t.timeout);t.signal!==void 0?"any"in AbortSignal&&(t.signal=AbortSignal.any([t.signal,s])):t.signal=s,delete t.timeout}return t}function Bt(n={},{callbacks:e,maxConcurrency:t,recursionLimit:r,runName:s,configurable:a,runId:u}={}){const l=Fe(n);return e!==void 0&&(delete l.runName,l.callbacks=e),r!==void 0&&(l.recursionLimit=r),t!==void 0&&(l.maxConcurrency=t),s!==void 0&&(l.runName=s),a!==void 0&&(l.configurable={...l.configurable,...a}),u!==void 0&&delete l.runId,l}function ma(n){return n?{configurable:n.configurable,recursionLimit:n.recursionLimit,callbacks:n.callbacks,tags:n.tags,metadata:n.metadata,maxConcurrency:n.maxConcurrency,timeout:n.timeout,signal:n.signal}:void 0}async function Os(n,e){if(e===void 0)return n;let t;return Promise.race([n.catch(r=>{if(!(e!=null&&e.aborted))throw r}),new Promise((r,s)=>{t=()=>{s(new Error("Aborted"))},e.addEventListener("abort",t),e.aborted&&s(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",t))}class xn extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new xn({start(r){return s();function s(){return t.read().then(({done:a,value:u})=>{if(a){r.close();return}return r.enqueue(u),s()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new xn({async pull(t){const{value:r,done:s}=await e.next();s&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}function _1(n,e=2){const t=Array.from({length:e},()=>[]);return t.map(async function*(s){for(;;)if(s.length===0){const a=await n.next();for(const u of t)u.push(a)}else{if(s[0].done)return;yield s.shift().value}})}function nr(n,e){if(Array.isArray(n)&&Array.isArray(e))return n.concat(e);if(typeof n=="string"&&typeof e=="string")return n+e;if(typeof n=="number"&&typeof e=="number")return n+e;if("concat"in n&&typeof n.concat=="function")return n.concat(e);if(typeof n=="object"&&typeof e=="object"){const t={...n};for(const[r,s]of Object.entries(e))r in t&&!Array.isArray(t[r])?t[r]=nr(t[r],s):t[r]=s;return t}else throw new Error(`Cannot concat ${typeof n} and ${typeof e}`)}class Pa{constructor(e){var t;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??((t=this.config)==null?void 0:t.signal),this.setup=new Promise((r,s)=>{ks.runWithConfig(ma(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(r,s):this.firstResult.then(a=>r(void 0),s)},!0)})}async next(...e){var t;return(t=this.signal)==null||t.throwIfAborted(),this.firstResultUsed?ks.runWithConfig(ma(this.config),this.signal?async()=>Os(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function HM(n,e,t,r,...s){const a=new Pa({generator:e,startSetup:t,signal:r}),u=await a.setup;return{output:n(a,u,...s),setup:u}}class gs{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=Kc({},t);return new vu({ops:t,state:r[r.length-1].newDocument})}}class vu extends gs{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=Kc(this.state,e.ops);return new vu({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=Kc({},e.ops);return new vu({ops:e.ops,state:t[t.length-1].newDocument})}}const qM=n=>n.name==="log_stream_tracer";async function vS(n,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:t}=n;if(["retriever","llm","prompt"].includes(n.run_type))return t;if(!(Object.keys(t).length===1&&(t==null?void 0:t.input)===""))return t.input}async function _S(n,e){const{outputs:t}=n;return e==="original"||["retriever","llm","prompt"].includes(n.run_type)?t:t!==void 0&&Object.keys(t).length===1&&(t==null?void 0:t.output)!==void 0?t.output:t}function WM(n){return n!==void 0&&n.message!==void 0}class wS extends Lu{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(e==null?void 0:e._schemaFormat)??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=xn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(r=r||t.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(r=r&&t.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const s=this.keyMapByRunId[e];s&&await this.writer.write(new gs({ops:[{op:"add",path:`/logs/${s}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){var s;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new gs({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(r.inputs=await vS(e,this._schemaFormat)),await this.writer.write(new gs({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const r=[];this._schemaFormat==="streaming_events"&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await vS(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await _S(e,this._schemaFormat)}),e.end_time!==void 0&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const s=new gs({ops:r});await this.writer.write(s)}finally{if(e.id===this.rootId){const t=new gs({ops:[{op:"replace",path:"/final_output",value:await _S(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const s=this.keyMapByRunId[e.id];if(s===void 0)return;const a=e.inputs.messages!==void 0;let u;a?WM(r==null?void 0:r.chunk)?u=r==null?void 0:r.chunk:u=new Es({id:`run-${e.id}`,content:t}):u=t;const l=new gs({ops:[{op:"add",path:`/logs/${s}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${s}/streamed_output/-`,value:u}]});await this.writer.write(l)}}const bS="__run";class ga{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new ga({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class fi extends ga{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new fi({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function fc({name:n,serialized:e}){return n!==void 0?n:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}const ZM=n=>n.name==="event_stream_tracer";class GM extends Lu{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=(e==null?void 0:e.autoClose)??!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=xn.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(r=r||t.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(r=r&&t.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const s=this.runInfoMap.get(e);if(s===void 0){yield r.value;return}function a(l,d){return l==="llm"&&typeof d=="string"?new ga({text:d}):d}let u=this.tappedPromises.get(e);if(u===void 0){let l;u=new Promise(d=>{l=d}),this.tappedPromises.set(e,u);try{const d={event:`on_${s.runType}_stream`,run_id:e,name:s.name,tags:s.tags,metadata:s.metadata,data:{}};await this.send({...d,data:{chunk:a(s.runType,r.value)}},s),yield r.value;for await(const f of t)s.runType!=="tool"&&s.runType!=="retriever"&&await this.send({...d,data:{chunk:a(s.runType,f)}},s),yield f}finally{l()}}else{yield r.value;for await(const l of t)yield l}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);r!==void 0?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){var u,l;const t=fc(e),r=e.inputs.messages!==void 0?"chat_model":"llm",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,s);const a=`on_${r}_start`;await this.send({event:a,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},s)}async onLLMNewToken(e,t,r){const s=this.runInfoMap.get(e.id);let a,u;if(s===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(this.runInfoMap.size!==1){if(s.runType==="chat_model")u="on_chat_model_stream",(r==null?void 0:r.chunk)===void 0?a=new Es({content:t,id:`run-${e.id}`}):a=r.chunk.message;else if(s.runType==="llm")u="on_llm_stream",(r==null?void 0:r.chunk)===void 0?a=new ga({text:t}):a=r.chunk;else throw new Error(`Unexpected run type ${s.runType}`);await this.send({event:u,data:{chunk:a},run_id:e.id,name:s.name,tags:s.tags,metadata:s.metadata},s)}}async onLLMEnd(e){var u,l,d;const t=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let r;if(t===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const s=(u=e.outputs)==null?void 0:u.generations;let a;if(t.runType==="chat_model"){for(const f of s??[]){if(a!==void 0)break;a=(l=f[0])==null?void 0:l.message}r="on_chat_model_end"}else if(t.runType==="llm")a={generations:s==null?void 0:s.map(f=>f.map(h=>({text:h.text,generationInfo:h.generationInfo}))),llmOutput:((d=e.outputs)==null?void 0:d.llmOutput)??{}},r="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);await this.sendEndEvent({event:r,data:{output:a,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){var u,l;const t=fc(e),r=e.run_type??"chain",s={tags:e.tags??[],metadata:((u=e.extra)==null?void 0:u.metadata)??{},name:t,runType:e.run_type};let a={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(a={},s.inputs={}):e.inputs.input!==void 0?(a.input=e.inputs.input,s.inputs=e.inputs.input):(a.input=e.inputs,s.inputs=e.inputs),this.runInfoMap.set(e.id,s),await this.send({event:`on_${r}_start`,data:a,name:t,tags:e.tags??[],run_id:e.id,metadata:((l=e.extra)==null?void 0:l.metadata)??{}},s)}async onChainEnd(e){var l;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,s=e.inputs??t.inputs??{},u={output:((l=e.outputs)==null?void 0:l.output)??e.outputs,input:s};s.input&&Object.keys(s).length===1&&(u.input=s.input,t.inputs=s.input),await this.sendEndEvent({event:r,data:u,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){var s,a;const t=fc(e),r={tags:e.tags??[],metadata:((s=e.extra)==null?void 0:s.metadata)??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{}},r)}async onToolEnd(e){var s;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(t.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=((s=e.outputs)==null?void 0:s.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){var a,u;const t=fc(e),s={tags:e.tags??[],metadata:((a=e.extra)==null?void 0:a.metadata)??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,s),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:((u=e.extra)==null?void 0:u.metadata)??{}},s)}async onRetrieverEnd(e){var r;const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),t===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:((r=e.outputs)==null?void 0:r.documents)??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const s=this.runInfoMap.get(r);if(s===void 0)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:s.tags,metadata:s.metadata,data:t},s)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const KM=[400,401,402,403,404,405,406,407,409],JM=n=>{var t,r;if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||(n==null?void 0:n.code)==="ECONNABORTED")throw n;const e=((t=n==null?void 0:n.response)==null?void 0:t.status)??(n==null?void 0:n.status);if(e&&KM.includes(+e))throw n;if(((r=n==null?void 0:n.error)==null?void 0:r.code)==="insufficient_quota"){const s=new Error(n==null?void 0:n.message);throw s.name="InsufficientQuotaError",s}};class Gy{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??JM;const t="default"in Ur?Ur.default:Ur;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Wc(()=>e(...t).catch(r=>{throw r instanceof Error?r:new Error(r)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((s,a)=>{var u;(u=e.signal)==null||u.addEventListener("abort",()=>{a(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}class w1 extends Lu{constructor({config:e,onStart:t,onEnd:r,onError:s}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=s}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function Ky(n){return n?n.lc_runnable:!1}class XM{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const s=e.tags??[];return this.includeNames!==void 0&&(r=r||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(r=r||this.includeTypes.includes(t)),this.includeTags!==void 0&&(r=r||s.some(a=>{var u;return(u=this.includeTags)==null?void 0:u.includes(a)})),this.excludeNames!==void 0&&(r=r&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(r=r&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(r=r&&s.every(a=>{var u;return!((u=this.excludeTags)!=null&&u.includes(a))})),r}}const YM=Symbol("Let zodToJsonSchema decide on which parser to use"),QM={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},eD=n=>({...QM,...n}),tD=n=>{const e=eD(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[s._def,{def:s._def,path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function b1(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function Ve(n,e,t,r,s){n[e]=t,b1(n,e,r,s)}function nD(){return{}}function rD(n,e){var r,s,a;const t={type:"array"};return(r=n.type)!=null&&r._def&&((a=(s=n.type)==null?void 0:s._def)==null?void 0:a.typeName)!==F.ZodAny&&(t.items=Ue(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&Ve(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&Ve(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(Ve(t,"minItems",n.exactLength.value,n.exactLength.message,e),Ve(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function sD(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?Ve(t,"minimum",r.value,r.message,e):Ve(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Ve(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ve(t,"maximum",r.value,r.message,e):Ve(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Ve(t,"maximum",r.value,r.message,e));break;case"multipleOf":Ve(t,"multipleOf",r.value,r.message,e);break}return t}function iD(){return{type:"boolean"}}function x1(n,e){return Ue(n.type._def,e)}const aD=(n,e)=>Ue(n.innerType._def,e);function S1(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>S1(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return oD(n,e)}}const oD=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":Ve(t,"minimum",r.value,r.message,e);break;case"max":Ve(t,"maximum",r.value,r.message,e);break}return t};function uD(n,e){return{...Ue(n.innerType._def,e),default:n.defaultValue()}}function lD(n,e){return e.effectStrategy==="input"?Ue(n.schema._def,e):{}}function cD(n){return{type:"string",enum:Array.from(n.values)}}const dD=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function fD(n,e){const t=[Ue(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),Ue(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(a=>{if(dD(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let u=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:l,...d}=a;u=d}else r=void 0;s.push(u)}}),s.length?{allOf:s,...r}:void 0}function hD(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let fm;const Bn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(fm===void 0&&(fm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),fm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function E1(n,e){const t={type:"string"};if(n.checks)for(const r of n.checks)switch(r.kind){case"min":Ve(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e);break;case"max":Ve(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Vn(t,"email",r.message,e);break;case"format:idn-email":Vn(t,"idn-email",r.message,e);break;case"pattern:zod":Zt(t,Bn.email,r.message,e);break}break;case"url":Vn(t,"uri",r.message,e);break;case"uuid":Vn(t,"uuid",r.message,e);break;case"regex":Zt(t,r.regex,r.message,e);break;case"cuid":Zt(t,Bn.cuid,r.message,e);break;case"cuid2":Zt(t,Bn.cuid2,r.message,e);break;case"startsWith":Zt(t,RegExp(`^${hm(r.value,e)}`),r.message,e);break;case"endsWith":Zt(t,RegExp(`${hm(r.value,e)}$`),r.message,e);break;case"datetime":Vn(t,"date-time",r.message,e);break;case"date":Vn(t,"date",r.message,e);break;case"time":Vn(t,"time",r.message,e);break;case"duration":Vn(t,"duration",r.message,e);break;case"length":Ve(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,r.value):r.value,r.message,e),Ve(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,r.value):r.value,r.message,e);break;case"includes":{Zt(t,RegExp(hm(r.value,e)),r.message,e);break}case"ip":{r.version!=="v6"&&Vn(t,"ipv4",r.message,e),r.version!=="v4"&&Vn(t,"ipv6",r.message,e);break}case"base64url":Zt(t,Bn.base64url,r.message,e);break;case"jwt":Zt(t,Bn.jwt,r.message,e);break;case"cidr":{r.version!=="v6"&&Zt(t,Bn.ipv4Cidr,r.message,e),r.version!=="v4"&&Zt(t,Bn.ipv6Cidr,r.message,e);break}case"emoji":Zt(t,Bn.emoji(),r.message,e);break;case"ulid":{Zt(t,Bn.ulid,r.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Vn(t,"binary",r.message,e);break}case"contentEncoding:base64":{Ve(t,"contentEncoding","base64",r.message,e);break}case"pattern:zod":{Zt(t,Bn.base64,r.message,e);break}}break}case"nanoid":Zt(t,Bn.nanoid,r.message,e)}return t}function hm(n,e){return e.patternStrategy==="escape"?mD(n):n}const pD=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function mD(n){let e="";for(let t=0;t<n.length;t++)pD.has(n[t])||(e+="\\"),e+=n[t];return e}function Vn(n,e,t,r){var s;n.format||(s=n.anyOf)!=null&&s.some(a=>a.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):Ve(n,"format",e,t,r)}function Zt(n,e,t,r){var s;n.pattern||(s=n.allOf)!=null&&s.some(a=>a.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:xS(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):Ve(n,"pattern",xS(e,r),t,r)}function xS(n,e){var d;if(!e.applyRegexFlags||!n.flags)return n.source;const t={i:n.flags.includes("i"),m:n.flags.includes("m"),s:n.flags.includes("s")},r=t.i?n.source.toLowerCase():n.source;let s="",a=!1,u=!1,l=!1;for(let f=0;f<r.length;f++){if(a){s+=r[f],a=!1;continue}if(t.i){if(u){if(r[f].match(/[a-z]/)){l?(s+=r[f],s+=`${r[f-2]}-${r[f]}`.toUpperCase(),l=!1):r[f+1]==="-"&&((d=r[f+2])!=null&&d.match(/[a-z]/))?(s+=r[f],l=!0):s+=`${r[f]}${r[f].toUpperCase()}`;continue}}else if(r[f].match(/[a-z]/)){s+=`[${r[f]}${r[f].toUpperCase()}]`;continue}}if(t.m){if(r[f]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(r[f]==="$"){s+=`($|(?=[\r
]))`;continue}}if(t.s&&r[f]==="."){s+=u?`${r[f]}\r
`:`[${r[f]}\r
]`;continue}s+=r[f],r[f]==="\\"?a=!0:u&&r[f]==="]"?u=!1:!u&&r[f]==="["&&(u=!0)}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return s}function T1(n,e){var r,s,a,u,l,d;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===F.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((f,h)=>({...f,[h]:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",h]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const t={type:"object",additionalProperties:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===F.ZodString&&((a=n.keyType._def.checks)!=null&&a.length)){const{type:f,...h}=E1(n.keyType._def,e);return{...t,propertyNames:h}}else{if(((u=n.keyType)==null?void 0:u._def.typeName)===F.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};if(((l=n.keyType)==null?void 0:l._def.typeName)===F.ZodBranded&&n.keyType._def.type._def.typeName===F.ZodString&&((d=n.keyType._def.type._def.checks)!=null&&d.length)){const{type:f,...h}=x1(n.keyType._def,e);return{...t,propertyNames:h}}}return t}function gD(n,e){if(e.mapStrategy==="record")return T1(n,e);const t=Ue(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function yD(n){const e=n.values,r=Object.keys(n.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function vD(){return{not:{}}}function _D(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Yc={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function wD(n,e){if(e.target==="openApi3")return SS(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in Yc&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,a)=>{const u=Yc[a._def.typeName];return u&&!s.includes(u)?[...s,u]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,a)=>{const u=typeof a._def.value;switch(u){case"string":case"number":case"boolean":return[...s,u];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((a,u,l)=>l.indexOf(a)===u);return{type:s.length>1?s:s[0],enum:t.reduce((a,u)=>a.includes(u._def.value)?a:[...a,u._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return SS(n,e)}const SS=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>Ue(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function bD(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"?{type:Yc[n.innerType._def.typeName],nullable:!0}:{type:[Yc[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function xD(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",b1(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?Ve(t,"minimum",r.value,r.message,e):Ve(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),Ve(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?Ve(t,"maximum",r.value,r.message,e):Ve(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),Ve(t,"maximum",r.value,r.message,e));break;case"multipleOf":Ve(t,"multipleOf",r.value,r.message,e);break}return t}function SD(n,e){const t=e.target==="openAi",r={type:"object",properties:{}},s=[],a=n.shape();for(const l in a){let d=a[l];if(d===void 0||d._def===void 0)continue;let f=TD(d);f&&t&&(d instanceof er&&(d=d._def.innerType),d.isNullable()||(d=d.nullable()),f=!1);const h=Ue(d._def,{...e,currentPath:[...e.currentPath,"properties",l],propertyPath:[...e.currentPath,"properties",l]});h!==void 0&&(r.properties[l]=h,f||s.push(l))}s.length&&(r.required=s);const u=ED(n,e);return u!==void 0&&(r.additionalProperties=u),r}function ED(n,e){if(n.catchall._def.typeName!=="ZodNever")return Ue(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(n.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function TD(n){try{return n.isOptional()}catch{return!0}}const AD=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return Ue(n.innerType._def,e);const t=Ue(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},PD=(n,e)=>{if(e.pipeStrategy==="input")return Ue(n.in._def,e);if(e.pipeStrategy==="output")return Ue(n.out._def,e);const t=Ue(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=Ue(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function CD(n,e){return Ue(n.type._def,e)}function kD(n,e){const r={type:"array",uniqueItems:!0,items:Ue(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&Ve(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&Ve(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function OD(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Ue(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Ue(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Ue(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function RD(){return{not:{}}}function ID(){return{}}const ND=(n,e)=>Ue(n.innerType._def,e),jD=(n,e,t)=>{switch(e){case F.ZodString:return E1(n,t);case F.ZodNumber:return xD(n,t);case F.ZodObject:return SD(n,t);case F.ZodBigInt:return sD(n,t);case F.ZodBoolean:return iD();case F.ZodDate:return S1(n,t);case F.ZodUndefined:return RD();case F.ZodNull:return _D(t);case F.ZodArray:return rD(n,t);case F.ZodUnion:case F.ZodDiscriminatedUnion:return wD(n,t);case F.ZodIntersection:return fD(n,t);case F.ZodTuple:return OD(n,t);case F.ZodRecord:return T1(n,t);case F.ZodLiteral:return hD(n,t);case F.ZodEnum:return cD(n);case F.ZodNativeEnum:return yD(n);case F.ZodNullable:return bD(n,t);case F.ZodOptional:return AD(n,t);case F.ZodMap:return gD(n,t);case F.ZodSet:return kD(n,t);case F.ZodLazy:return()=>n.getter()._def;case F.ZodPromise:return CD(n,t);case F.ZodNaN:case F.ZodNever:return vD();case F.ZodEffects:return lD(n,t);case F.ZodAny:return nD();case F.ZodUnknown:return ID();case F.ZodDefault:return uD(n,t);case F.ZodBranded:return x1(n,t);case F.ZodReadonly:return ND(n,t);case F.ZodCatch:return aD(n,t);case F.ZodPipeline:return PD(n,t);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(r=>{})()}};function Ue(n,e,t=!1){var l;const r=e.seen.get(n);if(e.override){const d=(l=e.override)==null?void 0:l.call(e,n,e,r,t);if(d!==YM)return d}if(r&&!t){const d=LD(r,e);if(d!==void 0)return d}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const a=jD(n,n.typeName,e),u=typeof a=="function"?Ue(a(),e):a;if(u&&MD(n,e,u),e.postProcess){const d=e.postProcess(u,n,e);return s.jsonSchema=u,d}return s.jsonSchema=u,u}const LD=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"relative":return{$ref:$D(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((t,r)=>e.currentPath[r]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},$D=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},MD=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),$u=(n,e)=>{const t=tD(e),r=void 0,s=e==null?void 0:e.name,a=Ue(n._def,t,!1)??{},u=s===void 0?r?{...a,[t.definitionPath]:r}:a:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,s].join("/"),[t.definitionPath]:{...r,[s]:a}};return t.target==="jsonSchema7"?u.$schema="http://json-schema.org/draft-07/schema#":(t.target==="jsonSchema2019-09"||t.target==="openAi")&&(u.$schema="https://json-schema.org/draft/2019-09/schema#"),t.target==="openAi"&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};function pm(n){return n.replace(/[^a-zA-Z-_0-9]/g,"_")}const DD=["*","_","`"];function FD(n){let e="";for(const[t,r]of Object.entries(n))e+=`	classDef ${t} ${r};
`;return e}function UD(n,e,t){const{firstNode:r,lastNode:s,nodeColors:a,withStyles:u=!0,curveStyle:l="linear",wrapLabelNWords:d=9}=t??{};let f=u?`%%{init: {'flowchart': {'curve': '${l}'}}}%%
graph TD;
`:`graph TD;
`;if(u){const v="default",w={[v]:"{0}({1})"};r!==void 0&&(w[r]="{0}([{1}]):::first"),s!==void 0&&(w[s]="{0}([{1}]):::last");for(const[b,S]of Object.entries(n)){const E=S.name.split(":").pop()??"";let T=DD.some(I=>E.startsWith(I)&&E.endsWith(I))?`<p>${E}</p>`:E;Object.keys(S.metadata??{}).length&&(T+=`<hr/><small><em>${Object.entries(S.metadata??{}).map(([I,M])=>`${I} = ${M}`).join(`
`)}</em></small>`);const R=(w[b]??w[v]).replace("{0}",pm(b)).replace("{1}",T);f+=`	${R}
`}}const h={};for(const v of e){const w=v.source.split(":"),b=v.target.split(":"),S=w.filter((E,A)=>E===b[A]).join(":");h[S]||(h[S]=[]),h[S].push(v)}const m=new Set;function y(v,w){const b=v.length===1&&v[0].source===v[0].target;if(w&&!b){const S=w.split(":").pop();if(m.has(S))throw new Error(`Found duplicate subgraph '${S}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);m.add(S),f+=`	subgraph ${S}
`}for(const S of v){const{source:E,target:A,data:T,conditional:R}=S;let I="";if(T!==void 0){let M=T;const B=M.split(" ");B.length>d&&(M=Array.from({length:Math.ceil(B.length/d)},(U,ie)=>B.slice(ie*d,(ie+1)*d).join(" ")).join("&nbsp;<br>&nbsp;")),I=R?` -. &nbsp;${M}&nbsp; .-> `:` -- &nbsp;${M}&nbsp; --> `}else I=R?" -.-> ":" --> ";f+=`	${pm(E)}${I}${pm(A)};
`}for(const S in h)S.startsWith(`${w}:`)&&S!==w&&y(h[S],S);w&&!b&&(f+=`	end
`)}y(h[""]??[],"");for(const v in h)!v.includes(":")&&v!==""&&y(h[v],v);return u&&(f+=FD(a??{})),f}async function BD(n,e){let{backgroundColor:t="white"}=e??{};const r=btoa(n);t!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(t)||(t=`!${t}`));const s=`https://mermaid.ink/img/${r}?bgColor=${t}`,a=await fetch(s);if(!a.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${a.status}`,`Status text: ${a.statusText}`].join(`
`));return await a.blob()}function VD(n,e){if(n!==void 0&&!Bo(n))return n;if(Ky(e))try{let t=e.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t}catch{return e.getName()}else return e.name??"UnknownSchema"}function zD(n){return Ky(n.data)?{type:"runnable",data:{id:n.data.lc_id,name:n.data.getName()}}:{type:"schema",data:{...$u(n.data.schema),title:n.data.name}}}class jd{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=(e==null?void 0:e.nodes)??this.nodes,this.edges=(e==null?void 0:e.edges)??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=Bo(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...zD(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return typeof t.data<"u"&&(r.data=t.data),typeof t.conditional<"u"&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);const s=t??Gt(),a={id:s,data:e,name:VD(t,e),metadata:r};return this.nodes[s]=a,a}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);const a={source:e.id,target:t.id,data:r,conditional:s};return this.edges.push(a),a}firstNode(){return ES(this)}lastNode(){return TS(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(f=>f.id).every(Bo)&&(r="");const a=f=>r?`${r}:${f}`:f;Object.entries(e.nodes).forEach(([f,h])=>{this.nodes[a(f)]={...h,id:a(f)}});const u=e.edges.map(f=>({...f,source:a(f.source),target:a(f.target)}));this.edges=[...this.edges,...u];const l=e.firstNode(),d=e.lastNode();return[l?{id:a(l.id),data:l.data}:void 0,d?{id:a(d.id),data:d.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&ES(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&TS(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(s=>[s.id,s.name])),t=new Map;Object.values(e).forEach(s=>{t.set(s,(t.get(s)||0)+1)});const r=s=>{const a=e[s];return Bo(s)&&t.get(a)===1?a:s};return new jd({nodes:Object.fromEntries(Object.entries(this.nodes).map(([s,a])=>[r(s),{...a,id:r(s)}])),edges:this.edges.map(s=>({...s,source:r(s.source),target:r(s.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:s={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:a}=e??{},u=this.reid(),l=u.firstNode(),d=u.lastNode();return UD(u.nodes,u.edges,{firstNode:l==null?void 0:l.id,lastNode:d==null?void 0:d.id,withStyles:t,curveStyle:r,nodeColors:s,wrapLabelNWords:a})}async drawMermaidPng(e){const t=this.drawMermaid(e);return BD(t,{backgroundColor:e==null?void 0:e.backgroundColor})}}function ES(n,e=[]){const t=new Set(n.edges.filter(s=>!e.includes(s.source)).map(s=>s.target)),r=[];for(const s of Object.values(n.nodes))!e.includes(s.id)&&!t.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function TS(n,e=[]){const t=new Set(n.edges.filter(s=>!e.includes(s.target)).map(s=>s.source)),r=[];for(const s of Object.values(n.nodes))!e.includes(s.id)&&!t.has(s.id)&&r.push(s);return r.length===1?r[0]:void 0}function HD(n){const e=new TextEncoder,t=new ReadableStream({async start(r){for await(const s of n)r.enqueue(e.encode(`event: data
data: ${JSON.stringify(s)}

`));r.enqueue(e.encode(`event: end

`)),r.close()}});return xn.fromReadableStream(t)}function AS(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.iterator]=="function"&&typeof n.next=="function"}const qD=n=>n!=null&&typeof n=="object"&&"next"in n&&typeof n.next=="function";function gg(n){return typeof n=="object"&&n!==null&&typeof n[Symbol.asyncIterator]=="function"}function*PS(n,e){for(;;){const{value:t,done:r}=ks.runWithConfig(ma(n),e.next.bind(e),!0);if(r)break;yield t}}async function*yg(n,e){const t=e[Symbol.asyncIterator]();for(;;){const{value:r,done:s}=await ks.runWithConfig(ma(n),t.next.bind(e),!0);if(s)break;yield r}}function Et(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}class Tt extends oi{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new ii({bound:this,kwargs:e,config:{}})}map(){return new Qc({bound:this})}withRetry(e){return new WD({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new ii({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new GD({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Fe);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([s])=>s!=="runId"));return Array.from({length:t},(s,a)=>Fe(a===0?e:r))}return Array.from({length:t},()=>Fe(e))}async batch(e,t,r){var d;const s=this._getOptionsList(t??{},e.length),a=((d=s[0])==null?void 0:d.maxConcurrency)??(r==null?void 0:r.maxConcurrency),u=new Gy({maxConcurrency:a,onFailedAttempt:f=>{throw f}}),l=e.map((f,h)=>u.call(async()=>{try{return await this.invoke(f,s[h])}catch(m){if(r!=null&&r.returnExceptions)return m;throw m}}));return Promise.all(l)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=Fe(t),s=new Pa({generator:this._streamIterator(e,r),config:r});return await s.setup,xn.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e){let t;e===void 0?t=Fe(e):t=Fe({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const s=Fe(r),a=await tr(s),u=await(a==null?void 0:a.handleChainStart(this.toJSON(),Et(t,"input"),s.runId,s==null?void 0:s.runType,void 0,void 0,(s==null?void 0:s.runName)??this.getName()));delete s.runId;let l;try{const d=e.call(this,t,s,u);l=await Os(d,r==null?void 0:r.signal)}catch(d){throw await(u==null?void 0:u.handleChainError(d)),d}return await(u==null?void 0:u.handleChainEnd(Et(l,"output"))),l}async _batchWithConfig(e,t,r,s){var f;const a=this._getOptionsList(r??{},t.length),u=await Promise.all(a.map(tr)),l=await Promise.all(u.map(async(h,m)=>{const y=await(h==null?void 0:h.handleChainStart(this.toJSON(),Et(t[m],"input"),a[m].runId,a[m].runType,void 0,void 0,a[m].runName??this.getName()));return delete a[m].runId,y}));let d;try{const h=e.call(this,t,a,l,s);d=await Os(h,(f=a==null?void 0:a[0])==null?void 0:f.signal)}catch(h){throw await Promise.all(l.map(m=>m==null?void 0:m.handleChainError(h))),h}return await Promise.all(l.map(h=>h==null?void 0:h.handleChainEnd(Et(d,"output")))),d}async*_transformStreamWithConfig(e,t,r){let s,a=!0,u,l=!0;const d=Fe(r),f=await tr(d);async function*h(){for await(const y of e){if(a)if(s===void 0)s=y;else try{s=nr(s,y)}catch{s=void 0,a=!1}yield y}}let m;try{const y=await HM(t.bind(this),h(),async()=>f==null?void 0:f.handleChainStart(this.toJSON(),{input:""},d.runId,d.runType,void 0,void 0,d.runName??this.getName()),r==null?void 0:r.signal,d);delete d.runId,m=y.setup;const v=m==null?void 0:m.handlers.find(ZM);let w=y.output;v!==void 0&&m!==void 0&&(w=v.tapOutputIterable(m.runId,w));const b=m==null?void 0:m.handlers.find(qM);b!==void 0&&m!==void 0&&(w=b.tapOutputIterable(m.runId,w));for await(const S of w)if(yield S,l)if(u===void 0)u=S;else try{u=nr(u,S)}catch{u=void 0,l=!1}}catch(y){throw await(m==null?void 0:m.handleChainError(y,void 0,void 0,void 0,{inputs:Et(s,"input")})),y}await(m==null?void 0:m.handleChainEnd(u??{},void 0,void 0,void 0,{inputs:Et(s,"input")}))}getGraph(e){const t=new jd,r=t.addNode({name:`${this.getName()}Input`,schema:ws.any()}),s=t.addNode(this),a=t.addNode({name:`${this.getName()}Output`,schema:ws.any()});return t.addEdge(r,s),t.addEdge(s,a),t}pipe(e){return new Fr({first:this,last:ti(e)})}pick(e){return this.pipe(new KD(e))}assign(e){return this.pipe(new A1(new Ca({steps:e})))}async*transform(e,t){let r;for await(const s of e)r===void 0?r=s:r=nr(r,s);yield*this._streamIterator(r,Fe(t))}async*streamLog(e,t,r){const s=new wS({...r,autoClose:!1,_schemaFormat:"original"}),a=Fe(t);yield*this._streamLog(e,s,a)}async*_streamLog(e,t,r){const{callbacks:s}=r;if(s===void 0)r.callbacks=[t];else if(Array.isArray(s))r.callbacks=s.concat([t]);else{const d=s.copy();d.addHandler(t,!0),r.callbacks=d}const a=this.stream(e,r);async function u(){try{const d=await a;for await(const f of d){const h=new gs({ops:[{op:"add",path:"/streamed_output/-",value:f}]});await t.writer.write(h)}}finally{await t.writer.close()}}const l=u();try{for await(const d of t)yield d}finally{await l}}streamEvents(e,t,r){let s;if(t.version==="v1")s=this._streamEventsV1(e,t,r);else if(t.version==="v2")s=this._streamEventsV2(e,t,r);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return t.encoding==="text/event-stream"?HD(s):xn.fromAsyncGenerator(s)}async*_streamEventsV2(e,t,r){var w;const s=new GM({...r,autoClose:!1}),a=Fe(t),u=a.runId??Gt();a.runId=u;const l=a.callbacks;if(l===void 0)a.callbacks=[s];else if(Array.isArray(l))a.callbacks=l.concat(s);else{const b=l.copy();b.addHandler(s,!0),a.callbacks=b}const d=new AbortController,f=this;async function h(){try{let b;t!=null&&t.signal?"any"in AbortSignal?b=AbortSignal.any([d.signal,t.signal]):(b=t.signal,t.signal.addEventListener("abort",()=>{d.abort()},{once:!0})):b=d.signal;const S=await f.stream(e,{...a,signal:b}),E=s.tapOutputIterable(u,S);for await(const A of E)if(d.signal.aborted)break}finally{await s.finish()}}const m=h();let y=!1,v;try{for await(const b of s){if(!y){b.data.input=e,y=!0,v=b.run_id,yield b;continue}b.run_id===v&&b.event.endsWith("_end")&&(w=b.data)!=null&&w.input&&delete b.data.input,yield b}}finally{d.abort(),await m}}async*_streamEventsV1(e,t,r){let s,a=!1;const u=Fe(t),l=u.tags??[],d=u.metadata??{},f=u.runName??this.getName(),h=new wS({...r,autoClose:!1,_schemaFormat:"streaming_events"}),m=new XM({...r}),y=this._streamLog(e,h,u);for await(const w of y){if(s?s=s.concat(w):s=vu.fromRunLogPatch(w),s.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!a){a=!0;const A={...s.state},T={run_id:A.id,event:`on_${A.type}_start`,name:f,tags:l,metadata:d,data:{input:e}};m.includeEvent(T,A.type)&&(yield T)}const b=w.ops.filter(A=>A.path.startsWith("/logs/")).map(A=>A.path.split("/")[2]),S=[...new Set(b)];for(const A of S){let T,R={};const I=s.state.logs[A];if(I.end_time===void 0?I.streamed_output.length>0?T="stream":T="start":T="end",T==="start")I.inputs!==void 0&&(R.input=I.inputs);else if(T==="end")I.inputs!==void 0&&(R.input=I.inputs),R.output=I.final_output;else if(T==="stream"){const M=I.streamed_output.length;if(M!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${M} instead. Encountered in: "${I.name}"`);R={chunk:I.streamed_output[0]},I.streamed_output=[]}yield{event:`on_${I.type}_${T}`,name:I.name,run_id:I.id,tags:I.tags,metadata:I.metadata,data:R}}const{state:E}=s;if(E.streamed_output.length>0){const A=E.streamed_output.length;if(A!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${A} instead. Encountered in: "${E.name}"`);const T={chunk:E.streamed_output[0]};E.streamed_output=[];const R={event:`on_${E.type}_stream`,run_id:E.id,tags:l,metadata:d,name:f,data:T};m.includeEvent(R,E.type)&&(yield R)}}const v=s==null?void 0:s.state;if(v!==void 0){const w={event:`on_${v.type}_end`,name:f,run_id:v.id,tags:l,metadata:d,data:{output:v.final_output}};m.includeEvent(w,v.type)&&(yield w)}}static isRunnable(e){return Ky(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new ii({bound:this,config:{},configFactories:[s=>({callbacks:[new w1({config:s,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return JD(this,e)}}class ii extends Tt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=yS(this.config,...e);return yS(t,...this.configFactories?await Promise.all(this.configFactories.map(async r=>await r(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Fe(t),this.kwargs))}async batch(e,t,r){const s=Array.isArray(t)?await Promise.all(t.map(async a=>this._mergeConfig(Fe(a),this.kwargs))):await this._mergeConfig(Fe(t),this.kwargs);return this.bound.batch(e,s,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Fe(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Fe(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Fe(t),this.kwargs))}streamEvents(e,t,r){const s=this,a=async function*(){yield*s.bound.streamEvents(e,{...await s._mergeConfig(Fe(t),s.kwargs),version:t.version},r)};return xn.fromAsyncGenerator(a())}static isRunnableBinding(e){return e.bound&&Tt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new ii({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[s=>({callbacks:[new w1({config:s,onStart:e,onEnd:t,onError:r})]})]})}}class Qc extends Tt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new Qc({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,Bt(t,{callbacks:r==null?void 0:r.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new Qc({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class WD extends ii{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const s=e>1?`retry:attempt:${e}`:void 0;return Bt(t,{callbacks:r==null?void 0:r.getChild(s)})}async _invoke(e,t,r){return Wc(s=>super.invoke(e,this._patchConfigForRetry(s,t,r)),{onFailedAttempt:s=>this.onFailedAttempt(s,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,s){const a={};try{await Wc(async u=>{const l=e.map((y,v)=>v).filter(y=>a[y.toString()]===void 0||a[y.toString()]instanceof Error),d=l.map(y=>e[y]),f=l.map(y=>this._patchConfigForRetry(u,t==null?void 0:t[y],r==null?void 0:r[y])),h=await super.batch(d,f,{...s,returnExceptions:!0});let m;for(let y=0;y<h.length;y+=1){const v=h[y],w=l[y];v instanceof Error&&m===void 0&&(m=v,m.input=d[y]),a[w.toString()]=v}if(m)throw m;return h},{onFailedAttempt:u=>this.onFailedAttempt(u,u.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(u){if((s==null?void 0:s.returnExceptions)!==!0)throw u}return Object.keys(a).sort((u,l)=>parseInt(u,10)-parseInt(l,10)).map(u=>a[parseInt(u,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class Fr extends Tt{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){var d;const r=Fe(t),s=await tr(r),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),Et(e,"input"),r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;let u=e,l;try{const f=[this.first,...this.middle];for(let h=0;h<f.length;h+=1){const y=f[h].invoke(u,Bt(r,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${h+1}`)}));u=await Os(y,t==null?void 0:t.signal)}if((d=t==null?void 0:t.signal)!=null&&d.aborted)throw new Error("Aborted");l=await this.last.invoke(u,Bt(r,{callbacks:a==null?void 0:a.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(f){throw await(a==null?void 0:a.handleChainError(f)),f}return await(a==null?void 0:a.handleChainEnd(Et(l,"output"))),l}async batch(e,t,r){var d;const s=this._getOptionsList(t??{},e.length),a=await Promise.all(s.map(tr)),u=await Promise.all(a.map(async(f,h)=>{const m=await(f==null?void 0:f.handleChainStart(this.toJSON(),Et(e[h],"input"),s[h].runId,void 0,void 0,void 0,s[h].runName));return delete s[h].runId,m}));let l=e;try{for(let f=0;f<this.steps.length;f+=1){const m=this.steps[f].batch(l,u.map((y,v)=>{const w=y==null?void 0:y.getChild(this.omitSequenceTags?void 0:`seq:step:${f+1}`);return Bt(s[v],{callbacks:w})}),r);l=await Os(m,(d=s[0])==null?void 0:d.signal)}}catch(f){throw await Promise.all(u.map(h=>h==null?void 0:h.handleChainError(f))),f}return await Promise.all(u.map(f=>f==null?void 0:f.handleChainEnd(Et(l,"output")))),l}async*_streamIterator(e,t){var m;const r=await tr(t),{runId:s,...a}=t??{},u=await(r==null?void 0:r.handleChainStart(this.toJSON(),Et(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),l=[this.first,...this.middle,this.last];let d=!0,f;async function*h(){yield e}try{let y=l[0].transform(h(),Bt(a,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let v=1;v<l.length;v+=1)y=await l[v].transform(y,Bt(a,{callbacks:u==null?void 0:u.getChild(this.omitSequenceTags?void 0:`seq:step:${v+1}`)}));for await(const v of y)if((m=t==null?void 0:t.signal)==null||m.throwIfAborted(),yield v,d)if(f===void 0)f=v;else try{f=nr(f,v)}catch{f=void 0,d=!1}}catch(y){throw await(u==null?void 0:u.handleChainError(y)),y}await(u==null?void 0:u.handleChainEnd(Et(f,"output")))}getGraph(e){const t=new jd;let r=null;return this.steps.forEach((s,a)=>{const u=s.getGraph(e);a!==0&&u.trimFirstNode(),a!==this.steps.length-1&&u.trimLastNode(),t.extend(u);const l=u.firstNode();if(!l)throw new Error(`Runnable ${s} has no first node`);r&&t.addEdge(r,l),r=u.lastNode()}),t}pipe(e){return Fr.isRunnableSequence(e)?new Fr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Fr({first:this.first,middle:[...this.middle,this.last],last:ti(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Tt.isRunnable(e)}static from([e,...t],r){let s={};return typeof r=="string"?s.name=r:r!==void 0&&(s=r),new Fr({...s,first:ti(e),middle:t.slice(0,-1).map(ti),last:ti(t[t.length-1])})}}class Ca extends Tt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=ti(r)}static from(e){return new Ca({steps:e})}async invoke(e,t){const r=Fe(t),s=await tr(r),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r==null?void 0:r.runName));delete r.runId;const u={};try{const l=Object.entries(this.steps).map(async([d,f])=>{u[d]=await f.invoke(e,Bt(r,{callbacks:a==null?void 0:a.getChild(`map:key:${d}`)}))});await Os(Promise.all(l),t==null?void 0:t.signal)}catch(l){throw await(a==null?void 0:a.handleChainError(l)),l}return await(a==null?void 0:a.handleChainEnd(u)),u}async*_transform(e,t,r){const s={...this.steps},a=_1(e,Object.keys(s).length),u=new Map(Object.entries(s).map(([l,d],f)=>{const h=d.transform(a[f],Bt(r,{callbacks:t==null?void 0:t.getChild(`map:key:${l}`)}));return[l,h.next().then(m=>({key:l,gen:h,result:m}))]}));for(;u.size;){const l=Promise.race(u.values()),{key:d,result:f,gen:h}=await Os(l,r==null?void 0:r.signal);u.delete(d),f.done||(yield{[d]:f.value},u.set(d,h.next().then(m=>({key:d,gen:h,result:m}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const s=Fe(t),a=new Pa({generator:this.transform(r(),s),config:s});return await a.setup,xn.fromAsyncGenerator(a)}}class Jy extends Tt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!Wy(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),s=await tr(r),a=this.func(Bt(r,{callbacks:s}),e);return Os(a,r==null?void 0:r.signal)}async*_streamIterator(e,t){var a,u;const[r]=this._getOptionsList(t??{},1),s=await this.invoke(e,t);if(gg(s)){for await(const l of s)(a=r==null?void 0:r.signal)==null||a.throwIfAborted(),yield l;return}if(qD(s)){for(;;){(u=r==null?void 0:r.signal)==null||u.throwIfAborted();const l=s.next();if(l.done)break;yield l.value}return}yield s}static from(e){return new Jy({func:e})}}function ZD(n){if(Wy(n))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class ka extends Tt{static lc_name(){return"RunnableLambda"}constructor(e){if(Wy(e.func))return Jy.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ZD(e.func),this.func=e.func}static from(e){return new ka({func:e})}async _invoke(e,t,r){return new Promise((s,a)=>{const u=Bt(t,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((t==null?void 0:t.recursionLimit)??dm)-1});ks.runWithConfig(ma(u),async()=>{var l,d;try{let f=await this.func(e,{...u});if(f&&Tt.isRunnable(f)){if((t==null?void 0:t.recursionLimit)===0)throw new Error("Recursion limit reached.");f=await f.invoke(e,{...u,recursionLimit:(u.recursionLimit??dm)-1})}else if(gg(f)){let h;for await(const m of yg(u,f))if((l=t==null?void 0:t.signal)==null||l.throwIfAborted(),h===void 0)h=m;else try{h=nr(h,m)}catch{h=m}f=h}else if(AS(f)){let h;for(const m of PS(u,f))if((d=t==null?void 0:t.signal)==null||d.throwIfAborted(),h===void 0)h=m;else try{h=nr(h,m)}catch{h=m}f=h}s(f)}catch(f){a(f)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){var l,d;let s;for await(const f of e)if(s===void 0)s=f;else try{s=nr(s,f)}catch{s=f}const a=Bt(r,{callbacks:t==null?void 0:t.getChild(),recursionLimit:((r==null?void 0:r.recursionLimit)??dm)-1}),u=await new Promise((f,h)=>{ks.runWithConfig(ma(a),async()=>{try{const m=await this.func(s,{...a,config:a});f(m)}catch(m){h(m)}})});if(u&&Tt.isRunnable(u)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");const f=await u.stream(s,a);for await(const h of f)yield h}else if(gg(u))for await(const f of yg(a,u))(l=r==null?void 0:r.signal)==null||l.throwIfAborted(),yield f;else if(AS(u))for(const f of PS(a,u))(d=r==null?void 0:r.signal)==null||d.throwIfAborted(),yield f;else yield u}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const s=Fe(t),a=new Pa({generator:this.transform(r(),s),config:s});return await a.setup,xn.fromAsyncGenerator(a)}}class GD extends Tt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=Fe(t),s=await tr(r),{runId:a,...u}=r,l=await(s==null?void 0:s.handleChainStart(this.toJSON(),Et(e,"input"),a,void 0,void 0,void 0,u==null?void 0:u.runName)),d=Bt(u,{callbacks:l==null?void 0:l.getChild()});return await ks.runWithConfig(d,async()=>{var m;let h;for(const y of this.runnables()){(m=r==null?void 0:r.signal)==null||m.throwIfAborted();try{const v=await y.invoke(e,d);return await(l==null?void 0:l.handleChainEnd(Et(v,"output"))),v}catch(v){h===void 0&&(h=v)}}throw h===void 0?new Error("No error stored at end of fallback."):(await(l==null?void 0:l.handleChainError(h)),h)})}async*_streamIterator(e,t){var m;const r=Fe(t),s=await tr(r),{runId:a,...u}=r,l=await(s==null?void 0:s.handleChainStart(this.toJSON(),Et(e,"input"),a,void 0,void 0,void 0,u==null?void 0:u.runName));let d,f;for(const y of this.runnables()){(m=r==null?void 0:r.signal)==null||m.throwIfAborted();const v=Bt(u,{callbacks:l==null?void 0:l.getChild()});try{const w=await y.stream(e,v);f=yg(v,w);break}catch(w){d===void 0&&(d=w)}}if(f===void 0){const y=d??new Error("No error stored at end of fallback.");throw await(l==null?void 0:l.handleChainError(y)),y}let h;try{for await(const y of f){yield y;try{h=h===void 0?h:nr(h,y)}catch{h=void 0}}}catch(y){throw await(l==null?void 0:l.handleChainError(y)),y}await(l==null?void 0:l.handleChainEnd(Et(h,"output")))}async batch(e,t,r){var d;if(r!=null&&r.returnExceptions)throw new Error("Not implemented.");const s=this._getOptionsList(t??{},e.length),a=await Promise.all(s.map(f=>tr(f))),u=await Promise.all(a.map(async(f,h)=>{const m=await(f==null?void 0:f.handleChainStart(this.toJSON(),Et(e[h],"input"),s[h].runId,void 0,void 0,void 0,s[h].runName));return delete s[h].runId,m}));let l;for(const f of this.runnables()){(d=s[0].signal)==null||d.throwIfAborted();try{const h=await f.batch(e,u.map((m,y)=>Bt(s[y],{callbacks:m==null?void 0:m.getChild()})),r);return await Promise.all(u.map((m,y)=>m==null?void 0:m.handleChainEnd(Et(h[y],"output")))),h}catch(h){l===void 0&&(l=h)}}throw l?(await Promise.all(u.map(f=>f==null?void 0:f.handleChainError(l))),l):new Error("No error stored at end of fallbacks.")}}function ti(n){if(typeof n=="function")return new ka({func:n});if(Tt.isRunnable(n))return n;if(!Array.isArray(n)&&typeof n=="object"){const e={};for(const[t,r]of Object.entries(n))e[t]=ti(r);return new Ca({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class A1 extends Tt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Ca&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const s=this.mapper.getStepsKeys(),[a,u]=_1(e),l=this.mapper.transform(u,Bt(r,{callbacks:t==null?void 0:t.getChild()})),d=l.next();for await(const f of a){if(typeof f!="object"||Array.isArray(f))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof f}`);const h=Object.fromEntries(Object.entries(f).filter(([m])=>!s.includes(m)));Object.keys(h).length>0&&(yield h)}yield(await d).value;for await(const f of l)yield f}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const s=Fe(t),a=new Pa({generator:this.transform(r(),s),config:s});return await a.setup,xn.fromAsyncGenerator(a)}}class KD extends Tt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(r=>[r,e[r]]).filter(r=>r[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const r=await this._pick(t);r!==void 0&&(yield r)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*r(){yield e}const s=Fe(t),a=new Pa({generator:this.transform(r(),s),config:s});return await a.setup,xn.fromAsyncGenerator(a)}}class CS extends ii{constructor(e){const t=Fr.from([ka.from(async r=>{let s;if(ZA(r))try{s=await this.schema.parseAsync(r.args)}catch{throw new OL("Received tool input did not match expected schema",JSON.stringify(r.args))}else s=r;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:t,config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function JD(n,e){var s;const t=e.name??n.getName(),r=e.description??((s=e.schema)==null?void 0:s.description);return e.schema.constructor===ws.ZodString?new CS({name:t,description:r,schema:ws.object({input:ws.string()}).transform(a=>a.input),bound:n}):new CS({name:t,description:r,schema:e.schema,bound:n})}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var XD=typeof window=="object"?window:{},Oe="0123456789abcdef".split(""),YD=[-2147483648,8388608,32768,128],zn=[24,16,8,0],xt=[];function sr(n){n?(xt[0]=xt[16]=xt[1]=xt[2]=xt[3]=xt[4]=xt[5]=xt[6]=xt[7]=xt[8]=xt[9]=xt[10]=xt[11]=xt[12]=xt[13]=xt[14]=xt[15]=0,this.blocks=xt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}sr.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===XD.ArrayBuffer&&(n=new Uint8Array(n));for(var t,r=0,s,a=n.length||0,u=this.blocks;r<a;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),e)for(s=this.start;r<a&&s<64;++r)u[s>>2]|=n[r]<<zn[s++&3];else for(s=this.start;r<a&&s<64;++r)t=n.charCodeAt(r),t<128?u[s>>2]|=t<<zn[s++&3]:t<2048?(u[s>>2]|=(192|t>>6)<<zn[s++&3],u[s>>2]|=(128|t&63)<<zn[s++&3]):t<55296||t>=57344?(u[s>>2]|=(224|t>>12)<<zn[s++&3],u[s>>2]|=(128|t>>6&63)<<zn[s++&3],u[s>>2]|=(128|t&63)<<zn[s++&3]):(t=65536+((t&1023)<<10|n.charCodeAt(++r)&1023),u[s>>2]|=(240|t>>18)<<zn[s++&3],u[s>>2]|=(128|t>>12&63)<<zn[s++&3],u[s>>2]|=(128|t>>6&63)<<zn[s++&3],u[s>>2]|=(128|t&63)<<zn[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=u[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};sr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=YD[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};sr.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,r=this.h3,s=this.h4,a,u,l,d=this.blocks;for(u=16;u<80;++u)l=d[u-3]^d[u-8]^d[u-14]^d[u-16],d[u]=l<<1|l>>>31;for(u=0;u<20;u+=5)a=e&t|~e&r,l=n<<5|n>>>27,s=l+a+s+1518500249+d[u]<<0,e=e<<30|e>>>2,a=n&e|~n&t,l=s<<5|s>>>27,r=l+a+r+1518500249+d[u+1]<<0,n=n<<30|n>>>2,a=s&n|~s&e,l=r<<5|r>>>27,t=l+a+t+1518500249+d[u+2]<<0,s=s<<30|s>>>2,a=r&s|~r&n,l=t<<5|t>>>27,e=l+a+e+1518500249+d[u+3]<<0,r=r<<30|r>>>2,a=t&r|~t&s,l=e<<5|e>>>27,n=l+a+n+1518500249+d[u+4]<<0,t=t<<30|t>>>2;for(;u<40;u+=5)a=e^t^r,l=n<<5|n>>>27,s=l+a+s+1859775393+d[u]<<0,e=e<<30|e>>>2,a=n^e^t,l=s<<5|s>>>27,r=l+a+r+1859775393+d[u+1]<<0,n=n<<30|n>>>2,a=s^n^e,l=r<<5|r>>>27,t=l+a+t+1859775393+d[u+2]<<0,s=s<<30|s>>>2,a=r^s^n,l=t<<5|t>>>27,e=l+a+e+1859775393+d[u+3]<<0,r=r<<30|r>>>2,a=t^r^s,l=e<<5|e>>>27,n=l+a+n+1859775393+d[u+4]<<0,t=t<<30|t>>>2;for(;u<60;u+=5)a=e&t|e&r|t&r,l=n<<5|n>>>27,s=l+a+s-1894007588+d[u]<<0,e=e<<30|e>>>2,a=n&e|n&t|e&t,l=s<<5|s>>>27,r=l+a+r-1894007588+d[u+1]<<0,n=n<<30|n>>>2,a=s&n|s&e|n&e,l=r<<5|r>>>27,t=l+a+t-1894007588+d[u+2]<<0,s=s<<30|s>>>2,a=r&s|r&n|s&n,l=t<<5|t>>>27,e=l+a+e-1894007588+d[u+3]<<0,r=r<<30|r>>>2,a=t&r|t&s|r&s,l=e<<5|e>>>27,n=l+a+n-1894007588+d[u+4]<<0,t=t<<30|t>>>2;for(;u<80;u+=5)a=e^t^r,l=n<<5|n>>>27,s=l+a+s-899497514+d[u]<<0,e=e<<30|e>>>2,a=n^e^t,l=s<<5|s>>>27,r=l+a+r-899497514+d[u+1]<<0,n=n<<30|n>>>2,a=s^n^e,l=r<<5|r>>>27,t=l+a+t-899497514+d[u+2]<<0,s=s<<30|s>>>2,a=r^s^n,l=t<<5|t>>>27,e=l+a+e-899497514+d[u+3]<<0,r=r<<30|r>>>2,a=t^r^s,l=e<<5|e>>>27,n=l+a+n-899497514+d[u+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0,this.h4=this.h4+s<<0};sr.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,s=this.h4;return Oe[n>>28&15]+Oe[n>>24&15]+Oe[n>>20&15]+Oe[n>>16&15]+Oe[n>>12&15]+Oe[n>>8&15]+Oe[n>>4&15]+Oe[n&15]+Oe[e>>28&15]+Oe[e>>24&15]+Oe[e>>20&15]+Oe[e>>16&15]+Oe[e>>12&15]+Oe[e>>8&15]+Oe[e>>4&15]+Oe[e&15]+Oe[t>>28&15]+Oe[t>>24&15]+Oe[t>>20&15]+Oe[t>>16&15]+Oe[t>>12&15]+Oe[t>>8&15]+Oe[t>>4&15]+Oe[t&15]+Oe[r>>28&15]+Oe[r>>24&15]+Oe[r>>20&15]+Oe[r>>16&15]+Oe[r>>12&15]+Oe[r>>8&15]+Oe[r>>4&15]+Oe[r&15]+Oe[s>>28&15]+Oe[s>>24&15]+Oe[s>>20&15]+Oe[s>>16&15]+Oe[s>>12&15]+Oe[s>>8&15]+Oe[s>>4&15]+Oe[s&15]};sr.prototype.toString=sr.prototype.hex;sr.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,s=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,s>>24&255,s>>16&255,s>>8&255,s&255]};sr.prototype.array=sr.prototype.digest;sr.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};const QD=n=>new sr(!0).update(n).hex(),kS=(...n)=>QD(n.join("_"));class eF{}const tF=new Map;class Xy extends eF{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(kS(e,t))??null)}async update(e,t,r){this.cache.set(kS(e,t),r)}static global(){return new Xy(tF)}}class P1 extends oi{}class nF extends P1{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Ru(this.value)]}}class rF extends P1{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return GA(this.messages)}toChatMessages(){return this.messages}}var bo={},OS;function sF(){if(OS)return bo;OS=1,bo.byteLength=l,bo.toByteArray=f,bo.fromByteArray=y;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=r.length;s<a;++s)n[s]=r[s],e[r.charCodeAt(s)]=s;e[45]=62,e[95]=63;function u(v){var w=v.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=v.indexOf("=");b===-1&&(b=w);var S=b===w?0:4-b%4;return[b,S]}function l(v){var w=u(v),b=w[0],S=w[1];return(b+S)*3/4-S}function d(v,w,b){return(w+b)*3/4-b}function f(v){var w,b=u(v),S=b[0],E=b[1],A=new t(d(v,S,E)),T=0,R=E>0?S-4:S,I;for(I=0;I<R;I+=4)w=e[v.charCodeAt(I)]<<18|e[v.charCodeAt(I+1)]<<12|e[v.charCodeAt(I+2)]<<6|e[v.charCodeAt(I+3)],A[T++]=w>>16&255,A[T++]=w>>8&255,A[T++]=w&255;return E===2&&(w=e[v.charCodeAt(I)]<<2|e[v.charCodeAt(I+1)]>>4,A[T++]=w&255),E===1&&(w=e[v.charCodeAt(I)]<<10|e[v.charCodeAt(I+1)]<<4|e[v.charCodeAt(I+2)]>>2,A[T++]=w>>8&255,A[T++]=w&255),A}function h(v){return n[v>>18&63]+n[v>>12&63]+n[v>>6&63]+n[v&63]}function m(v,w,b){for(var S,E=[],A=w;A<b;A+=3)S=(v[A]<<16&16711680)+(v[A+1]<<8&65280)+(v[A+2]&255),E.push(h(S));return E.join("")}function y(v){for(var w,b=v.length,S=b%3,E=[],A=16383,T=0,R=b-S;T<R;T+=A)E.push(m(v,T,T+A>R?R:T+A));return S===1?(w=v[b-1],E.push(n[w>>2]+n[w<<4&63]+"==")):S===2&&(w=(v[b-2]<<8)+v[b-1],E.push(n[w>>10]+n[w>>4&63]+n[w<<2&63]+"=")),E.join("")}return bo}var iF=sF();const aF=Er(iF);var oF=Object.defineProperty,uF=(n,e,t)=>e in n?oF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,lF=(n,e,t)=>(uF(n,e+"",t),t);function cF(n,e){let t=Array.from({length:n.length},(r,s)=>({start:s,end:s+1}));for(;t.length>1;){let r=null;for(let s=0;s<t.length-1;s++){const a=n.slice(t[s].start,t[s+1].end),u=e.get(a.join(","));u!=null&&(r==null||u<r[0])&&(r=[u,s])}if(r!=null){const s=r[1];t[s]={start:t[s].start,end:t[s+1].end},t.splice(s+1,1)}else break}return t}function dF(n,e){return n.length===1?[e.get(n.join(","))]:cF(n,e).map(t=>e.get(n.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function fF(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var vg=class{constructor(n,e){ls(this,"specialTokens");ls(this,"inverseSpecialTokens");ls(this,"patStr");ls(this,"textEncoder",new TextEncoder);ls(this,"textDecoder",new TextDecoder("utf-8"));ls(this,"rankMap",new Map);ls(this,"textMap",new Map);this.patStr=n.pat_str;const t=n.bpe_ranks.split(`
`).filter(Boolean).reduce((r,s)=>{const[a,u,...l]=s.split(" "),d=Number.parseInt(u,10);return l.forEach((f,h)=>r[f]=d+h),r},{});for(const[r,s]of Object.entries(t)){const a=aF.toByteArray(r);this.rankMap.set(a.join(","),s),this.textMap.set(s,a)}this.specialTokens={...n.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[s,a])=>(r[a]=this.textEncoder.encode(s),r),{})}encode(n,e=[],t="all"){const r=new RegExp(this.patStr,"ug"),s=vg.specialTokenRegex(Object.keys(this.specialTokens)),a=[],u=new Set(e==="all"?Object.keys(this.specialTokens):e),l=new Set(t==="all"?Object.keys(this.specialTokens).filter(f=>!u.has(f)):t);if(l.size>0){const f=vg.specialTokenRegex([...l]),h=n.match(f);if(h!=null)throw new Error(`The text contains a special token that is not allowed: ${h[0]}`)}let d=0;for(;;){let f=null,h=d;for(;s.lastIndex=h,f=s.exec(n),!(f==null||u.has(f[0]));)h=f.index+1;const m=(f==null?void 0:f.index)??n.length;for(const v of n.substring(d,m).matchAll(r)){const w=this.textEncoder.encode(v[0]),b=this.rankMap.get(w.join(","));if(b!=null){a.push(b);continue}a.push(...dF(w,this.rankMap))}if(f==null)break;let y=this.specialTokens[f[0]];a.push(y),d=f.index+f[0].length}return a}decode(n){const e=[];let t=0;for(let a=0;a<n.length;++a){const u=n[a],l=this.textMap.get(u)??this.inverseSpecialTokens[u];l!=null&&(e.push(l),t+=l.length)}const r=new Uint8Array(t);let s=0;for(const a of e)r.set(a,s),s+=a.length;return this.textDecoder.decode(r)}},C1=vg;lF(C1,"specialTokenRegex",n=>new RegExp(n.map(e=>fF(e)).join("|"),"g"));function hF(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}const hc={},pF=new Gy({});async function mF(n){return n in hc||(hc[n]=pF.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new C1(e)).catch(e=>{throw delete hc[n],e})),await hc[n]}async function gF(n){return mF(hF(n))}const yF=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n;function k1(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}const vF=()=>!1;class _F extends Tt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??vF(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class wF extends _F{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){const{cache:s,...a}=r;super({callbacks:e??t,...a}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof s=="object"?this.cache=s:s?this.cache=Xy.global():this.cache=void 0,this.caller=new Gy(r??{})}async getNumTokens(e){if(typeof e!="string")return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await gF("modelName"in this?yF(this.modelName):"gpt2")}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(r){console.warn("Failed to calculate number of tokens, falling back to approximate count",r)}return t}static _convertInputToPromptValue(e){return typeof e=="string"?new nF(e):Array.isArray(e)?new rF(e.map(Ro)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([u,l])=>l!==void 0).map(([u,l])=>`${u}:${JSON.stringify(l)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class ed extends Tt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=Fe(t);return this.func&&await this.func(e,r),this._callWithConfig(s=>Promise.resolve(s),e,r)}async*transform(e,t){const r=Fe(t);let s,a=!0;for await(const u of this._transformStreamWithConfig(e,l=>l,r))if(yield u,a)if(s===void 0)s=u;else try{s=nr(s,u)}catch{s=void 0,a=!1}this.func&&s!==void 0&&await this.func(s,r)}static assign(e){return new A1(new Ca({steps:e}))}}function Yy(n){var r;if(!n||typeof n!="object"||Array.isArray(n))return!1;const e=n;return e._def||Object.values(ws.ZodFirstPartyTypeKind).includes(((r=e.constructor)==null?void 0:r.name)??"NOT_INCLUDED")?!0:typeof e.parse=="function"&&typeof e.parseAsync=="function"&&typeof e.safeParse=="function"&&typeof e.safeParseAsync=="function"}function mm(n){const e=[];for(const t of n){let r=t;if(Array.isArray(t.content))for(let s=0;s<t.content.length;s++){const a=t.content[s];(wL(a)||bL(a))&&r===t&&(r=new t.constructor({...r,content:[...t.content.slice(0,s),xL(a),...t.content.slice(s+1)]}))}e.push(r)}return e}class ys extends wF{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=ys._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t==null?void 0:t.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){var r;if(this._streamResponseChunks===ys.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const a=ys._convertInputToPromptValue(e).toChatMessages(),[u,l]=this._separateRunnableConfigFromCallOptionsCompat(t),d={...u.metadata,...this.getLsParams(l)},f=await cn.configure(u.callbacks,this.callbacks,u.tags,this.tags,d,this.metadata,{verbose:this.verbose}),h={options:l,invocation_params:this==null?void 0:this.invocationParams(l),batch_size:1},m=await(f==null?void 0:f.handleChatModelStart(this.toJSON(),[mm(a)],u.runId,void 0,h,void 0,void 0,u.runName));let y,v;try{for await(const w of this._streamResponseChunks(a,l,m==null?void 0:m[0])){if(w.message.id==null){const b=(r=m==null?void 0:m.at(0))==null?void 0:r.runId;b!=null&&w.message._updateId(`run-${b}`)}w.message.response_metadata={...w.generationInfo,...w.message.response_metadata},yield w.message,y?y=y.concat(w):y=w,J0(w.message)&&w.message.usage_metadata!==void 0&&(v={tokenUsage:{promptTokens:w.message.usage_metadata.input_tokens,completionTokens:w.message.usage_metadata.output_tokens,totalTokens:w.message.usage_metadata.total_tokens}})}}catch(w){throw await Promise.all((m??[]).map(b=>b==null?void 0:b.handleLLMError(w))),w}await Promise.all((m??[]).map(w=>w==null?void 0:w.handleLLMEnd({generations:[[y]],llmOutput:v})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,r,s){var m,y;const a=e.map(v=>v.map(Ro));let u;if(s!==void 0&&s.length===a.length)u=s;else{const v={...r.metadata,...this.getLsParams(t)},w=await cn.configure(r.callbacks,this.callbacks,r.tags,this.tags,v,this.metadata,{verbose:this.verbose}),b={options:t,invocation_params:this==null?void 0:this.invocationParams(t),batch_size:1};u=await(w==null?void 0:w.handleChatModelStart(this.toJSON(),a.map(mm),r.runId,void 0,b,void 0,void 0,r.runName))}const l=[],d=[];if(!!(u!=null&&u[0].handlers.find(SM))&&!this.disableStreaming&&a.length===1&&this._streamResponseChunks!==ys.prototype._streamResponseChunks)try{const v=await this._streamResponseChunks(a[0],t,u==null?void 0:u[0]);let w,b;for await(const S of v){if(S.message.id==null){const E=(m=u==null?void 0:u.at(0))==null?void 0:m.runId;E!=null&&S.message._updateId(`run-${E}`)}w===void 0?w=S:w=nr(w,S),J0(S.message)&&S.message.usage_metadata!==void 0&&(b={tokenUsage:{promptTokens:S.message.usage_metadata.input_tokens,completionTokens:S.message.usage_metadata.output_tokens,totalTokens:S.message.usage_metadata.total_tokens}})}if(w===void 0)throw new Error("Received empty response from chat model call.");l.push([w]),await(u==null?void 0:u[0].handleLLMEnd({generations:l,llmOutput:b}))}catch(v){throw await(u==null?void 0:u[0].handleLLMError(v)),v}else{const v=await Promise.allSettled(a.map((w,b)=>this._generate(w,{...t,promptIndex:b},u==null?void 0:u[b])));await Promise.all(v.map(async(w,b)=>{var S,E,A;if(w.status==="fulfilled"){const T=w.value;for(const R of T.generations){if(R.message.id==null){const I=(S=u==null?void 0:u.at(0))==null?void 0:S.runId;I!=null&&R.message._updateId(`run-${I}`)}R.message.response_metadata={...R.generationInfo,...R.message.response_metadata}}return T.generations.length===1&&(T.generations[0].message.response_metadata={...T.llmOutput,...T.generations[0].message.response_metadata}),l[b]=T.generations,d[b]=T.llmOutput,(E=u==null?void 0:u[b])==null?void 0:E.handleLLMEnd({generations:[T.generations],llmOutput:T.llmOutput})}else return await((A=u==null?void 0:u[b])==null?void 0:A.handleLLMError(w.reason)),Promise.reject(w.reason)}))}const h={generations:l,llmOutput:d.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...d):void 0};return Object.defineProperty(h,bS,{value:u?{runIds:u==null?void 0:u.map(v=>v.runId)}:void 0,configurable:!0}),h}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:s,handledOptions:a}){const u=e.map(S=>S.map(Ro)),l={...a.metadata,...this.getLsParams(s)},d=await cn.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),f={options:s,invocation_params:this==null?void 0:this.invocationParams(s),batch_size:1},h=await(d==null?void 0:d.handleChatModelStart(this.toJSON(),u.map(mm),a.runId,void 0,f,void 0,void 0,a.runName)),m=[],v=(await Promise.allSettled(u.map(async(S,E)=>{const A=ys._convertInputToPromptValue(S).toString(),T=await t.lookup(A,r);return T==null&&m.push(E),T}))).map((S,E)=>({result:S,runManager:h==null?void 0:h[E]})).filter(({result:S})=>S.status==="fulfilled"&&S.value!=null||S.status==="rejected"),w=[];await Promise.all(v.map(async({result:S,runManager:E},A)=>{if(S.status==="fulfilled"){const T=S.value;return w[A]=T.map(R=>("message"in R&&Sd(R.message)&&_s(R.message)&&(R.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),R.generationInfo={...R.generationInfo,tokenUsage:{}},R)),T.length&&await(E==null?void 0:E.handleLLMNewToken(T[0].text)),E==null?void 0:E.handleLLMEnd({generations:[T]},void 0,void 0,void 0,{cached:!0})}else return await(E==null?void 0:E.handleLLMError(S.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(S.reason)}));const b={generations:w,missingPromptIndices:m,startedRunManagers:h};return Object.defineProperty(b,bS,{value:h?{runIds:h==null?void 0:h.map(S=>S.runId)}:void 0,configurable:!0}),b}async generate(e,t,r){let s;Array.isArray(t)?s={stop:t}:s=t;const a=e.map(w=>w.map(Ro)),[u,l]=this._separateRunnableConfigFromCallOptionsCompat(s);if(u.callbacks=u.callbacks??r,!this.cache)return this._generateUncached(a,l,u);const{cache:d}=this,f=this._getSerializedCacheKeyParametersForCall(l),{generations:h,missingPromptIndices:m,startedRunManagers:y}=await this._generateCached({messages:a,cache:d,llmStringKey:f,parsedOptions:l,handledOptions:u});let v={};if(m.length>0){const w=await this._generateUncached(m.map(b=>a[b]),l,u,y!==void 0?m.map(b=>y==null?void 0:y[b]):void 0);await Promise.all(w.generations.map(async(b,S)=>{const E=m[S];h[E]=b;const A=ys._convertInputToPromptValue(a[E]).toString();return d.update(A,f,b)})),v=w.llmOutput??{}}return{generations:h,llmOutput:v}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const s=e.map(a=>a.toChatMessages());return this.generate(s,t,r)}async call(e,t,r){return(await this.generate([e.map(Ro)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const s=e.toChatMessages();return this.call(s,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const s=new Ru(e),a=await this.call([s],t,r);if(typeof a.content!="string")throw new Error("Cannot use predict when output is not a string.");return a.content}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t!=null&&t.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,s=t==null?void 0:t.name,a=r.description??"A function available to call.",u=t==null?void 0:t.method,l=t==null?void 0:t.includeRaw;if(u==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let d=s??"extract",f;Yy(r)?f=[{type:"function",function:{name:d,description:a,parameters:$u(r)}}]:("name"in r&&(d=r.name),f=[{type:"function",function:{name:d,description:a,parameters:r}}]);const h=this.bindTools(f),m=ka.from(b=>{if(!b.tool_calls||b.tool_calls.length===0)throw new Error("No tool calls found in the response.");const S=b.tool_calls.find(E=>E.name===d);if(!S)throw new Error(`No tool call found with name ${d}.`);return S.args});if(!l)return h.pipe(m).withConfig({runName:"StructuredOutput"});const y=ed.assign({parsed:(b,S)=>m.invoke(b.raw,S)}),v=ed.assign({parsed:()=>null}),w=y.withFallbacks({fallbacks:[v]});return Fr.from([{raw:h},w]).withConfig({runName:"StructuredOutputRunnable"})}}class bF extends Tt{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(r,s)=>this.parseResult([{text:r}],s==null?void 0:s.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(r,s)=>this.parseResult([{message:r,text:this._baseMessageToString(r)}],s==null?void 0:s.callbacks),e,{...t,runType:"parser"})}}class O1 extends bF{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class Qy extends Error{constructor(e,t,r,s=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=s,s&&(r===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");WA(this,"OUTPUT_PARSING_FAILURE")}}function _g(n,e){const t=typeof n;if(t!==typeof e)return!1;if(Array.isArray(n)){if(!Array.isArray(e))return!1;const r=n.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(!_g(n[s],e[s]))return!1;return!0}if(t==="object"){if(!n||!e)return n===e;const r=Object.keys(n),s=Object.keys(e);if(r.length!==s.length)return!1;for(const u of r)if(!_g(n[u],e[u]))return!1;return!0}return n===e}class xF extends O1{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class R1 extends xF{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=(e==null?void 0:e.diff)??this.diff}async*_transform(e){let t,r;for await(const s of e){if(typeof s!="string"&&typeof s.content!="string")throw new Error("Cannot handle non-string output.");let a;if(PL(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");a=new fi({message:s,text:s.content})}else if(Sd(s)){if(typeof s.content!="string")throw new Error("Cannot handle non-string message output.");a=new fi({message:NL(s),text:s.content})}else a=new ga({text:s});r===void 0?r=a:r=r.concat(a);const u=await this.parsePartialResult([r]);u!=null&&!_g(u,t)&&(this.diff?yield this._diff(t,u):yield u,t=u)}}getFormatInstructions(){return""}}class RS extends O1{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=ws.object(Object.fromEntries(Object.entries(e).map(([r,s])=>[r,ws.string().describe(s)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify($u(this.schema))}
\`\`\`
`}async parse(e){try{const r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(s,a)=>`"${a.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(r))}catch(t){throw new Qy(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class IS extends R1{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?mM(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return H0(e[0].text)}async parse(e){return H0(e,JSON.parse)}getFormatInstructions(){return""}}function ev(n,e){if(n.function===void 0)return;let t;if(e!=null&&e.partial)try{t=My(n.function.arguments??"{}")}catch{return}else try{t=JSON.parse(n.function.arguments)}catch(s){throw new Qy([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${s.message}`].join(`
`))}const r={name:n.function.name,args:t,type:"tool_call"};return e!=null&&e.returnId&&(r.id=n.id),r}function SF(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}function I1(n,e){var t,r;return{name:(t=n.function)==null?void 0:t.name,args:(r=n.function)==null?void 0:r.arguments,id:n.id,error:e,type:"invalid_tool_call"}}class EF extends R1{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=(e==null?void 0:e.returnId)??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){var u;const r=e[0].message;let s;if(_s(r)&&((u=r.tool_calls)!=null&&u.length)?s=r.tool_calls.map(l=>{const{id:d,...f}=l;return this.returnId?{id:d,...f}:f}):r.additional_kwargs.tool_calls!==void 0&&(s=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(d=>ev(d,{returnId:this.returnId,partial:t}))),!s)return[];const a=[];for(const l of s)if(l!==void 0){const d={type:l.name,args:l.args,id:l.id};a.push(d)}return a}}class NS extends EF{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new Qy(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const r=(await super.parsePartialResult(e)).filter(a=>a.type===this.keyName);let s=r;if(r.length)return this.returnId||(s=r.map(a=>a.args)),this.returnSingle?s[0]:s}async parseResult(e){const r=(await super.parsePartialResult(e,!1)).filter(u=>u.type===this.keyName);let s=r;return r.length?(this.returnId||(s=r.map(u=>u.args)),this.returnSingle?this._validateResult(s[0]):await Promise.all(s.map(u=>this._validateResult(u)))):void 0}}const TF=Symbol("Let zodToJsonSchema decide on which parser to use"),jS={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},AF=n=>typeof n=="string"?{...jS,basePath:["#"],definitions:{},name:n}:{...jS,basePath:["#"],definitions:{},...n},wg=n=>"_def"in n?n._def:n;function PF(n){if(!n)return!0;for(const e in n)return!1;return!0}const CF=n=>{const e=AF(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,s])=>[wg(s),{def:wg(s),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))}};function N1(n,e,t,r){r!=null&&r.errorMessages&&t&&(n.errorMessage={...n.errorMessage,[e]:t})}function ze(n,e,t,r,s){n[e]=t,N1(n,e,r,s)}function kF(){return{}}function OF(n,e){var r,s;const t={type:"array"};return((s=(r=n.type)==null?void 0:r._def)==null?void 0:s.typeName)!==F.ZodAny&&(t.items=De(n.type._def,{...e,currentPath:[...e.currentPath,"items"]})),n.minLength&&ze(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&ze(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(ze(t,"minItems",n.exactLength.value,n.exactLength.message,e),ze(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function RF(n,e){const t={type:"integer",format:"int64"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?ze(t,"minimum",r.value,r.message,e):ze(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),ze(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ze(t,"maximum",r.value,r.message,e):ze(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),ze(t,"maximum",r.value,r.message,e));break;case"multipleOf":ze(t,"multipleOf",r.value,r.message,e);break}return t}function IF(){return{type:"boolean"}}function NF(n,e){return De(n.type._def,e)}const jF=(n,e)=>De(n.innerType._def,e);function j1(n,e,t){const r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((s,a)=>j1(n,e,s))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return LF(n,e)}}const LF=(n,e)=>{const t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(const r of n.checks)switch(r.kind){case"min":ze(t,"minimum",r.value,r.message,e);break;case"max":ze(t,"maximum",r.value,r.message,e);break}return t};function $F(n,e){return{...De(n.innerType._def,e),default:n.defaultValue()}}function MF(n,e,t){return e.effectStrategy==="input"?De(n.schema._def,e,t):{}}function DF(n){return{type:"string",enum:[...n.values]}}const FF=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function UF(n,e){const t=[De(n.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),De(n.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const s=[];return t.forEach(a=>{if(FF(a))s.push(...a.allOf),a.unevaluatedProperties===void 0&&(r=void 0);else{let u=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:l,...d}=a;u=d}else r=void 0;s.push(u)}}),s.length?{allOf:s,...r}:void 0}function BF(n,e){const t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}let gm;const Ks={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(gm===void 0&&(gm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),gm),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function L1(n,e){const t={type:"string"};function r(s){return e.patternStrategy==="escape"?VF(s):s}if(n.checks)for(const s of n.checks)switch(s.kind){case"min":ze(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e);break;case"max":ze(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Hn(t,"email",s.message,e);break;case"format:idn-email":Hn(t,"idn-email",s.message,e);break;case"pattern:zod":qn(t,Ks.email,s.message,e);break}break;case"url":Hn(t,"uri",s.message,e);break;case"uuid":Hn(t,"uuid",s.message,e);break;case"regex":qn(t,s.regex,s.message,e);break;case"cuid":qn(t,Ks.cuid,s.message,e);break;case"cuid2":qn(t,Ks.cuid2,s.message,e);break;case"startsWith":qn(t,RegExp(`^${r(s.value)}`),s.message,e);break;case"endsWith":qn(t,RegExp(`${r(s.value)}$`),s.message,e);break;case"datetime":Hn(t,"date-time",s.message,e);break;case"date":Hn(t,"date",s.message,e);break;case"time":Hn(t,"time",s.message,e);break;case"duration":Hn(t,"duration",s.message,e);break;case"length":ze(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,s.value):s.value,s.message,e),ze(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,s.value):s.value,s.message,e);break;case"includes":{qn(t,RegExp(r(s.value)),s.message,e);break}case"ip":{s.version!=="v6"&&Hn(t,"ipv4",s.message,e),s.version!=="v4"&&Hn(t,"ipv6",s.message,e);break}case"emoji":qn(t,Ks.emoji,s.message,e);break;case"ulid":{qn(t,Ks.ulid,s.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Hn(t,"binary",s.message,e);break}case"contentEncoding:base64":{ze(t,"contentEncoding","base64",s.message,e);break}case"pattern:zod":{qn(t,Ks.base64,s.message,e);break}}break}case"nanoid":qn(t,Ks.nanoid,s.message,e)}return t}const VF=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Hn=(n,e,t,r)=>{var s;n.format||(s=n.anyOf)!=null&&s.some(a=>a.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push({format:n.format,...n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}}}),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push({format:e,...t&&r.errorMessages&&{errorMessage:{format:t}}})):ze(n,"format",e,t,r)},qn=(n,e,t,r)=>{var s;n.pattern||(s=n.allOf)!=null&&s.some(a=>a.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push({pattern:n.pattern,...n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}}}),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push({pattern:LS(e,r),...t&&r.errorMessages&&{errorMessage:{pattern:t}}})):ze(n,"pattern",LS(e,r),t,r)},LS=(n,e)=>{var f;const t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},s=r.i?t.source.toLowerCase():t.source;let a="",u=!1,l=!1,d=!1;for(let h=0;h<s.length;h++){if(u){a+=s[h],u=!1;continue}if(r.i){if(l){if(s[h].match(/[a-z]/)){d?(a+=s[h],a+=`${s[h-2]}-${s[h]}`.toUpperCase(),d=!1):s[h+1]==="-"&&((f=s[h+2])!=null&&f.match(/[a-z]/))?(a+=s[h],d=!0):a+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){a+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(r.m){if(s[h]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){a+=`($|(?=[\r
]))`;continue}}if(r.s&&s[h]==="."){a+=l?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}a+=s[h],s[h]==="\\"?u=!0:l&&s[h]==="]"?l=!1:!l&&s[h]==="["&&(l=!0)}try{const h=new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return a};function $1(n,e){var r,s,a,u;if(e.target==="openApi3"&&((r=n.keyType)==null?void 0:r._def.typeName)===F.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((l,d)=>({...l,[d]:De(n.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:De(n.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(((s=n.keyType)==null?void 0:s._def.typeName)===F.ZodString&&((a=n.keyType._def.checks)!=null&&a.length)){const l=Object.entries(L1(n.keyType._def,e)).reduce((d,[f,h])=>f==="type"?d:{...d,[f]:h},{});return{...t,propertyNames:l}}else if(((u=n.keyType)==null?void 0:u._def.typeName)===F.ZodEnum)return{...t,propertyNames:{enum:n.keyType._def.values}};return t}function zF(n,e){if(e.mapStrategy==="record")return $1(n,e);const t=De(n.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},r=De(n.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function HF(n){const e=n.values,r=Object.keys(n.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),s=Array.from(new Set(r.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:r}}function qF(){return{not:{}}}function WF(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const td={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ZF(n,e){if(e.target==="openApi3")return $S(n,e);const t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in td&&(!r._def.checks||!r._def.checks.length))){const r=t.reduce((s,a)=>{const u=td[a._def.typeName];return u&&!s.includes(u)?[...s,u]:s},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=t.reduce((s,a)=>{const u=typeof a._def.value;switch(u){case"string":case"number":case"boolean":return[...s,u];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(r.length===t.length){const s=r.filter((a,u,l)=>l.indexOf(a)===u);return{type:s.length>1?s:s[0],enum:t.reduce((a,u)=>a.includes(u._def.value)?a:[...a,u._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,s)=>[...r,...s._def.values.filter(a=>!r.includes(a))],[])};return $S(n,e)}const $S=(n,e)=>{const t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,s)=>De(r._def,{...e,currentPath:[...e.currentPath,"anyOf",`${s}`]})).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function GF(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:td[n.innerType._def.typeName],nullable:!0}:{type:[td[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const r=De(n.innerType._def,{...e,currentPath:[...e.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const t=De(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function KF(n,e){const t={type:"number"};if(!n.checks)return t;for(const r of n.checks)switch(r.kind){case"int":t.type="integer",N1(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?ze(t,"minimum",r.value,r.message,e):ze(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),ze(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?ze(t,"maximum",r.value,r.message,e):ze(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),ze(t,"maximum",r.value,r.message,e));break;case"multipleOf":ze(t,"multipleOf",r.value,r.message,e);break}return t}function JF(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":De(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":De(n.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0}function XF(n,e){const t={type:"object",...Object.entries(n.shape()).reduce((r,[s,a])=>{if(a===void 0||a._def===void 0)return r;const u=[...e.currentPath,"properties",s],l=De(a._def,{...e,currentPath:u,propertyPath:u});return l===void 0?r:(e.openaiStrictMode&&a.isOptional()&&!a.isNullable()&&console.warn(`Zod field at \`${u.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required
This will become an error in a future version of the SDK.`),{properties:{...r.properties,[s]:l},required:a.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,s]})},{properties:{},required:[]}),additionalProperties:JF(n,e)};return t.required.length||delete t.required,t}const YF=(n,e)=>{var r;if(e.currentPath.toString()===((r=e.propertyPath)==null?void 0:r.toString()))return De(n.innerType._def,e);const t=De(n.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},QF=(n,e)=>{if(e.pipeStrategy==="input")return De(n.in._def,e);if(e.pipeStrategy==="output")return De(n.out._def,e);const t=De(n.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),r=De(n.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,r].filter(s=>s!==void 0)}};function e4(n,e){return De(n.type._def,e)}function t4(n,e){const r={type:"array",uniqueItems:!0,items:De(n.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return n.minSize&&ze(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&ze(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function n4(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>De(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:De(n.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>De(t._def,{...e,currentPath:[...e.currentPath,"items",`${r}`]})).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function r4(){return{not:{}}}function s4(){return{}}const i4=(n,e)=>De(n.innerType._def,e);function De(n,e,t=!1){var u;const r=e.seen.get(n);if(e.override){const l=(u=e.override)==null?void 0:u.call(e,n,e,r,t);if(l!==TF)return l}if(r&&!t){const l=a4(r,e);if(l!==void 0)return"$ref"in l&&e.seenRefs.add(l.$ref),l}const s={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,s);const a=u4(n,n.typeName,e,t);return a&&l4(n,e,a),s.jsonSchema=a,a}const a4=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":const t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:o4(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,s)=>e.currentPath[s]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},o4=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},u4=(n,e,t,r)=>{switch(e){case F.ZodString:return L1(n,t);case F.ZodNumber:return KF(n,t);case F.ZodObject:return XF(n,t);case F.ZodBigInt:return RF(n,t);case F.ZodBoolean:return IF();case F.ZodDate:return j1(n,t);case F.ZodUndefined:return r4();case F.ZodNull:return WF(t);case F.ZodArray:return OF(n,t);case F.ZodUnion:case F.ZodDiscriminatedUnion:return ZF(n,t);case F.ZodIntersection:return UF(n,t);case F.ZodTuple:return n4(n,t);case F.ZodRecord:return $1(n,t);case F.ZodLiteral:return BF(n,t);case F.ZodEnum:return DF(n);case F.ZodNativeEnum:return HF(n);case F.ZodNullable:return GF(n,t);case F.ZodOptional:return YF(n,t);case F.ZodMap:return zF(n,t);case F.ZodSet:return t4(n,t);case F.ZodLazy:return De(n.getter()._def,t);case F.ZodPromise:return e4(n,t);case F.ZodNaN:case F.ZodNever:return qF();case F.ZodEffects:return MF(n,t,r);case F.ZodAny:return kF();case F.ZodUnknown:return s4();case F.ZodDefault:return $F(n,t);case F.ZodBranded:return NF(n,t);case F.ZodReadonly:return i4(n,t);case F.ZodCatch:return jF(n,t);case F.ZodPipeline:return QF(n,t);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return(s=>{})()}},l4=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t),c4=(n,e)=>{const t=CF(e),r=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=De(n._def,r===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,r]},!1)??{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);const u=(()=>{if(PF(t.definitions))return;const d={},f=new Set;for(let h=0;h<500;h++){const m=Object.entries(t.definitions).filter(([y])=>!f.has(y));if(m.length===0)break;for(const[y,v]of m)d[y]=De(wg(v),{...t,currentPath:[...t.basePath,t.definitionPath,y]},!0)??{},f.add(y)}return d})(),l=r===void 0?u?{...s,[t.definitionPath]:u}:s:t.nameStrategy==="duplicate-ref"?{...s,...u||t.seenRefs.size?{[t.definitionPath]:{...u,...t.seenRefs.size?{[r]:s}:void 0}}:void 0}:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:{...u,[r]:s}};return t.target==="jsonSchema7"?l.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(l.$schema="https://json-schema.org/draft/2019-09/schema#"),l};function d4(n,e){return c4(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function f4(n,e,t){return Wj({type:"json_schema",json_schema:{...t,name:e,strict:!0,schema:d4(n,{name:e})}},r=>n.parse(JSON.parse(r)))}function h4(n){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:r,azureOpenAIBasePath:s,baseURL:a,azureADTokenProvider:u,azureOpenAIEndpoint:l}=n;if((r||u)&&s&&e)return`${s}/${e}`;if((r||u)&&l&&e)return`${l}/openai/deployments/${e}`;if(r||u){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return a}function p4(n){return n!==void 0&&Array.isArray(n.lc_namespace)}function m4(n){return n!==void 0&&Tt.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}function g4(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&(Yy(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}function M1(n){return g4(n)||m4(n)||p4(n)}function y4(n){return Yy(n)?$u(n):n}function v4(n,e){return{name:n.name,description:n.description,parameters:y4(n.schema)}}function _4(n,e){let t;return M1(n)?t={type:"function",function:v4(n)}:t=n,t}function pc(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function ym(n){let e;return n.constructor.name===cd.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===wn.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=pc(n,"INVALID_TOOL_RESULTS"):n.status===401?e=pc(n,"MODEL_AUTHENTICATION"):n.status===429?e=pc(n,"MODEL_RATE_LIMIT"):n.status===404?e=pc(n,"MODEL_NOT_FOUND"):e=n,e}function MS(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}function w4(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function b4(n){const e=["namespace functions {",""];for(const t of n)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(D1(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function D1(n,e){var r;const t=[];for(const[s,a]of Object.entries(n.properties??{}))a.description&&e<2&&t.push(`// ${a.description}`),(r=n.required)!=null&&r.includes(s)?t.push(`${s}: ${nd(a,e)},`):t.push(`${s}?: ${nd(a,e)},`);return t.map(s=>" ".repeat(e)+s).join(`
`)}function nd(n,e){if(w4(n))return n.anyOf.map(t=>nd(t,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",D1(n,e+2),"}"].join(`
`);case"array":return n.items?`${nd(n.items,e)}[]`:"any[]";default:return""}}function x4(n,e){let t;return M1(n)?t=_4(n):t=n,(e==null?void 0:e.strict)!==void 0&&(t.function.strict=e.strict),t}function S4(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function tv(n){const e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Ou.isInstance(n))throw new Error("Invalid generic chat message");return S4(n)}default:throw new Error(`Unknown message type: ${e}`)}}const F1={providerName:"ChatOpenAI",fromStandardTextBlock(n){return{type:"text",text:n.text}},fromStandardImageBlock(n){var e,t;if(n.source_type==="url")return{type:"image_url",image_url:{url:n.url,...(e=n.metadata)!=null&&e.detail?{detail:n.metadata.detail}:{}}};if(n.source_type==="base64")return{type:"image_url",image_url:{url:`data:${n.mime_type??""};base64,${n.data}`,...(t=n.metadata)!=null&&t.detail?{detail:n.metadata.detail}:{}}};throw new Error(`Image content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(n){if(n.source_type==="url"){const e=K0({dataUrl:n.url});if(!e)throw new Error(`URL audio blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);const t=e.mime_type||n.mime_type||"";let r;try{r=G0(t)}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(n.source_type==="base64"){let e;try{e=G0(n.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:n.data}}}throw new Error(`Audio content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(n){var e,t,r,s,a,u,l,d,f,h;if(n.source_type==="url"){if(!K0({dataUrl:n.url}))throw new Error(`URL file blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:n.url,...(e=n.metadata)!=null&&e.filename||(t=n.metadata)!=null&&t.name?{filename:((r=n.metadata)==null?void 0:r.filename)||((s=n.metadata)==null?void 0:s.name)}:{}}}}if(n.source_type==="base64")return{type:"file",file:{file_data:`data:${n.mime_type??""};base64,${n.data}`,...(a=n.metadata)!=null&&a.filename||(u=n.metadata)!=null&&u.name||(l=n.metadata)!=null&&l.title?{filename:((d=n.metadata)==null?void 0:d.filename)||((f=n.metadata)==null?void 0:f.name)||((h=n.metadata)==null?void 0:h.title)}:{}}};if(n.source_type==="id")return{type:"file",file:{file_id:n.id}};throw new Error(`File content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)}};function DS(n,e){return n.flatMap(t=>{var u;let r=tv(t);r==="system"&&rd(e)&&(r="developer");const s=typeof t.content=="string"?t.content:t.content.map(l=>ui(l)?qA(l,F1):l),a={role:r,content:s};if(t.name!=null&&(a.name=t.name),t.additional_kwargs.function_call!=null&&(a.function_call=t.additional_kwargs.function_call,a.content=""),_s(t)&&((u=t.tool_calls)!=null&&u.length)?(a.tool_calls=t.tool_calls.map(SF),a.content=""):(t.additional_kwargs.tool_calls!=null&&(a.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(a.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){const l={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[a,l]}return a})}const ra="__openai_function_call_ids__";function E4(n){const e=(n.summary.length>1?n.summary.reduce((t,r)=>{const s=t.at(-1);return s.index===r.index?s.text+=r.text:t.push(r),t},[{...n.summary[0]}]):n.summary).map(t=>Object.fromEntries(Object.entries(t).filter(([r])=>r!=="index")));return{...n,summary:e}}function FS(n,e,t){var u;const r=n.filter(l=>_s(l)).pop(),s=(u=r==null?void 0:r.response_metadata)==null?void 0:u.id;return(s&&s.startsWith("resp_")&&!t?n.slice(n.indexOf(r)+1):n).flatMap(l=>{var h,m,y;let d=tv(l);if(d==="system"&&rd(e)&&(d="developer"),d==="function")throw new Error("Function messages are not supported in Responses API");if(d==="tool"){const v=l;return((h=v.additional_kwargs)==null?void 0:h.type)==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof v.content=="string")return{type:"computer_screenshot",image_url:v.content};if(Array.isArray(v.content)){const b=v.content.find(E=>E.type==="computer_screenshot");if(b)return b;const S=v.content.find(E=>E.type==="image_url");if(S)return{type:"computer_screenshot",image_url:typeof S.image_url=="string"?S.image_url:S.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:v.tool_call_id}:{type:"function_call_output",call_id:v.tool_call_id,id:v.id,output:typeof v.content!="string"?JSON.stringify(v.content):v.content}}if(d==="assistant"){if(!t&&l.response_metadata.output!=null&&Array.isArray(l.response_metadata.output)&&l.response_metadata.output.length>0&&l.response_metadata.output.every(A=>"type"in A))return l.response_metadata.output;const v=[];if(!t&&l.additional_kwargs.reasoning!=null&&(T=>typeof T=="object"&&T!=null&&"type"in T&&T.type==="reasoning")(l.additional_kwargs.reasoning)){const T=E4(l.additional_kwargs.reasoning);v.push(T)}let{content:w}=l;l.additional_kwargs.refusal!=null&&(typeof w=="string"&&(w=[{type:"output_text",text:w,annotations:[]}]),w=[...w,{type:"refusal",refusal:l.additional_kwargs.refusal}]),v.push({type:"message",role:"assistant",...l.id&&!t?{id:l.id}:{},content:typeof w=="string"?w:w.flatMap(A=>A.type==="text"?{type:"output_text",text:A.text,annotations:A.annotations??[]}:A.type==="output_text"||A.type==="refusal"?A:[])});const b=l.additional_kwargs[ra];_s(l)&&((m=l.tool_calls)!=null&&m.length)?v.push(...l.tool_calls.map(A=>({type:"function_call",name:A.name,arguments:JSON.stringify(A.args),call_id:A.id,...t?{id:b==null?void 0:b[A.id]}:{}}))):l.additional_kwargs.tool_calls!=null&&v.push(...l.additional_kwargs.tool_calls.map(A=>({type:"function_call",name:A.function.name,call_id:A.id,...t?{id:b==null?void 0:b[A.id]}:{},arguments:A.function.arguments})));const S=(y=l.response_metadata.output)!=null&&y.length?l.response_metadata.output:l.additional_kwargs.tool_outputs;let E=[];if(S!=null){const A=S;E=A==null?void 0:A.filter(T=>T.type==="computer_call"),E.length>0&&v.push(...E)}return v}const f=typeof l.content=="string"?l.content:l.content.flatMap(v=>{if(ui(v))return qA(v,F1);if(v.type==="text")return{type:"input_text",text:v.text};if(v.type==="image_url"){const w=typeof v.image_url=="string"?v.image_url:v.image_url.url,b=typeof v.image_url=="string"?"auto":v.image_url.detail;return{type:"input_image",image_url:w,detail:b}}return v.type==="input_text"||v.type==="input_image"||v.type==="input_file"?v:[]});return d==="user"||d==="system"||d==="developer"?{type:"message",role:d,content:f}:(console.warn(`Unsupported role found when converting to OpenAI Responses API: ${d}`),[])})}function U1(n){if(n.error){const l=new Error(n.error.message);throw l.name=n.error.code,l}let e;const t=[],r=[],s=[],a={model:n.model,created_at:n.created_at,id:n.id,incomplete_details:n.incomplete_details,metadata:n.metadata,object:n.object,status:n.status,user:n.user,model_name:n.model},u={};for(const l of n.output)if(l.type==="message")e=l.id,t.push(...l.content.flatMap(d=>d.type==="output_text"?("parsed"in d&&d.parsed!=null&&(u.parsed=d.parsed),{type:"text",text:d.text,annotations:d.annotations}):d.type==="refusal"?(u.refusal=d.refusal,[]):d));else if(l.type==="function_call"){const d={function:{name:l.name,arguments:l.arguments},id:l.call_id};try{r.push(ev(d,{returnId:!0}))}catch(f){let h;typeof f=="object"&&f!=null&&"message"in f&&typeof f.message=="string"&&(h=f.message),s.push(I1(d,h))}u[ra]??(u[ra]={}),l.id&&(u[ra][l.call_id]=l.id)}else l.type==="reasoning"?u.reasoning=l:(u.tool_outputs??(u.tool_outputs=[]),u.tool_outputs.push(l));return new tu({id:e,content:t,tool_calls:r,invalid_tool_calls:s,usage_metadata:n.usage,additional_kwargs:u,response_metadata:a})}function T4(n){var d,f;const e=[];let t={},r;const s=[],a={},u={};let l;if(n.type==="response.output_text.delta")e.push({type:"text",text:n.delta,index:n.content_index});else if(n.type==="response.output_text.annotation.added")e.push({type:"text",text:"",annotations:[n.annotation],index:n.content_index});else if(n.type==="response.output_item.added"&&n.item.type==="message")l=n.item.id;else if(n.type==="response.output_item.added"&&n.item.type==="function_call")s.push({type:"tool_call_chunk",name:n.item.name,args:n.item.arguments,id:n.item.call_id,index:n.output_index}),u[ra]={[n.item.call_id]:n.item.id};else if(n.type==="response.output_item.done"&&(n.item.type==="web_search_call"||n.item.type==="file_search_call"||n.item.type==="computer_call"))u.tool_outputs=[n.item];else if(n.type==="response.created")a.id=n.response.id,a.model_name=n.response.model,a.model=n.response.model;else if(n.type==="response.completed"){const h=U1(n.response);r=n.response.usage,((f=(d=n.response.text)==null?void 0:d.format)==null?void 0:f.type)==="json_schema"&&(u.parsed??(u.parsed=JSON.parse(h.text)));for(const[m,y]of Object.entries(n.response))m!=="id"&&(a[m]=y)}else if(n.type==="response.function_call_arguments.delta")s.push({type:"tool_call_chunk",args:n.delta,index:n.output_index});else if(n.type==="response.web_search_call.completed"||n.type==="response.file_search_call.completed")t={tool_outputs:{id:n.item_id,type:n.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(n.type==="response.refusal.done")u.refusal=n.refusal;else if(n.type==="response.output_item.added"&&"item"in n&&n.item.type==="reasoning"){const h=n.item.summary?n.item.summary.map((m,y)=>({...m,index:y})):void 0;u.reasoning={id:n.item.id,type:n.item.type,...h?{summary:h}:{}}}else if(n.type==="response.reasoning_summary_part.added")u.reasoning={type:"reasoning",summary:[{...n.part,index:n.summary_index}]};else if(n.type==="response.reasoning_summary_text.delta")u.reasoning={type:"reasoning",summary:[{text:n.delta,type:"summary_text",index:n.summary_index}]};else return null;return new fi({text:e.map(h=>h.text).join(""),message:new Es({id:l,content:e,tool_call_chunks:s,usage_metadata:r,additional_kwargs:u,response_metadata:a}),generationInfo:t})}function vm(n){return"type"in n&&n.type!=="function"}function A4(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function US(n,e){return k1(n)?(e==null?void 0:e.strict)!==void 0?{...n,function:{...n.function,strict:e.strict}}:n:x4(n,e)}function rd(n){return n&&/^o\d/.test(n)}class P4 extends ys{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","useResponsesApi","zdrEnabled","reasoning"]}constructor(e){var t,r,s;super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=(e==null?void 0:e.apiKey)??(e==null?void 0:e.openAIApiKey)??((t=e==null?void 0:e.configuration)==null?void 0:t.apiKey)??br("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=((r=e==null?void 0:e.configuration)==null?void 0:r.organization)??br("OPENAI_ORGANIZATION"),this.model=(e==null?void 0:e.model)??(e==null?void 0:e.modelName)??this.model,this.modelName=this.model,this.modelKwargs=(e==null?void 0:e.modelKwargs)??{},this.timeout=e==null?void 0:e.timeout,this.temperature=(e==null?void 0:e.temperature)??this.temperature,this.topP=(e==null?void 0:e.topP)??this.topP,this.frequencyPenalty=(e==null?void 0:e.frequencyPenalty)??this.frequencyPenalty,this.presencePenalty=(e==null?void 0:e.presencePenalty)??this.presencePenalty,this.logprobs=e==null?void 0:e.logprobs,this.topLogprobs=e==null?void 0:e.topLogprobs,this.n=(e==null?void 0:e.n)??this.n,this.logitBias=e==null?void 0:e.logitBias,this.stop=(e==null?void 0:e.stopSequences)??(e==null?void 0:e.stop),this.stopSequences=this.stop,this.user=e==null?void 0:e.user,this.__includeRawResponse=e==null?void 0:e.__includeRawResponse,this.audio=e==null?void 0:e.audio,this.modalities=e==null?void 0:e.modalities,this.reasoningEffort=(e==null?void 0:e.reasoningEffort)??((s=e==null?void 0:e.reasoning)==null?void 0:s.effort),this.reasoning=(e==null?void 0:e.reasoning)??(e!=null&&e.reasoningEffort?{effort:e.reasoningEffort}:void 0),this.maxTokens=(e==null?void 0:e.maxCompletionTokens)??(e==null?void 0:e.maxTokens),this.useResponsesApi=(e==null?void 0:e.useResponsesApi)??this.useResponsesApi,this.disableStreaming=(e==null?void 0:e.disableStreaming)??this.disableStreaming,this.model==="o1"&&(this.disableStreaming=!0),this.streaming=(e==null?void 0:e.streaming)??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=(e==null?void 0:e.streamUsage)??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e==null?void 0:e.configuration},(e==null?void 0:e.supportsStrictToolCalling)!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),this.zdrEnabled=(e==null?void 0:e.zdrEnabled)??!1}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,t){let r;return(t==null?void 0:t.strict)!==void 0?r=t.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.bind({tools:e.map(s=>vm(s)?s:US(s,{strict:r})),...t})}createResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&mc(e.json_schema.schema)?f4(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}getReasoningParams(e){if(!rd(this.model))return;let t;return this.reasoningEffort!==void 0&&(t={effort:this.reasoningEffort}),this.reasoning!==void 0&&(t={...t,...this.reasoning}),(e==null?void 0:e.reasoning_effort)!==void 0&&(t={...t,effort:e.reasoning_effort}),(e==null?void 0:e.reasoning)!==void 0&&(t={...t,...e.reasoning}),t}invocationParams(e,t){var l,d;let r;if((e==null?void 0:e.strict)!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this._useResponseApi(e)){const f={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e==null?void 0:e.previous_response_id,truncation:e==null?void 0:e.truncation,include:e==null?void 0:e.include,tools:(l=e==null?void 0:e.tools)!=null&&l.length?e.tools.map(m=>vm(m)?m:k1(m)?{type:"function",name:m.function.name,parameters:m.function.parameters,description:m.function.description,strict:r}:null).filter(m=>m!==null):void 0,tool_choice:A4(e==null?void 0:e.tool_choice)?e==null?void 0:e.tool_choice:(()=>{const m=MS(e==null?void 0:e.tool_choice);if(typeof m=="object"&&"type"in m)return{type:"function",name:m.function.name}})(),text:(()=>{if(e!=null&&e.text)return e.text;const m=this.createResponseFormat(e==null?void 0:e.response_format);return(m==null?void 0:m.type)==="json_schema"?m.json_schema.schema!=null?{format:{type:"json_schema",schema:m.json_schema.schema,description:m.json_schema.description,name:m.json_schema.name,strict:m.json_schema.strict}}:void 0:{format:m}})(),parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},h=this.getReasoningParams(e);return h!==void 0&&(f.reasoning=h),f}let s={};(e==null?void 0:e.stream_options)!==void 0?s={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t!=null&&t.streaming)&&(s={stream_options:{include_usage:!0}});const a={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:(e==null?void 0:e.stop)??this.stopSequences,user:this.user,stream:this.streaming,functions:e==null?void 0:e.functions,function_call:e==null?void 0:e.function_call,tools:(d=e==null?void 0:e.tools)!=null&&d.length?e.tools.map(f=>US(f,{strict:r})):void 0,tool_choice:MS(e==null?void 0:e.tool_choice),response_format:this.createResponseFormat(e==null?void 0:e.response_format),seed:e==null?void 0:e.seed,...s,parallel_tool_calls:e==null?void 0:e.parallel_tool_calls,...this.audio||e!=null&&e.audio?{audio:this.audio||(e==null?void 0:e.audio)}:{},...this.modalities||e!=null&&e.modalities?{modalities:this.modalities||(e==null?void 0:e.modalities)}:{},...this.modelKwargs};(e==null?void 0:e.prediction)!==void 0&&(a.prediction=e.prediction);const u=this.getReasoningParams(e);return u!==void 0&&u.effort!==void 0&&(a.reasoning_effort=u.effort),rd(a.model)?a.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:a.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,a}_convertOpenAIChatCompletionMessageToBaseMessage(e,t){const r=e.tool_calls;switch(e.role){case"assistant":{const s=[],a=[];for(const d of r??[])try{s.push(ev(d,{returnId:!0}))}catch(f){a.push(I1(d,f.message))}const u={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(u.__raw_response=t);const l={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(u.audio=e.audio),new tu({content:e.content||"",tool_calls:s,invalid_tool_calls:a,additional_kwargs:u,response_metadata:l,id:t.id})}default:return new Ou(e.content||"",e.role??"unknown")}}_convertOpenAIDeltaToBaseMessageChunk(e,t,r){var d,f;const s=e.role??r,a=e.content??"";let u;e.function_call?u={function_call:e.function_call}:e.tool_calls?u={tool_calls:e.tool_calls}:u={},this.__includeRawResponse&&(u.__raw_response=t),e.audio&&(u.audio={...e.audio,index:t.choices[0].index});const l={usage:{...t.usage}};if(s==="user")return new Ad({content:a,response_metadata:l});if(s==="assistant"){const h=[];if(Array.isArray(e.tool_calls))for(const m of e.tool_calls)h.push({name:(d=m.function)==null?void 0:d.name,args:(f=m.function)==null?void 0:f.arguments,id:m.id,index:m.index,type:"tool_call_chunk"});return new Es({content:a,tool_call_chunks:h,additional_kwargs:u,id:t.id,response_metadata:l})}else return s==="system"?new nu({content:a,response_metadata:l}):s==="developer"?new nu({content:a,response_metadata:l,additional_kwargs:{__openai_role__:"developer"}}):s==="function"?new Td({content:a,additional_kwargs:u,name:e.name,response_metadata:l}):s==="tool"?new Dy({content:a,additional_kwargs:u,tool_call_id:e.tool_call_id,response_metadata:l}):new Ed({content:a,role:s,response_metadata:l})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,r){var f,h,m,y,v,w,b,S,E,A,T;if(this._useResponseApi(t)){const R=e.filter(B=>_s(B)).pop(),I=(f=R==null?void 0:R.response_metadata)==null?void 0:f.id,M=await this.responseApiWithRetry({...this.invocationParams(t,{streaming:!0}),input:FS(e,this.model,this.zdrEnabled),stream:!0,...I&&I.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:I}:{}},t);for await(const B of M){const U=T4(B);U!=null&&(yield U)}return}const s=DS(e,this.model),a={...this.invocationParams(t,{streaming:!0}),messages:s,stream:!0};let u;const l=await this.completionWithRetry(a,t);let d;for await(const R of l){const I=(h=R==null?void 0:R.choices)==null?void 0:h[0];if(R.usage&&(d=R.usage),!I)continue;const{delta:M}=I;if(!M)continue;const B=this._convertOpenAIDeltaToBaseMessageChunk(M,R,u);u=M.role??u;const U={prompt:t.promptIndex??0,completion:I.index??0};if(typeof B.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const ie={...U};I.finish_reason!=null&&(ie.finish_reason=I.finish_reason,ie.system_fingerprint=R.system_fingerprint,ie.model_name=R.model),this.logprobs&&(ie.logprobs=I.logprobs);const de=new fi({message:B,text:B.content,generationInfo:ie});yield de,await(r==null?void 0:r.handleLLMNewToken(de.text??"",U,void 0,void 0,void 0,{chunk:de}))}if(d){const R={...((m=d.prompt_tokens_details)==null?void 0:m.audio_tokens)!==null&&{audio:(y=d.prompt_tokens_details)==null?void 0:y.audio_tokens},...((v=d.prompt_tokens_details)==null?void 0:v.cached_tokens)!==null&&{cache_read:(w=d.prompt_tokens_details)==null?void 0:w.cached_tokens}},I={...((b=d.completion_tokens_details)==null?void 0:b.audio_tokens)!==null&&{audio:(S=d.completion_tokens_details)==null?void 0:S.audio_tokens},...((E=d.completion_tokens_details)==null?void 0:E.reasoning_tokens)!==null&&{reasoning:(A=d.completion_tokens_details)==null?void 0:A.reasoning_tokens}};yield new fi({message:new Es({content:"",response_metadata:{usage:{...d}},usage_metadata:{input_tokens:d.prompt_tokens,output_tokens:d.completion_tokens,total_tokens:d.total_tokens,...Object.keys(R).length>0&&{input_token_details:R},...Object.keys(I).length>0&&{output_token_details:I}}}),text:""})}if((T=t.signal)!=null&&T.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,t,r){var f,h;const s=this.invocationParams(t);if(s.stream){const m=this._streamResponseChunks(e,t,r);let y;for await(const v of m)v.message.response_metadata={...v.generationInfo,...v.message.response_metadata},y=(y==null?void 0:y.concat(v))??v;return{generations:y?[y]:[],llmOutput:{estimatedTokenUsage:(f=y==null?void 0:y.message)==null?void 0:f.usage_metadata}}}const a=e.filter(m=>_s(m)).pop(),u=(h=a==null?void 0:a.response_metadata)==null?void 0:h.id,l=FS(e,this.model,this.zdrEnabled),d=await this.responseApiWithRetry({input:l,...s,...u&&u.startsWith("resp_")&&!this.zdrEnabled?{previous_response_id:u}:{}},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});return{generations:[{text:d.output_text,message:U1(d)}],llmOutput:{id:d.id,estimatedTokenUsage:d.usage?{promptTokens:d.usage.input_tokens,completionTokens:d.usage.output_tokens,totalTokens:d.usage.total_tokens}:void 0}}}_useResponseApi(e){var s,a,u;const t=(s=e==null?void 0:e.tools)==null?void 0:s.some(vm),r=(e==null?void 0:e.previous_response_id)!=null||(e==null?void 0:e.text)!=null||(e==null?void 0:e.truncation)!=null||(e==null?void 0:e.include)!=null||((a=e==null?void 0:e.reasoning)==null?void 0:a.summary)!=null||((u=this.reasoning)==null?void 0:u.summary)!=null;return this.useResponsesApi||t||r}async _generate(e,t,r){var l,d;if(this._useResponseApi(t))return this._responseApiGenerate(e,t,r);const s={},a=this.invocationParams(t),u=DS(e,this.model);if(a.stream){const f=this._streamResponseChunks(e,t,r),h={};for await(const S of f){S.message.response_metadata={...S.generationInfo,...S.message.response_metadata};const E=((l=S.generationInfo)==null?void 0:l.completion)??0;h[E]===void 0?h[E]=S:h[E]=h[E].concat(S)}const m=Object.entries(h).sort(([S],[E])=>parseInt(S,10)-parseInt(E,10)).map(([S,E])=>E),{functions:y,function_call:v}=this.invocationParams(t),w=await this.getEstimatedTokenCountFromPrompt(e,y,v),b=await this.getNumTokensFromGenerations(m);return s.input_tokens=w,s.output_tokens=b,s.total_tokens=w+b,{generations:m,llmOutput:{estimatedTokenUsage:{promptTokens:s.input_tokens,completionTokens:s.output_tokens,totalTokens:s.total_tokens}}}}else{let f;t.response_format&&t.response_format.type==="json_schema"?f=await this.betaParsedCompletionWithRetry({...a,stream:!1,messages:u},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options}):f=await this.completionWithRetry({...a,stream:!1,messages:u},{signal:t==null?void 0:t.signal,...t==null?void 0:t.options});const{completion_tokens:h,prompt_tokens:m,total_tokens:y,prompt_tokens_details:v,completion_tokens_details:w}=(f==null?void 0:f.usage)??{};h&&(s.output_tokens=(s.output_tokens??0)+h),m&&(s.input_tokens=(s.input_tokens??0)+m),y&&(s.total_tokens=(s.total_tokens??0)+y),((v==null?void 0:v.audio_tokens)!==null||(v==null?void 0:v.cached_tokens)!==null)&&(s.input_token_details={...(v==null?void 0:v.audio_tokens)!==null&&{audio:v==null?void 0:v.audio_tokens},...(v==null?void 0:v.cached_tokens)!==null&&{cache_read:v==null?void 0:v.cached_tokens}}),((w==null?void 0:w.audio_tokens)!==null||(w==null?void 0:w.reasoning_tokens)!==null)&&(s.output_token_details={...(w==null?void 0:w.audio_tokens)!==null&&{audio:w==null?void 0:w.audio_tokens},...(w==null?void 0:w.reasoning_tokens)!==null&&{reasoning:w==null?void 0:w.reasoning_tokens}});const b=[];for(const S of(f==null?void 0:f.choices)??[]){const A={text:((d=S.message)==null?void 0:d.content)??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(S.message??{role:"assistant"},f)};A.generationInfo={...S.finish_reason?{finish_reason:S.finish_reason}:{},...S.logprobs?{logprobs:S.logprobs}:{}},_s(A.message)&&(A.message.usage_metadata=s),A.message=new tu(Object.fromEntries(Object.entries(A.message).filter(([T])=>!T.startsWith("lc_")))),b.push(A)}return{generations:b,llmOutput:{tokenUsage:{promptTokens:s.input_tokens,completionTokens:s.output_tokens,totalTokens:s.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,t,r){let s=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&r!=="auto"){const a=b4(t);s+=await this.getNumTokens(a),s+=9}return t&&e.find(a=>a._getType()==="system")&&(s-=4),r==="none"?s+=1:typeof r=="object"&&(s+=await this.getNumTokens(r.name)+4),s}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async r=>{var s;return(s=r.message.additional_kwargs)!=null&&s.function_call?(await this.getNumTokensFromMessages([r.message])).countPerMessage[0]:await this.getNumTokens(r.message.content)}))).reduce((r,s)=>r+s,0)}async getNumTokensFromMessages(e){let t=0,r=0,s=0;this.model==="gpt-3.5-turbo-0301"?(r=4,s=-1):(r=3,s=1);const a=await Promise.all(e.map(async u=>{var y,v,w,b,S,E;const l=await this.getNumTokens(u.content),d=await this.getNumTokens(tv(u)),f=u.name!==void 0?s+await this.getNumTokens(u.name):0;let h=l+r+d+f;const m=u;if(m._getType()==="function"&&(h-=2),(y=m.additional_kwargs)!=null&&y.function_call&&(h+=3),(v=m==null?void 0:m.additional_kwargs.function_call)!=null&&v.name&&(h+=await this.getNumTokens((w=m.additional_kwargs.function_call)==null?void 0:w.name)),(b=m.additional_kwargs.function_call)!=null&&b.arguments)try{h+=await this.getNumTokens(JSON.stringify(JSON.parse((S=m.additional_kwargs.function_call)==null?void 0:S.arguments)))}catch(A){console.error("Error parsing function arguments",A,JSON.stringify(m.additional_kwargs.function_call)),h+=await this.getNumTokens((E=m.additional_kwargs.function_call)==null?void 0:E.arguments)}return t+=h,h}));return t+=3,{totalCount:t,countPerMessage:a}}async completionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(s){throw ym(s)}})}async responseApiWithRetry(e,t){return this.caller.call(async()=>{var s,a;const r=this._getClientOptions(t);try{return((a=(s=e.text)==null?void 0:s.format)==null?void 0:a.type)==="json_schema"&&!e.stream?await this.client.responses.parse(e,r):await this.client.responses.create(e,r)}catch(u){throw ym(u)}})}async betaParsedCompletionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.beta.chat.completions.parse(e,r)}catch(s){throw ym(s)}})}_getClientOptions(e){if(!this.client){const r={baseURL:this.clientConfig.baseURL},s=h4(r),a={...this.clientConfig,baseURL:s,timeout:this.timeout,maxRetries:0};a.baseURL||delete a.baseURL,this.client=new Pe(a)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,r)=>(r&&r.tokenUsage&&(t.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let r,s,a,u;C4(e)?(r=e.schema,s=e.name,a=e.method,u=e.includeRaw):(r=e,s=t==null?void 0:t.name,a=t==null?void 0:t.method,u=t==null?void 0:t.includeRaw);let l,d;if((t==null?void 0:t.strict)!==void 0&&a==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?a===void 0&&(a="jsonSchema"):a==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),a==="jsonMode")l=this.bind({response_format:{type:"json_object"}}),mc(r)?d=RS.fromZodSchema(r):d=new IS;else if(a==="jsonSchema")if(l=this.bind({response_format:{type:"json_schema",json_schema:{name:s??"extract",description:r.description,schema:r,strict:t==null?void 0:t.strict}}}),mc(r)){const y=RS.fromZodSchema(r);d=ka.from(v=>"parsed"in v.additional_kwargs?v.additional_kwargs.parsed:y)}else d=new IS;else{let y=s??"extract";if(mc(r)){const v=$u(r);l=this.bind({tools:[{type:"function",function:{name:y,description:v.description,parameters:v}}],tool_choice:{type:"function",function:{name:y}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),d=new NS({returnSingle:!0,keyName:y,zodSchema:r})}else{let v;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(v=r,y=r.name):(y=r.title??y,v={name:y,description:r.description??"",parameters:r}),l=this.bind({tools:[{type:"function",function:v}],tool_choice:{type:"function",function:{name:y}},...(t==null?void 0:t.strict)!==void 0?{strict:t.strict}:{}}),d=new NS({returnSingle:!0,keyName:y})}}if(!u)return l.pipe(d);const f=ed.assign({parsed:(y,v)=>d.invoke(y.raw,v)}),h=ed.assign({parsed:()=>null}),m=f.withFallbacks({fallbacks:[h]});return Fr.from([{raw:l},m])}}function mc(n){return typeof(n==null?void 0:n.parse)=="function"}function C4(n){return n!==void 0&&typeof n.schema=="object"}const k4=new P4({basePath:"https://openrouter.ai/api/v1",apiKey:void 0,modelName:"openai/gpt-4o",defaultHeaders:{"X-Title":"SoftSell"}}),O4=async n=>{const e=[new sg("You are a helpful assistant for customers selling software licenses."),new Ru(n)];return(await k4.invoke(e)).content},R4=()=>{const[n,e]=oe.useState(""),[t,r]=oe.useState([]),[s,a]=oe.useState(!1),[u,l]=oe.useState(!1),d=oe.useRef(null),f={"How do I sell my license?":"To sell your license, upload it to SoftSell and we'll give you a quote.","How fast is the process?":"You'll get paid within a few days.","What types of licenses can I sell?":"We accept software licenses including productivity tools, antivirus, design software, and more.","Is there any fee involved?":"There are no upfront fees. We only deduct a small commission after the sale.","How do I get paid?":"Payments are made via bank transfer or PayPal, whichever you prefer.","Is it legal to resell software licenses?":"Yes, reselling licenses is legal as long as they are original and transferable.","Can I track my license status?":"Yes, once submitted, you can track the status on your dashboard in real-time."},h=async()=>{n.trim()&&(r(y=>[...y,{type:"user",message:n}]),f[n]?r(y=>[...y,{type:"bot",message:f[n]}]):await m(n),e(""))},m=async y=>{try{l(!0);const v=await O4(y);r(w=>[...w,{type:"bot",message:v}])}catch(v){console.error("Langchain error:",v),r(w=>[...w,{type:"bot",message:"Sorry, something went wrong. Please try again."}])}finally{l(!1)}};return oe.useEffect(()=>{var y;(y=d.current)==null||y.scrollIntoView({behavior:"smooth"})},[t]),H.jsxs(H.Fragment,{children:[!s&&H.jsx("button",{className:"fixed bottom-5 right-5 bg-[#1A73E8] p-4 rounded-full shadow-lg hover:bg-[#155ACF] transition z-50 animate-bounce-slow",onClick:()=>a(!0),children:H.jsx("img",{src:sj,alt:"AI Icon",className:"w-14 h-14 rounded-full shadow-md transition-transform duration-500 hover:scale-110"})}),s&&H.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm bg-black/30",children:H.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] rounded-xl shadow-xl w-full max-w-sm h-[500px] flex flex-col p-3 border",children:[H.jsxs("div",{className:"flex justify-between items-center mb-2",children:[H.jsx("h2",{className:"text-lg font-semibold",children:"Ask SoftSell AI"}),H.jsx("button",{className:"text-gray-500 hover:text-gray-800 text-xl",onClick:()=>a(!1),children:""})]}),H.jsxs("div",{className:"mb-2",children:[H.jsx("textarea",{className:"w-full border border-gray-300 rounded-md p-2 text-sm resize-none focus:outline-none focus:ring",rows:"2",placeholder:"Type your question...",value:n,onChange:y=>e(y.target.value)}),H.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-3 py-2 mt-1 rounded-md w-full text-sm hover:bg-blue-700",children:"Send"})]}),H.jsx("div",{className:"mb-2 flex flex-wrap gap-2 text-xs",children:Object.keys(f).map((y,v)=>H.jsx("button",{onClick:async()=>{r(w=>[...w,{type:"user",message:y}]),f[y]?r(w=>[...w,{type:"bot",message:f[y]}]):await m(y)},className:"bg-gray-200 hover:bg-blue-100 text-gray-700 px-2 py-1 rounded-md transition",children:y},v))}),H.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-2 border rounded mb-2",children:[t.map((y,v)=>H.jsxs("div",{className:`mb-2 flex ${y.type==="user"?"justify-end":"justify-start"}`,children:[y.type==="bot"&&H.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2",children:""}),H.jsx("div",{className:`p-2 rounded-md text-sm max-w-[75%] ${y.type==="user"?"bg-gray-200 text-right":"bg-blue-100 text-left"}`,children:y.message})]},v)),u&&H.jsxs("div",{className:"flex justify-start items-center mb-2",children:[H.jsx("div",{className:"w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center mr-2",children:""}),H.jsx("div",{className:"bg-blue-100 text-left p-2 rounded-md text-sm",children:"Thinking..."})]}),H.jsx("div",{ref:d})]})]})})]})},I4=({onClose:n})=>{const[e,t]=oe.useState(""),[r,s]=oe.useState(""),[a,u]=oe.useState(""),[l,d]=oe.useState(""),[f,h]=oe.useState(null),m=y=>{y.preventDefault();const v=new FormData;v.append("licenseId",e),v.append("companyName",r),v.append("contactNumber",a),v.append("description",l),f&&v.append("companyIdImage",f),console.log("Submitting form:");for(let w of v.entries())console.log(w[0]+":",w[1]);n()};return H.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[H.jsx("div",{className:"absolute inset-0 bg-transparent bg-opacity-30 backdrop-blur-sm",onClick:n}),H.jsxs("div",{className:"bg-white dark:bg-[#1E1E1E] text-black dark:text-white p-6 rounded-xl shadow-xl z-50 w-full max-w-md relative",children:[H.jsx("button",{className:"absolute top-3 right-4 text-xl font-bold text-gray-500 hover:text-red-500",onClick:n,children:""}),H.jsx("h2",{className:"text-2xl font-semibold mb-6 text-center",children:"Sell Your License"}),H.jsxs("form",{onSubmit:m,className:"space-y-4",encType:"multipart/form-data",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium",children:"License ID"}),H.jsx("input",{type:"text",value:e,onChange:y=>t(y.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium",children:"Company Name"}),H.jsx("input",{type:"text",value:r,onChange:y=>s(y.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium",children:"Contact Number (Optional)"}),H.jsx("input",{type:"tel",value:a,onChange:y=>u(y.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium",children:"License Description (Optional)"}),H.jsx("textarea",{value:l,onChange:y=>d(y.target.value),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"e.g., Adobe CC 2023 license, valid till Dec 2025"})]}),H.jsxs("div",{children:[H.jsx("label",{className:"block text-sm font-medium",children:"Upload Company ID (Image)"}),H.jsx("input",{type:"file",accept:"image/*",onChange:y=>h(y.target.files[0]),required:!0,className:"w-full px-2 py-1 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),H.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition",children:"Submit"})]})]})]})},N4={hidden:{opacity:0,y:20},visible:n=>({opacity:1,y:0,transition:{delay:n*.05,duration:1}})},Wn={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};function j4(){const[n,e]=oe.useState(0),[t,r]=oe.useState(!1),[s,a]=oe.useState(!1),[u,l]=oe.useState(!1);oe.useEffect(()=>{const w=setInterval(()=>{e(b=>b+1)},5e3);return()=>clearInterval(w)},[]);const d=t?"text-gray-100":"text-[#2D2D2D]",f=t?"bg-[#121212]":"bg-white",h=t?"bg-[#1E1E1E]":"bg-white",m=t?"bg-[#1A1A1A]":"bg-[#E8F0FE]",y=t?"text-white":"text-[#1A73E8]",v=()=>{l(!0)};return H.jsxs("div",{className:`font-sans ${d} ${f} min-h-screen overflow-x-hidden`,children:[u&&H.jsx(I4,{onClose:()=>l(!1)}),H.jsxs("section",{className:"bg-[#1A73E8] text-white py-20 px-6 text-center",children:[H.jsx(Dt.h1,{className:"text-4xl md:text-5xl font-bold mb-4 flex justify-center flex-wrap",initial:"hidden",animate:"visible",children:"Unlock Value from Unused Software Licenses".split("").map((w,b)=>H.jsx(Dt.span,{custom:b,variants:N4,className:"inline-block",children:w===" "?"":w},b))},n),H.jsx(Dt.p,{className:"text-xl md:text-2xl mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:2},children:"Turn dormant software into dollars with SoftSell"}),H.jsxs(Dt.div,{className:"flex justify-center gap-4 flex-wrap mb-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:2.5},children:[H.jsx("button",{className:"bg-white text-[#1A73E8] font-semibold px-6 py-3 rounded-full hover:bg-[#E8F0FE] transition duration-300 hover:scale-105 hover:shadow-lg",children:"Get a Quote"}),H.jsx("button",{onClick:v,className:"bg-white text-[#1A73E8] font-semibold px-6 py-3 rounded-full hover:bg-[#E8F0FE] transition duration-300 hover:scale-105 hover:shadow-lg",children:"Sell My License"})]}),H.jsx("button",{onClick:()=>r(!t),className:"absolute top-5 right-5 p-2 rounded-full bg-white text-[#1A73E8] shadow-lg hover:scale-110 transition",children:t?H.jsx(KN,{size:24}):H.jsx(JN,{size:24})})]}),H.jsxs(Dt.section,{className:`py-16 px-6 ${m} text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("h2",{className:"text-3xl font-bold mb-10",children:"How It Works"}),H.jsx("div",{className:"grid md:grid-cols-3 gap-10 max-w-6xl mx-auto",children:[{title:"Upload License",src:XN},{title:"Get Valuation",src:nj},{title:"Get Paid",src:QN}].map(({title:w,src:b},S)=>H.jsxs(Dt.div,{className:`${h} rounded-2xl p-6 shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("div",{className:"mb-4",children:H.jsx("img",{src:b,alt:w,className:"w-8 h-8 mx-auto"})}),H.jsx("h3",{className:"text-xl font-semibold",children:w})]},S))})]}),H.jsxs(Dt.section,{className:`py-16 px-6 text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("h2",{className:"text-3xl font-bold mb-10",children:"Why Choose SoftSell?"}),H.jsx("div",{className:"grid md:grid-cols-4 gap-8 max-w-6xl mx-auto",children:[{src:ej,title:"Fast Transactions",desc:"Quick and easy license liquidation."},{src:rj,title:"Secure Process",desc:"Your data and licenses are safe with us."},{src:tj,title:"Best Market Rates",desc:"Get top dollar for your unused licenses."},{src:YN,title:"Trusted Experts",desc:"Years of experience in software resale."}].map(({src:w,title:b,desc:S},E)=>H.jsxs(Dt.div,{className:`${h} p-6 rounded-2xl shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("div",{className:"mb-3",children:H.jsx("img",{src:w,alt:b,className:"w-12 h-12 mx-auto object-contain"})}),H.jsx("h3",{className:"font-semibold text-lg mb-2",children:b}),H.jsx("p",{className:"text-sm",children:S})]},E))})]}),H.jsxs(Dt.section,{className:`py-16 px-6 ${m} text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("h2",{className:"text-3xl font-bold mb-10",children:"What Our Customers Say"}),H.jsx("div",{className:"max-w-4xl mx-auto grid md:grid-cols-2 gap-8",children:[{name:"Emily Chen",role:"IT Director",company:"TechNova Inc.",review:"SoftSell made it incredibly easy to recover value from our legacy software. Highly recommend!"},{name:"David Lopez",role:"Procurement Manager",company:"BrightWave Solutions",review:"Fast, secure, and great customer service. SoftSell helped us monetize unused tools in days."}].map(({name:w,role:b,company:S,review:E},A)=>H.jsxs(Dt.div,{className:`${h} p-6 rounded-2xl shadow-md hover:shadow-xl transition duration-300 hover:scale-105 cursor-pointer`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx(BN,{className:`w-6 h-6 ${y} mb-2 mx-auto`}),H.jsxs("p",{className:"italic mb-4",children:['"',E,'"']}),H.jsx("div",{className:"font-semibold",children:w}),H.jsxs("div",{className:"text-sm",children:[b,", ",S]})]},A))})]}),H.jsxs(Dt.section,{className:`py-16 px-6 text-center ${d}`,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:Wn,children:[H.jsx("h2",{className:"text-3xl font-bold mb-10",children:"Get in Touch"}),H.jsxs(Dt.form,{className:"max-w-xl mx-auto grid gap-4 text-left",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.1}}},children:[["Name","Email","Company"].map((w,b)=>H.jsx(Dt.div,{variants:Wn,children:H.jsx("input",{type:w==="Email"?"email":"text",placeholder:w,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105"})},b)),H.jsx(Dt.div,{variants:Wn,children:H.jsxs("select",{required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105",children:[H.jsx("option",{value:"",children:"Select License Type"}),H.jsx("option",{value:"Single User",children:"Single User"}),H.jsx("option",{value:"Multi User",children:"Multi User"}),H.jsx("option",{value:"Enterprise",children:"Enterprise"})]})}),H.jsx(Dt.div,{variants:Wn,children:H.jsx("textarea",{placeholder:"Message",rows:4,required:!0,className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#1A73E8] transition hover:shadow-md hover:scale-105"})}),H.jsx(Dt.button,{type:"submit",className:"w-full bg-[#1A73E8] text-white py-3 rounded-lg hover:bg-[#155ACF] transition duration-300",variants:Wn,children:"Submit"})]})]}),H.jsx(R4,{})]})}var _m={exports:{}},wm,BS;function L4(){if(BS)return wm;BS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return wm=n,wm}var bm,VS;function $4(){if(VS)return bm;VS=1;var n=L4();function e(){}function t(){}return t.resetWarningCache=e,bm=function(){function r(u,l,d,f,h,m){if(m!==n){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},bm}var zS;function M4(){return zS||(zS=1,_m.exports=$4()()),_m.exports}var D4=M4();const Ye=Er(D4);var xm,HS;function F4(){if(HS)return xm;HS=1;function n(l){return l&&typeof l=="object"&&"default"in l?l.default:l}var e=id(),t=n(e);function r(l,d,f){return d in l?Object.defineProperty(l,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[d]=f,l}function s(l,d){l.prototype=Object.create(d.prototype),l.prototype.constructor=l,l.__proto__=d}var a=!!(typeof window<"u"&&window.document&&window.document.createElement);function u(l,d,f){if(typeof l!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof d!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof f<"u"&&typeof f!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function h(m){return m.displayName||m.name||"Component"}return function(y){if(typeof y!="function")throw new Error("Expected WrappedComponent to be a React component.");var v=[],w;function b(){w=l(v.map(function(E){return E.props})),S.canUseDOM?d(w):f&&(w=f(w))}var S=function(E){s(A,E);function A(){return E.apply(this,arguments)||this}A.peek=function(){return w},A.rewind=function(){if(A.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var I=w;return w=void 0,v=[],I};var T=A.prototype;return T.UNSAFE_componentWillMount=function(){v.push(this),b()},T.componentDidUpdate=function(){b()},T.componentWillUnmount=function(){var I=v.indexOf(this);v.splice(I,1),b()},T.render=function(){return t.createElement(y,this.props)},A}(e.PureComponent);return r(S,"displayName","SideEffect("+h(y)+")"),r(S,"canUseDOM",a),S}}return xm=u,xm}var U4=F4();const B4=Er(U4);var Sm,qS;function V4(){if(qS)return Sm;qS=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,u){if(a===u)return!0;if(a&&u&&typeof a=="object"&&typeof u=="object"){if(a.constructor!==u.constructor)return!1;var l,d,f;if(Array.isArray(a)){if(l=a.length,l!=u.length)return!1;for(d=l;d--!==0;)if(!s(a[d],u[d]))return!1;return!0}var h;if(e&&a instanceof Map&&u instanceof Map){if(a.size!==u.size)return!1;for(h=a.entries();!(d=h.next()).done;)if(!u.has(d.value[0]))return!1;for(h=a.entries();!(d=h.next()).done;)if(!s(d.value[1],u.get(d.value[0])))return!1;return!0}if(t&&a instanceof Set&&u instanceof Set){if(a.size!==u.size)return!1;for(h=a.entries();!(d=h.next()).done;)if(!u.has(d.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(u)){if(l=a.length,l!=u.length)return!1;for(d=l;d--!==0;)if(a[d]!==u[d])return!1;return!0}if(a.constructor===RegExp)return a.source===u.source&&a.flags===u.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof u.valueOf=="function")return a.valueOf()===u.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof u.toString=="function")return a.toString()===u.toString();if(f=Object.keys(a),l=f.length,l!==Object.keys(u).length)return!1;for(d=l;d--!==0;)if(!Object.prototype.hasOwnProperty.call(u,f[d]))return!1;if(n&&a instanceof Element)return!1;for(d=l;d--!==0;)if(!((f[d]==="_owner"||f[d]==="__v"||f[d]==="__o")&&a.$$typeof)&&!s(a[f[d]],u[f[d]]))return!1;return!0}return a!==a&&u!==u}return Sm=function(u,l){try{return s(u,l)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},Sm}var z4=V4();const H4=Er(z4);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Em,WS;function q4(){if(WS)return Em;WS=1;var n=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function r(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function s(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var u={},l=0;l<10;l++)u["_"+String.fromCharCode(l)]=l;var d=Object.getOwnPropertyNames(u).map(function(h){return u[h]});if(d.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(h){f[h]=h}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return Em=s()?Object.assign:function(a,u){for(var l,d=r(a),f,h=1;h<arguments.length;h++){l=Object(arguments[h]);for(var m in l)e.call(l,m)&&(d[m]=l[m]);if(n){f=n(l);for(var y=0;y<f.length;y++)t.call(l,f[y])&&(d[f[y]]=l[f[y]])}}return d},Em}var W4=q4();const Z4=Er(W4);var ai={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ee={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ee).map(function(n){return Ee[n]});var Qe={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},sd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},_u={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},G4=Object.keys(sd).reduce(function(n,e){return n[sd[e]]=e,n},{}),K4=[Ee.NOSCRIPT,Ee.SCRIPT,Ee.STYLE],Yn="data-react-helmet",J4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},X4=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},Y4=function(){function n(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),un=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Q4=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},ZS=function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},e3=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},bg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},t3=function(e){var t=ua(e,Ee.TITLE),r=ua(e,_u.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var s=ua(e,_u.DEFAULT_TITLE);return t||s||void 0},n3=function(e){return ua(e,_u.ON_CHANGE_CLIENT_STATE)||function(){}},Tm=function(e,t){return t.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,s){return un({},r,s)},{})},r3=function(e,t){return t.filter(function(r){return typeof r[Ee.BASE]<"u"}).map(function(r){return r[Ee.BASE]}).reverse().reduce(function(r,s){if(!r.length)for(var a=Object.keys(s),u=0;u<a.length;u++){var l=a[u],d=l.toLowerCase();if(e.indexOf(d)!==-1&&s[d])return r.concat(s)}return r},[])},xo=function(e,t,r){var s={};return r.filter(function(a){return Array.isArray(a[e])?!0:(typeof a[e]<"u"&&o3("Helmet: "+e+' should be of type "Array". Instead found type "'+J4(a[e])+'"'),!1)}).map(function(a){return a[e]}).reverse().reduce(function(a,u){var l={};u.filter(function(y){for(var v=void 0,w=Object.keys(y),b=0;b<w.length;b++){var S=w[b],E=S.toLowerCase();t.indexOf(E)!==-1&&!(v===Qe.REL&&y[v].toLowerCase()==="canonical")&&!(E===Qe.REL&&y[E].toLowerCase()==="stylesheet")&&(v=E),t.indexOf(S)!==-1&&(S===Qe.INNER_HTML||S===Qe.CSS_TEXT||S===Qe.ITEM_PROP)&&(v=S)}if(!v||!y[v])return!1;var A=y[v].toLowerCase();return s[v]||(s[v]={}),l[v]||(l[v]={}),s[v][A]?!1:(l[v][A]=!0,!0)}).reverse().forEach(function(y){return a.push(y)});for(var d=Object.keys(l),f=0;f<d.length;f++){var h=d[f],m=Z4({},s[h],l[h]);s[h]=m}return a},[]).reverse()},ua=function(e,t){for(var r=e.length-1;r>=0;r--){var s=e[r];if(s.hasOwnProperty(t))return s[t]}return null},s3=function(e){return{baseTag:r3([Qe.HREF,Qe.TARGET],e),bodyAttributes:Tm(ai.BODY,e),defer:ua(e,_u.DEFER),encode:ua(e,_u.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Tm(ai.HTML,e),linkTags:xo(Ee.LINK,[Qe.REL,Qe.HREF],e),metaTags:xo(Ee.META,[Qe.NAME,Qe.CHARSET,Qe.HTTPEQUIV,Qe.PROPERTY,Qe.ITEM_PROP],e),noscriptTags:xo(Ee.NOSCRIPT,[Qe.INNER_HTML],e),onChangeClientState:n3(e),scriptTags:xo(Ee.SCRIPT,[Qe.SRC,Qe.INNER_HTML],e),styleTags:xo(Ee.STYLE,[Qe.CSS_TEXT],e),title:t3(e),titleAttributes:Tm(ai.TITLE,e)}},xg=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){xg(e)},0)}}(),GS=function(e){return clearTimeout(e)},i3=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||xg:global.requestAnimationFrame||xg,a3=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||GS:global.cancelAnimationFrame||GS,o3=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},So=null,u3=function(e){So&&a3(So),e.defer?So=i3(function(){KS(e,function(){So=null})}):(KS(e),So=null)},KS=function(e,t){var r=e.baseTag,s=e.bodyAttributes,a=e.htmlAttributes,u=e.linkTags,l=e.metaTags,d=e.noscriptTags,f=e.onChangeClientState,h=e.scriptTags,m=e.styleTags,y=e.title,v=e.titleAttributes;Sg(Ee.BODY,s),Sg(Ee.HTML,a),l3(y,v);var w={baseTag:Hi(Ee.BASE,r),linkTags:Hi(Ee.LINK,u),metaTags:Hi(Ee.META,l),noscriptTags:Hi(Ee.NOSCRIPT,d),scriptTags:Hi(Ee.SCRIPT,h),styleTags:Hi(Ee.STYLE,m)},b={},S={};Object.keys(w).forEach(function(E){var A=w[E],T=A.newTags,R=A.oldTags;T.length&&(b[E]=T),R.length&&(S[E]=w[E].oldTags)}),t&&t(),f(e,b,S)},B1=function(e){return Array.isArray(e)?e.join(""):e},l3=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=B1(e)),Sg(Ee.TITLE,t)},Sg=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var s=r.getAttribute(Yn),a=s?s.split(","):[],u=[].concat(a),l=Object.keys(t),d=0;d<l.length;d++){var f=l[d],h=t[f]||"";r.getAttribute(f)!==h&&r.setAttribute(f,h),a.indexOf(f)===-1&&a.push(f);var m=u.indexOf(f);m!==-1&&u.splice(m,1)}for(var y=u.length-1;y>=0;y--)r.removeAttribute(u[y]);a.length===u.length?r.removeAttribute(Yn):r.getAttribute(Yn)!==l.join(",")&&r.setAttribute(Yn,l.join(","))}},Hi=function(e,t){var r=document.head||document.querySelector(Ee.HEAD),s=r.querySelectorAll(e+"["+Yn+"]"),a=Array.prototype.slice.call(s),u=[],l=void 0;return t&&t.length&&t.forEach(function(d){var f=document.createElement(e);for(var h in d)if(d.hasOwnProperty(h))if(h===Qe.INNER_HTML)f.innerHTML=d.innerHTML;else if(h===Qe.CSS_TEXT)f.styleSheet?f.styleSheet.cssText=d.cssText:f.appendChild(document.createTextNode(d.cssText));else{var m=typeof d[h]>"u"?"":d[h];f.setAttribute(h,m)}f.setAttribute(Yn,"true"),a.some(function(y,v){return l=v,f.isEqualNode(y)})?a.splice(l,1):u.push(f)}),a.forEach(function(d){return d.parentNode.removeChild(d)}),u.forEach(function(d){return r.appendChild(d)}),{oldTags:a,newTags:u}},V1=function(e){return Object.keys(e).reduce(function(t,r){var s=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return t?t+" "+s:s},"")},c3=function(e,t,r,s){var a=V1(r),u=B1(t);return a?"<"+e+" "+Yn+'="true" '+a+">"+bg(u,s)+"</"+e+">":"<"+e+" "+Yn+'="true">'+bg(u,s)+"</"+e+">"},d3=function(e,t,r){return t.reduce(function(s,a){var u=Object.keys(a).filter(function(f){return!(f===Qe.INNER_HTML||f===Qe.CSS_TEXT)}).reduce(function(f,h){var m=typeof a[h]>"u"?h:h+'="'+bg(a[h],r)+'"';return f?f+" "+m:m},""),l=a.innerHTML||a.cssText||"",d=K4.indexOf(e)===-1;return s+"<"+e+" "+Yn+'="true" '+u+(d?"/>":">"+l+"</"+e+">")},"")},z1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[sd[s]||s]=e[s],r},t)},f3=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[G4[s]||s]=e[s],r},t)},h3=function(e,t,r){var s,a=(s={key:t},s[Yn]=!0,s),u=z1(r,a);return[In.createElement(Ee.TITLE,u,t)]},p3=function(e,t){return t.map(function(r,s){var a,u=(a={key:s},a[Yn]=!0,a);return Object.keys(r).forEach(function(l){var d=sd[l]||l;if(d===Qe.INNER_HTML||d===Qe.CSS_TEXT){var f=r.innerHTML||r.cssText;u.dangerouslySetInnerHTML={__html:f}}else u[d]=r[l]}),In.createElement(e,u)})},Lr=function(e,t,r){switch(e){case Ee.TITLE:return{toComponent:function(){return h3(e,t.title,t.titleAttributes)},toString:function(){return c3(e,t.title,t.titleAttributes,r)}};case ai.BODY:case ai.HTML:return{toComponent:function(){return z1(t)},toString:function(){return V1(t)}};default:return{toComponent:function(){return p3(e,t)},toString:function(){return d3(e,t,r)}}}},H1=function(e){var t=e.baseTag,r=e.bodyAttributes,s=e.encode,a=e.htmlAttributes,u=e.linkTags,l=e.metaTags,d=e.noscriptTags,f=e.scriptTags,h=e.styleTags,m=e.title,y=m===void 0?"":m,v=e.titleAttributes;return{base:Lr(Ee.BASE,t,s),bodyAttributes:Lr(ai.BODY,r,s),htmlAttributes:Lr(ai.HTML,a,s),link:Lr(Ee.LINK,u,s),meta:Lr(Ee.META,l,s),noscript:Lr(Ee.NOSCRIPT,d,s),script:Lr(Ee.SCRIPT,f,s),style:Lr(Ee.STYLE,h,s),title:Lr(Ee.TITLE,{title:y,titleAttributes:v},s)}},m3=function(e){var t,r;return r=t=function(s){Q4(a,s);function a(){return X4(this,a),e3(this,s.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(l){return!H4(this.props,l)},a.prototype.mapNestedChildrenToProps=function(l,d){if(!d)return null;switch(l.type){case Ee.SCRIPT:case Ee.NOSCRIPT:return{innerHTML:d};case Ee.STYLE:return{cssText:d}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(l){var d,f=l.child,h=l.arrayTypeChildren,m=l.newChildProps,y=l.nestedChildren;return un({},h,(d={},d[f.type]=[].concat(h[f.type]||[],[un({},m,this.mapNestedChildrenToProps(f,y))]),d))},a.prototype.mapObjectTypeChildren=function(l){var d,f,h=l.child,m=l.newProps,y=l.newChildProps,v=l.nestedChildren;switch(h.type){case Ee.TITLE:return un({},m,(d={},d[h.type]=v,d.titleAttributes=un({},y),d));case Ee.BODY:return un({},m,{bodyAttributes:un({},y)});case Ee.HTML:return un({},m,{htmlAttributes:un({},y)})}return un({},m,(f={},f[h.type]=un({},y),f))},a.prototype.mapArrayTypeChildrenToProps=function(l,d){var f=un({},d);return Object.keys(l).forEach(function(h){var m;f=un({},f,(m={},m[h]=l[h],m))}),f},a.prototype.warnOnInvalidChildren=function(l,d){return!0},a.prototype.mapChildrenToProps=function(l,d){var f=this,h={};return In.Children.forEach(l,function(m){if(!(!m||!m.props)){var y=m.props,v=y.children,w=ZS(y,["children"]),b=f3(w);switch(f.warnOnInvalidChildren(m,v),m.type){case Ee.LINK:case Ee.META:case Ee.NOSCRIPT:case Ee.SCRIPT:case Ee.STYLE:h=f.flattenArrayTypeChildren({child:m,arrayTypeChildren:h,newChildProps:b,nestedChildren:v});break;default:d=f.mapObjectTypeChildren({child:m,newProps:d,newChildProps:b,nestedChildren:v});break}}}),d=this.mapArrayTypeChildrenToProps(h,d),d},a.prototype.render=function(){var l=this.props,d=l.children,f=ZS(l,["children"]),h=un({},f);return d&&(h=this.mapChildrenToProps(d,h)),In.createElement(e,h)},Y4(a,null,[{key:"canUseDOM",set:function(l){e.canUseDOM=l}}]),a}(In.Component),t.propTypes={base:Ye.object,bodyAttributes:Ye.object,children:Ye.oneOfType([Ye.arrayOf(Ye.node),Ye.node]),defaultTitle:Ye.string,defer:Ye.bool,encodeSpecialCharacters:Ye.bool,htmlAttributes:Ye.object,link:Ye.arrayOf(Ye.object),meta:Ye.arrayOf(Ye.object),noscript:Ye.arrayOf(Ye.object),onChangeClientState:Ye.func,script:Ye.arrayOf(Ye.object),style:Ye.arrayOf(Ye.object),title:Ye.string,titleAttributes:Ye.object,titleTemplate:Ye.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var s=e.rewind();return s||(s=H1({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},r},g3=function(){return null},y3=B4(s3,u3,H1)(g3),Eg=m3(y3);Eg.renderStatic=Eg.rewind;const v3=({title:n,description:e,keywords:t,image:r,url:s})=>H.jsxs(Eg,{children:[H.jsx("title",{children:n}),H.jsx("meta",{name:"description",content:e}),H.jsx("meta",{name:"keywords",content:t}),H.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),H.jsx("meta",{property:"og:title",content:n}),H.jsx("meta",{property:"og:description",content:e})]});function _3(){return H.jsxs("div",{children:[H.jsx(v3,{title:"Sell Unused Software Licenses | SoftSell",description:"Turn your unused software licenses into cash quickly and securely with SoftSell.",keywords:"sell software license, unused software, license resale, SoftSell"}),H.jsx(j4,{})]})}XC.createRoot(document.getElementById("root")).render(H.jsx(oe.StrictMode,{children:H.jsx(_3,{})}));
